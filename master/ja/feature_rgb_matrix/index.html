
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://drashna.github.io/qmk_mkdocs/master/ja/feature_rgb_matrix/">
      
      <link rel="icon" href="../images/favicon.ico">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-8.1.4">
    
    
      
        <title>RGB マトリックス - QMK Firmware Docs</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.bb3983ee.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.e6a45f82.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Varela+Round:300,400,400i,700%7CSource+Code+Pro&display=fallback">
        <style>:root{--md-text-font:"Varela Round";--md-code-font:"Source Code Pro"}</style>
      
    
    
      <link rel="stylesheet" href="../stylesheets/qmk.css">
    
    <script>__md_scope=new URL("..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="light-blue">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#rgb-matrix-lighting" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-component="outdated" hidden>
        <aside class="md-banner md-banner--warning">
          
        </aside>
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="QMK Firmware Docs" class="md-header__button md-logo" aria-label="QMK Firmware Docs" data-md-component="logo">
      
  <img src="../images/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            QMK Firmware Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              RGB マトリックス
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="light-blue"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="blue-grey" data-md-color-accent="light-blue"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/qmk/qmk_firmware/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    qmk/qmk_firmware
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="QMK Firmware Docs" class="md-nav__button md-logo" aria-label="QMK Firmware Docs" data-md-component="logo">
      
  <img src="../images/logo.png" alt="logo">

    </a>
    QMK Firmware Docs
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/qmk/qmk_firmware/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    qmk/qmk_firmware
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" data-md-state="indeterminate" type="checkbox" id="__nav_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          チュートリアル
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="チュートリアル" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          チュートリアル
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../newbs/" class="md-nav__link">
        入門
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../newbs_getting_started/" class="md-nav__link">
        セットアップ
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../newbs_building_firmware/" class="md-nav__link">
        初めてのファームウェアの構築
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../newbs_flashing/" class="md-nav__link">
        ファームウェアのフラッシュ
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../support/" class="md-nav__link">
        手助けを得る/サポート
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../newbs_learn_more_resources/" class="md-nav__link">
        他のリソース
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../syllabus/" class="md-nav__link">
        シラバス
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" data-md-state="indeterminate" type="checkbox" id="__nav_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          FAQ
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="FAQ" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          FAQ
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../faq_general/" class="md-nav__link">
        一般的な FAQ
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../faq_build/" class="md-nav__link">
        QMK のビルド/コンパイル
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../faq_debug/" class="md-nav__link">
        QMK のデバッグ
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../faq_misc/" class="md-nav__link">
        QMK のトラブルシューティング
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../faq_keymap/" class="md-nav__link">
        キーマップ FAQ
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference_glossary/" class="md-nav__link">
        用語
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" data-md-state="indeterminate" type="checkbox" id="__nav_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Configurator
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Configurator" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Configurator
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../newbs_building_firmware_configurator/" class="md-nav__link">
        概要
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../configurator_step_by_step/" class="md-nav__link">
        ステップ・バイ・ステップ
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../configurator_troubleshooting/" class="md-nav__link">
        トラブルシューティング
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_4" data-md-state="indeterminate" type="checkbox" id="__nav_4_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_4_4">
          QMK API
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="QMK API" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_4">
          <span class="md-nav__icon md-icon"></span>
          QMK API
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../api_overview/" class="md-nav__link">
        概要
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../api_docs/" class="md-nav__link">
        API ドキュメント
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference_configurator_support/" class="md-nav__link">
        キーボードサポート
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../configurator_default_keymaps/" class="md-nav__link">
        デフォルトキーマップの追加
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" data-md-state="indeterminate" type="checkbox" id="__nav_5" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          CLI
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="CLI" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          CLI
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cli/" class="md-nav__link">
        概要
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cli_configuration/" class="md-nav__link">
        設定
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cli_commands/" class="md-nav__link">
        コマンド
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cli_tab_complete/" class="md-nav__link">
        Tab 補完
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          QMK を使う
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="QMK を使う" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          QMK を使う
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_1" data-md-state="indeterminate" type="checkbox" id="__nav_6_1" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_6_1">
          ガイド
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="ガイド" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_1">
          <span class="md-nav__icon md-icon"></span>
          ガイド
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../custom_quantum_functions/" class="md-nav__link">
        機能のカスタマイズ
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../driver_installation_zadig/" class="md-nav__link">
        Zadig を使ったドライバのインストール
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../keymap/" class="md-nav__link">
        キーマップの概要
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_1_4" data-md-state="indeterminate" type="checkbox" id="__nav_6_1_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_6_1_4">
          開発環境
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="開発環境" data-md-level="3">
        <label class="md-nav__title" for="__nav_6_1_4">
          <span class="md-nav__icon md-icon"></span>
          開発環境
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../getting_started_docker/" class="md-nav__link">
        Docker のガイド
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../getting_started_vagrant/" class="md-nav__link">
        Vagrant のガイド
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_1_5" data-md-state="indeterminate" type="checkbox" id="__nav_6_1_5" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_6_1_5">
          書き込み
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="書き込み" data-md-level="3">
        <label class="md-nav__title" for="__nav_6_1_5">
          <span class="md-nav__icon md-icon"></span>
          書き込み
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../flashing/" class="md-nav__link">
        書き込み
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../flashing_bootloadhid/" class="md-nav__link">
        ATmega32A の書き込み (ps2avrgb)
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_1_6" data-md-state="indeterminate" type="checkbox" id="__nav_6_1_6" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_6_1_6">
          IDE
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="IDE" data-md-level="3">
        <label class="md-nav__title" for="__nav_6_1_6">
          <span class="md-nav__icon md-icon"></span>
          IDE
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../other_eclipse/" class="md-nav__link">
        QMK での Eclipse の使用
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../other_vscode/" class="md-nav__link">
        QMK での VSCode の使用
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_1_7" data-md-state="indeterminate" type="checkbox" id="__nav_6_1_7" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_6_1_7">
          Git のベストプラクティス
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Git のベストプラクティス" data-md-level="3">
        <label class="md-nav__title" for="__nav_6_1_7">
          <span class="md-nav__icon md-icon"></span>
          Git のベストプラクティス
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../newbs_git_best_practices/" class="md-nav__link">
        入門
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../newbs_git_using_your_master_branch/" class="md-nav__link">
        フォーク
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../newbs_git_resolving_merge_conflicts/" class="md-nav__link">
        マージの競合の解決
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../newbs_git_resynchronize_a_branch/" class="md-nav__link">
        ブランチの修正
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_1_8" data-md-state="indeterminate" type="checkbox" id="__nav_6_1_8" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_6_1_8">
          キーボードを作る
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="キーボードを作る" data-md-level="3">
        <label class="md-nav__title" for="__nav_6_1_8">
          <span class="md-nav__icon md-icon"></span>
          キーボードを作る
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../hand_wire/" class="md-nav__link">
        Hand Wiring ガイド
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../isp_flashing_guide/" class="md-nav__link">
        ISP 書き込みガイド
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_2" data-md-state="indeterminate" type="checkbox" id="__nav_6_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_6_2">
          単純なキーコード
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="単純なキーコード" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_2">
          <span class="md-nav__icon md-icon"></span>
          単純なキーコード
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../keycodes/" class="md-nav__link">
        完全なリスト
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../keycodes_basic/" class="md-nav__link">
        基本的なキーコード
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference_keymap_extras/" class="md-nav__link">
        言語固有のキーコード
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../feature_advanced_keycodes/" class="md-nav__link">
        修飾キー
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../quantum_keycodes/" class="md-nav__link">
        Quantum キーコード
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_3" data-md-state="indeterminate" type="checkbox" id="__nav_6_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_6_3">
          高度なキーコード
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="高度なキーコード" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_3">
          <span class="md-nav__icon md-icon"></span>
          高度なキーコード
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../feature_command/" class="md-nav__link">
        コマンド
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../feature_dynamic_macros/" class="md-nav__link">
        動的マクロ
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../feature_grave_esc/" class="md-nav__link">
        グレイブ エスケープ
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../feature_leader_key/" class="md-nav__link">
        リーダーキー
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mod_tap/" class="md-nav__link">
        モッドタップ
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../feature_macros/" class="md-nav__link">
        マクロ
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../feature_mouse_keys/" class="md-nav__link">
        マウスキー
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../feature_space_cadet/" class="md-nav__link">
        Space Cadet Shift
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../keycodes_us_ansi_shifted/" class="md-nav__link">
        US ANSI シフトキー
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_4" data-md-state="indeterminate" type="checkbox" id="__nav_6_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_6_4">
          ソフトウェア機能
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="ソフトウェア機能" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_4">
          <span class="md-nav__icon md-icon"></span>
          ソフトウェア機能
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../feature_auto_shift/" class="md-nav__link">
        自動シフト
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../feature_combo/" class="md-nav__link">
        コンボ
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../feature_debounce_type/" class="md-nav__link">
        デバウンス API
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../feature_key_lock/" class="md-nav__link">
        キーロック
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../feature_layers/" class="md-nav__link">
        レイヤー
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../one_shot_keys/" class="md-nav__link">
        ワンショットキー
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../feature_pointing_device/" class="md-nav__link">
        ポインティング デバイス
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../feature_rawhid/" class="md-nav__link">
        ロー HID
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../feature_sequencer/" class="md-nav__link">
        シーケンサー
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../feature_swap_hands/" class="md-nav__link">
        スワップハンド
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../feature_tap_dance/" class="md-nav__link">
        タップダンス
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tap_hold/" class="md-nav__link">
        タップホールド設定
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../feature_terminal/" class="md-nav__link">
        ターミナル
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../feature_unicode/" class="md-nav__link">
        ユニコード
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../feature_userspace/" class="md-nav__link">
        ユーザスペース
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../feature_wpm/" class="md-nav__link">
        WPM 計算
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_5" type="checkbox" id="__nav_6_5" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_6_5">
          ハードウェア機能
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="ハードウェア機能" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_5">
          <span class="md-nav__icon md-icon"></span>
          ハードウェア機能
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_5_1" data-md-state="indeterminate" type="checkbox" id="__nav_6_5_1" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_6_5_1">
          表示
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="表示" data-md-level="3">
        <label class="md-nav__title" for="__nav_6_5_1">
          <span class="md-nav__icon md-icon"></span>
          表示
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../feature_hd44780/" class="md-nav__link">
        HD44780 LCD コントローラ
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../feature_oled_driver/" class="md-nav__link">
        OLED ドライバ
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_5_2" type="checkbox" id="__nav_6_5_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_6_5_2">
          電飾
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="電飾" data-md-level="3">
        <label class="md-nav__title" for="__nav_6_5_2">
          <span class="md-nav__icon md-icon"></span>
          電飾
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../feature_backlight/" class="md-nav__link">
        バックライト
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../feature_led_matrix/" class="md-nav__link">
        LED マトリックス
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../feature_rgblight/" class="md-nav__link">
        RGB ライト
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          RGB マトリックス
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        RGB マトリックス
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#driver-configuration" class="md-nav__link">
    Driver configuration
  </a>
  
    <nav class="md-nav" aria-label="Driver configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#is31fl3731" class="md-nav__link">
    IS31FL3731
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#is31fl3733" class="md-nav__link">
    IS31FL3733
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#is31fl3737" class="md-nav__link">
    IS31FL3737
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ws2812" class="md-nav__link">
    WS2812
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#apa102" class="md-nav__link">
    APA102
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aw20216" class="md-nav__link">
    AW20216
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#common-configuration" class="md-nav__link">
    Common Configuration
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#flags" class="md-nav__link">
    Flags
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#keycodes" class="md-nav__link">
    Keycodes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rgb-matrix-effects" class="md-nav__link">
    RGB Matrix Effects
  </a>
  
    <nav class="md-nav" aria-label="RGB Matrix Effects">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rgb-matrix-effect-typing-heatmap" class="md-nav__link">
    RGB Matrix Effect Typing Heatmap
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#custom-rgb-matrix-effects" class="md-nav__link">
    Custom RGB Matrix Effects
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#colors" class="md-nav__link">
    Colors
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#additional-configh-options" class="md-nav__link">
    Additional config.h Options
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#eeprom-storage" class="md-nav__link">
    EEPROM storage
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#functions" class="md-nav__link">
    Functions
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#direct-operation" class="md-nav__link">
    Direct Operation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#disable-enable-effects" class="md-nav__link">
    Disable/Enable Effects
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#change-effect-mode" class="md-nav__link">
    Change Effect Mode
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#change-color" class="md-nav__link">
    Change Color
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#query-current-status" class="md-nav__link">
    Query Current Status
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#callbacks" class="md-nav__link">
    Callbacks
  </a>
  
    <nav class="md-nav" aria-label="Callbacks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#indicators" class="md-nav__link">
    Indicators
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#indicator-examples" class="md-nav__link">
    Indicator Examples
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../feature_audio/" class="md-nav__link">
        オーディオ
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../feature_bluetooth/" class="md-nav__link">
        Bluetooth
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../feature_bootmagic/" class="md-nav__link">
        ブートマジック
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../custom_matrix/" class="md-nav__link">
        カスタムマトリックス
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../feature_dip_switch/" class="md-nav__link">
        DIP スイッチ
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../feature_encoders/" class="md-nav__link">
        エンコーダ
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../feature_haptic_feedback/" class="md-nav__link">
        触覚フィードバック
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../feature_joystick/" class="md-nav__link">
        ジョイスティック
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../feature_led_indicators/" class="md-nav__link">
        LED インジケータ
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../proton_c_conversion/" class="md-nav__link">
        Proton C 変換
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../feature_ps2_mouse/" class="md-nav__link">
        PS/2 マウス
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../feature_split_keyboard/" class="md-nav__link">
        分割キーボード
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../feature_stenography/" class="md-nav__link">
        速記
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../feature_thermal_printer/" class="md-nav__link">
        感熱式プリンタ
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../feature_velocikey/" class="md-nav__link">
        Velocikey
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" data-md-state="indeterminate" type="checkbox" id="__nav_7" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_7">
          QMK の開発
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="QMK の開発" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          QMK の開発
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../pr_checklist/" class="md-nav__link">
        PR チェックリスト
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_2" data-md-state="indeterminate" type="checkbox" id="__nav_7_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_7_2">
          互換性を破る変更/Breaking changes
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="互換性を破る変更/Breaking changes" data-md-level="2">
        <label class="md-nav__title" for="__nav_7_2">
          <span class="md-nav__icon md-icon"></span>
          互換性を破る変更/Breaking changes
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../breaking_changes/" class="md-nav__link">
        概要
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../breaking_changes_instructions/" class="md-nav__link">
        プルリクエストにフラグが付けられた
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ChangeLog/20210529/" class="md-nav__link">
        最近の変更履歴
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_2_4" data-md-state="indeterminate" type="checkbox" id="__nav_7_2_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_7_2_4">
          過去の互換性を破る変更
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="過去の互換性を破る変更" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_2_4">
          <span class="md-nav__icon md-icon"></span>
          過去の互換性を破る変更
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ChangeLog/20210227/" class="md-nav__link">
        2021 Feb 27, 0.12.0
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ChangeLog/20201128/" class="md-nav__link">
        2020 Nov 28, 0.11.0
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ChangeLog/20200829/" class="md-nav__link">
        2020 Aug 29, 0.10.0
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ChangeLog/20200530/" class="md-nav__link">
        2020 May 30, 0.9.0
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ChangeLog/20200229/" class="md-nav__link">
        2020 Feb 29, 0.8.0
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ChangeLog/20190830/" class="md-nav__link">
        2019 Aug 30, 0.7.0
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_3" data-md-state="indeterminate" type="checkbox" id="__nav_7_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_7_3">
          C 開発
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="C 開発" data-md-level="2">
        <label class="md-nav__title" for="__nav_7_3">
          <span class="md-nav__icon md-icon"></span>
          C 開発
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../arm_debugging/" class="md-nav__link">
        ARM デバッグ ガイド
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../hardware_avr/" class="md-nav__link">
        AVR プロセッサ
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../coding_conventions_c/" class="md-nav__link">
        コーディング規約
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../compatible_microcontrollers/" class="md-nav__link">
        互換性のあるマイクロコントローラ
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_3_5" data-md-state="indeterminate" type="checkbox" id="__nav_7_3_5" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_7_3_5">
          ドライバ
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="ドライバ" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_3_5">
          <span class="md-nav__icon md-icon"></span>
          ドライバ
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../adc_driver/" class="md-nav__link">
        ADC ドライバ
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../audio_driver/" class="md-nav__link">
        オーディオドライバ
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../i2c_driver/" class="md-nav__link">
        I2C ドライバ
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../spi_driver/" class="md-nav__link">
        SPI ドライバ
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ws2812_driver/" class="md-nav__link">
        WS2812 ドライバ
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../eeprom_driver/" class="md-nav__link">
        EEPROM ドライバ
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../serial_driver/" class="md-nav__link">
        シリアル ドライバ
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../uart_driver/" class="md-nav__link">
        UART ドライバ
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../internals_gpio_control/" class="md-nav__link">
        GPIO 制御
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../hardware_keyboard_guidelines/" class="md-nav__link">
        キーボード ガイドライン
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_4" data-md-state="indeterminate" type="checkbox" id="__nav_7_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_7_4">
          Python 開発
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Python 開発" data-md-level="2">
        <label class="md-nav__title" for="__nav_7_4">
          <span class="md-nav__icon md-icon"></span>
          Python 開発
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../coding_conventions_python/" class="md-nav__link">
        コーディング規約
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cli_development/" class="md-nav__link">
        QMK CLI 開発
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_5" data-md-state="indeterminate" type="checkbox" id="__nav_7_5" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_7_5">
          Configurator 開発
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Configurator 開発" data-md-level="2">
        <label class="md-nav__title" for="__nav_7_5">
          <span class="md-nav__icon md-icon"></span>
          Configurator 開発
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_5_1" data-md-state="indeterminate" type="checkbox" id="__nav_7_5_1" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_7_5_1">
          QMK API
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="QMK API" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_5_1">
          <span class="md-nav__icon md-icon"></span>
          QMK API
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../api_development_environment/" class="md-nav__link">
        開発環境
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../api_development_overview/" class="md-nav__link">
        アーキテクチャの概要
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_6" data-md-state="indeterminate" type="checkbox" id="__nav_7_6" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_7_6">
          ハードウェアプラットフォーム開発
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="ハードウェアプラットフォーム開発" data-md-level="2">
        <label class="md-nav__title" for="__nav_7_6">
          <span class="md-nav__icon md-icon"></span>
          ハードウェアプラットフォーム開発
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_6_1" data-md-state="indeterminate" type="checkbox" id="__nav_7_6_1" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_7_6_1">
          Arm/ChibiOS
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Arm/ChibiOS" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_6_1">
          <span class="md-nav__icon md-icon"></span>
          Arm/ChibiOS
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../platformdev_selecting_arm_mcu/" class="md-nav__link">
        MCU の選択
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../platformdev_chibios_earlyinit/" class="md-nav__link">
        早期初期化
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_7" data-md-state="indeterminate" type="checkbox" id="__nav_7_7" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_7_7">
          QMK Reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="QMK Reference" data-md-level="2">
        <label class="md-nav__title" for="__nav_7_7">
          <span class="md-nav__icon md-icon"></span>
          QMK Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../contributing/" class="md-nav__link">
        QMK への貢献
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../translating/" class="md-nav__link">
        QMK ドキュメントの翻訳
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../config_options/" class="md-nav__link">
        設定オプション
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../data_driven_config/" class="md-nav__link">
        データ駆動型コンフィギュレーション
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../getting_started_make_guide/" class="md-nav__link">
        Make ドキュメント
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../documentation_best_practices/" class="md-nav__link">
        ドキュメント ベストプラクティス
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../documentation_templates/" class="md-nav__link">
        ドキュメント テンプレート
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../feature_layouts/" class="md-nav__link">
        コミュニティレイアウト
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../unit_testing/" class="md-nav__link">
        ユニットテスト
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ref_functions/" class="md-nav__link">
        便利な関数
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference_info_json/" class="md-nav__link">
        info.json 形式
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_8" data-md-state="indeterminate" type="checkbox" id="__nav_7_8" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_7_8">
          より深く知るために
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="より深く知るために" data-md-level="2">
        <label class="md-nav__title" for="__nav_7_8">
          <span class="md-nav__icon md-icon"></span>
          より深く知るために
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../how_keyboards_work/" class="md-nav__link">
        キーボードがどのように動作するか
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../how_a_matrix_works/" class="md-nav__link">
        マトリックスがどのように動作するか
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../understanding_qmk/" class="md-nav__link">
        QMK を理解する
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_9" data-md-state="indeterminate" type="checkbox" id="__nav_7_9" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_7_9">
          QMK の内部詳細(作成中)
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="QMK の内部詳細(作成中)" data-md-level="2">
        <label class="md-nav__title" for="__nav_7_9">
          <span class="md-nav__icon md-icon"></span>
          QMK の内部詳細(作成中)
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../internals_defines/" class="md-nav__link">
        定義
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../internals_input_callback_reg/" class="md-nav__link">
        入力コールバック登録
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../internals_midi_device/" class="md-nav__link">
        Midi デバイス
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../internals_midi_device_setup_process/" class="md-nav__link">
        Midi デバイスのセットアップ手順
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../internals_midi_util/" class="md-nav__link">
        Midi ユーティリティ
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../internals_send_functions/" class="md-nav__link">
        Midi 送信関数
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../internals_sysex_tools/" class="md-nav__link">
        Sysex Tools
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#driver-configuration" class="md-nav__link">
    Driver configuration
  </a>
  
    <nav class="md-nav" aria-label="Driver configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#is31fl3731" class="md-nav__link">
    IS31FL3731
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#is31fl3733" class="md-nav__link">
    IS31FL3733
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#is31fl3737" class="md-nav__link">
    IS31FL3737
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ws2812" class="md-nav__link">
    WS2812
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#apa102" class="md-nav__link">
    APA102
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aw20216" class="md-nav__link">
    AW20216
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#common-configuration" class="md-nav__link">
    Common Configuration
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#flags" class="md-nav__link">
    Flags
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#keycodes" class="md-nav__link">
    Keycodes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rgb-matrix-effects" class="md-nav__link">
    RGB Matrix Effects
  </a>
  
    <nav class="md-nav" aria-label="RGB Matrix Effects">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rgb-matrix-effect-typing-heatmap" class="md-nav__link">
    RGB Matrix Effect Typing Heatmap
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#custom-rgb-matrix-effects" class="md-nav__link">
    Custom RGB Matrix Effects
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#colors" class="md-nav__link">
    Colors
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#additional-configh-options" class="md-nav__link">
    Additional config.h Options
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#eeprom-storage" class="md-nav__link">
    EEPROM storage
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#functions" class="md-nav__link">
    Functions
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#direct-operation" class="md-nav__link">
    Direct Operation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#disable-enable-effects" class="md-nav__link">
    Disable/Enable Effects
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#change-effect-mode" class="md-nav__link">
    Change Effect Mode
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#change-color" class="md-nav__link">
    Change Color
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#query-current-status" class="md-nav__link">
    Query Current Status
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#callbacks" class="md-nav__link">
    Callbacks
  </a>
  
    <nav class="md-nav" aria-label="Callbacks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#indicators" class="md-nav__link">
    Indicators
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#indicator-examples" class="md-nav__link">
    Indicator Examples
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
<a href="https://github.com/qmk/qmk_firmware/edit/master/docs/feature_rgb_matrix.md" title="Edit this page" class="md-content__button md-icon">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
</a>


<h1 id="rgb-matrix-lighting">RGB Matrix Lighting<a class="headerlink" href="#rgb-matrix-lighting" title="Permanent link">&para;</a></h1>
<p>This feature allows you to use RGB LED matrices driven by external drivers. It hooks into the RGBLIGHT system so you can use the same keycodes as RGBLIGHT to control it.</p>
<p>If you want to use single color LED's you should use the <a href="../feature_led_matrix/">LED Matrix Subsystem</a> instead.</p>
<h2 id="driver-configuration">Driver configuration<a class="headerlink" href="#driver-configuration" title="Permanent link">&para;</a></h2>
<hr />
<h3 id="is31fl3731">IS31FL3731<a class="headerlink" href="#is31fl3731" title="Permanent link">&para;</a></h3>
<p>There is basic support for addressable RGB matrix lighting with the I2C IS31FL3731 RGB controller. To enable it, add this to your <code>rules.mk</code>:</p>
<div class="highlight"><pre><span></span><code><span class="nv">RGB_MATRIX_ENABLE</span> <span class="o">=</span> yes
<span class="nv">RGB_MATRIX_DRIVER</span> <span class="o">=</span> IS31FL3731
</code></pre></div>
<p>You can use between 1 and 4 IS31FL3731 IC's. Do not specify <code>DRIVER_ADDR_&lt;N&gt;</code> defines for IC's that are not present on your keyboard. You can define the following items in <code>config.h</code>:</p>
<table>
<thead>
<tr>
<th>Variable</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ISSI_TIMEOUT</code></td>
<td>(Optional) How long to wait for i2c messages, in milliseconds</td>
<td>100</td>
</tr>
<tr>
<td><code>ISSI_PERSISTENCE</code></td>
<td>(Optional) Retry failed messages this many times</td>
<td>0</td>
</tr>
<tr>
<td><code>ISSI_3731_DEGHOST</code></td>
<td>(Optional) Set this define to enable de-ghosting by halving Vcc during blanking time</td>
<td></td>
</tr>
<tr>
<td><code>DRIVER_COUNT</code></td>
<td>(Required) How many RGB driver IC's are present</td>
<td></td>
</tr>
<tr>
<td><code>DRIVER_LED_TOTAL</code></td>
<td>(Required) How many RGB lights are present across all drivers</td>
<td></td>
</tr>
<tr>
<td><code>DRIVER_ADDR_1</code></td>
<td>(Required) Address for the first RGB driver</td>
<td></td>
</tr>
<tr>
<td><code>DRIVER_ADDR_2</code></td>
<td>(Optional) Address for the second RGB driver</td>
<td></td>
</tr>
<tr>
<td><code>DRIVER_ADDR_3</code></td>
<td>(Optional) Address for the third RGB driver</td>
<td></td>
</tr>
<tr>
<td><code>DRIVER_ADDR_4</code></td>
<td>(Optional) Address for the fourth RGB driver</td>
<td></td>
</tr>
</tbody>
</table>
<p>Here is an example using 2 drivers.</p>
<div class="highlight"><pre><span></span><code><span class="c1">// This is a 7-bit address, that gets left-shifted and bit 0</span>
<span class="c1">// set to 0 for write, 1 for read (as per I2C protocol)</span>
<span class="c1">// The address will vary depending on your wiring:</span>
<span class="c1">// 0b1110100 AD &lt;-&gt; GND</span>
<span class="c1">// 0b1110111 AD &lt;-&gt; VCC</span>
<span class="c1">// 0b1110101 AD &lt;-&gt; SCL</span>
<span class="c1">// 0b1110110 AD &lt;-&gt; SDA</span>
<span class="cp">#define DRIVER_ADDR_1 0b1110100</span>
<span class="cp">#define DRIVER_ADDR_2 0b1110110</span>

<span class="cp">#define DRIVER_COUNT 2</span>
<span class="cp">#define DRIVER_1_LED_TOTAL 25</span>
<span class="cp">#define DRIVER_2_LED_TOTAL 24</span>
<span class="cp">#define DRIVER_LED_TOTAL (DRIVER_1_LED_TOTAL + DRIVER_2_LED_TOTAL)</span>
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Note the parentheses, this is so when <code>DRIVER_LED_TOTAL</code> is used in code and expanded, the values are added together before any additional math is applied to them. As an example, <code>rand() % (DRIVER_1_LED_TOTAL + DRIVER_2_LED_TOTAL)</code> will give very different results than <code>rand() % DRIVER_1_LED_TOTAL + DRIVER_2_LED_TOTAL</code>.</p>
</div>
<p>For split keyboards using <code>RGB_MATRIX_SPLIT</code> with an LED driver, you can either have the same driver address or different driver addresses. If using different addresses, use <code>DRIVER_ADDR_1</code> for one and <code>DRIVER_ADDR_2</code> for the other one. Then, in <code>g_is31_leds</code>, fill out the correct driver index (0 or 1). If using one address, use <code>DRIVER_ADDR_1</code> for both, and use index 0 for <code>g_is31_leds</code>.</p>
<p>Define these arrays listing all the LEDs in your <code>&lt;keyboard&gt;.c</code>:</p>
<div class="highlight"><pre><span></span><code><span class="k">const</span><span class="w"> </span><span class="n">is31_led</span><span class="w"> </span><span class="n">PROGMEM</span><span class="w"> </span><span class="n">g_is31_leds</span><span class="p">[</span><span class="n">DRIVER_LED_TOTAL</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="cm">/* Refer to IS31 manual for these locations</span>
<span class="cm"> *   driver</span>
<span class="cm"> *   |  R location</span>
<span class="cm"> *   |  |      G location</span>
<span class="cm"> *   |  |      |      B location</span>
<span class="cm"> *   |  |      |      | */</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">C1_3</span><span class="p">,</span><span class="w">  </span><span class="n">C2_3</span><span class="p">,</span><span class="w">  </span><span class="n">C3_3</span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="p">....</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>Where <code>Cx_y</code> is the location of the LED in the matrix defined by <a href="https://www.issi.com/WW/pdf/31FL3731.pdf">the datasheet</a> and the header file <code>drivers/led/issi/is31fl3731.h</code>. The <code>driver</code> is the index of the driver you defined in your <code>config.h</code> (<code>0</code>, <code>1</code>, <code>2</code>, or <code>3</code>).</p>
<hr />
<h3 id="is31fl3733">IS31FL3733<a class="headerlink" href="#is31fl3733" title="Permanent link">&para;</a></h3>
<p>There is basic support for addressable RGB matrix lighting with the I2C IS31FL3733 RGB controller. To enable it, add this to your <code>rules.mk</code>:</p>
<div class="highlight"><pre><span></span><code><span class="nv">RGB_MATRIX_ENABLE</span> <span class="o">=</span> yes
<span class="nv">RGB_MATRIX_DRIVER</span> <span class="o">=</span> IS31FL3733
</code></pre></div>
<p>You can use between 1 and 4 IS31FL3733 IC's. Do not specify <code>DRIVER_ADDR_&lt;N&gt;</code> defines for IC's that are not present on your keyboard. You can define the following items in <code>config.h</code>:</p>
<table>
<thead>
<tr>
<th>Variable</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ISSI_TIMEOUT</code></td>
<td>(Optional) How long to wait for i2c messages, in milliseconds</td>
<td>100</td>
</tr>
<tr>
<td><code>ISSI_PERSISTENCE</code></td>
<td>(Optional) Retry failed messages this many times</td>
<td>0</td>
</tr>
<tr>
<td><code>ISSI_PWM_FREQUENCY</code></td>
<td>(Optional) PWM Frequency Setting - IS31FL3733B only</td>
<td>0</td>
</tr>
<tr>
<td><code>ISSI_SWPULLUP</code></td>
<td>(Optional) Set the value of the SWx lines on-chip de-ghosting resistors</td>
<td>PUR_0R (Disabled)</td>
</tr>
<tr>
<td><code>ISSI_CSPULLUP</code></td>
<td>(Optional) Set the value of the CSx lines on-chip de-ghosting resistors</td>
<td>PUR_0R (Disabled)</td>
</tr>
<tr>
<td><code>DRIVER_COUNT</code></td>
<td>(Required) How many RGB driver IC's are present</td>
<td></td>
</tr>
<tr>
<td><code>DRIVER_LED_TOTAL</code></td>
<td>(Required) How many RGB lights are present across all drivers</td>
<td></td>
</tr>
<tr>
<td><code>DRIVER_ADDR_1</code></td>
<td>(Required) Address for the first RGB driver</td>
<td></td>
</tr>
<tr>
<td><code>DRIVER_ADDR_2</code></td>
<td>(Optional) Address for the second RGB driver</td>
<td></td>
</tr>
<tr>
<td><code>DRIVER_ADDR_3</code></td>
<td>(Optional) Address for the third RGB driver</td>
<td></td>
</tr>
<tr>
<td><code>DRIVER_ADDR_4</code></td>
<td>(Optional) Address for the fourth RGB driver</td>
<td></td>
</tr>
<tr>
<td><code>DRIVER_SYNC_1</code></td>
<td>(Optional) Sync configuration for the first RGB driver</td>
<td>0</td>
</tr>
<tr>
<td><code>DRIVER_SYNC_2</code></td>
<td>(Optional) Sync configuration for the second RGB driver</td>
<td>0</td>
</tr>
<tr>
<td><code>DRIVER_SYNC_3</code></td>
<td>(Optional) Sync configuration for the third RGB driver</td>
<td>0</td>
</tr>
<tr>
<td><code>DRIVER_SYNC_4</code></td>
<td>(Optional) Sync configuration for the fourth RGB driver</td>
<td>0</td>
</tr>
</tbody>
</table>
<p>The IS31FL3733 IC's have on-chip resistors that can be enabled to allow for de-ghosting of the RGB matrix. By default these resistors are not enabled (<code>ISSI_SWPULLUP</code>/<code>ISSI_CSPULLUP</code> are given the value of<code>PUR_0R</code>), the values that can be set to enable de-ghosting are as follows:</p>
<table>
<thead>
<tr>
<th><code>ISSI_SWPULLUP/ISSI_CSPULLUP</code></th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>PUR_0R</code></td>
<td>(default) Do not use the on-chip resistors/enable de-ghosting</td>
</tr>
<tr>
<td><code>PUR_05KR</code></td>
<td>The 0.5k Ohm resistor used during blanking period (t_NOL)</td>
</tr>
<tr>
<td><code>PUR_3KR</code></td>
<td>The 3k Ohm resistor used at all times</td>
</tr>
<tr>
<td><code>PUR_4KR</code></td>
<td>The 4k Ohm resistor used at all times</td>
</tr>
<tr>
<td><code>PUR_8KR</code></td>
<td>The 8k Ohm resistor used at all times</td>
</tr>
<tr>
<td><code>PUR_16KR</code></td>
<td>The 16k Ohm resistor used at all times</td>
</tr>
<tr>
<td><code>PUR_32KR</code></td>
<td>The 32k Ohm resistor used during blanking period (t_NOL)</td>
</tr>
</tbody>
</table>
<p>Here is an example using 2 drivers.</p>
<div class="highlight"><pre><span></span><code><span class="c1">// This is a 7-bit address, that gets left-shifted and bit 0</span>
<span class="c1">// set to 0 for write, 1 for read (as per I2C protocol)</span>
<span class="c1">// The address will vary depending on your wiring:</span>
<span class="c1">// 00 &lt;-&gt; GND</span>
<span class="c1">// 01 &lt;-&gt; SCL</span>
<span class="c1">// 10 &lt;-&gt; SDA</span>
<span class="c1">// 11 &lt;-&gt; VCC</span>
<span class="c1">// ADDR1 represents A1:A0 of the 7-bit address.</span>
<span class="c1">// ADDR2 represents A3:A2 of the 7-bit address.</span>
<span class="c1">// The result is: 0b101(ADDR2)(ADDR1)</span>
<span class="cp">#define DRIVER_ADDR_1 0b1010000</span>
<span class="cp">#define DRIVER_ADDR_2 0b1010011</span>

<span class="cp">#define DRIVER_COUNT 2</span>
<span class="cp">#define DRIVER_1_LED_TOTAL 58</span>
<span class="cp">#define DRIVER_2_LED_TOTAL 10</span>
<span class="cp">#define DRIVER_LED_TOTAL (DRIVER_1_LED_TOTAL + DRIVER_2_LED_TOTAL)</span>
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Note the parentheses, this is so when <code>DRIVER_LED_TOTAL</code> is used in code and expanded, the values are added together before any additional math is applied to them. As an example, <code>rand() % (DRIVER_1_LED_TOTAL + DRIVER_2_LED_TOTAL)</code> will give very different results than <code>rand() % DRIVER_1_LED_TOTAL + DRIVER_2_LED_TOTAL</code>.</p>
</div>
<p>Currently only 4 drivers are supported, but it would be trivial to support all 8 combinations.</p>
<p>Define these arrays listing all the LEDs in your <code>&lt;keyboard&gt;.c</code>:</p>
<div class="highlight"><pre><span></span><code><span class="k">const</span><span class="w"> </span><span class="n">is31_led</span><span class="w"> </span><span class="n">PROGMEM</span><span class="w"> </span><span class="n">g_is31_leds</span><span class="p">[</span><span class="n">DRIVER_LED_TOTAL</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="cm">/* Refer to IS31 manual for these locations</span>
<span class="cm"> *   driver</span>
<span class="cm"> *   |  R location</span>
<span class="cm"> *   |  |       G location</span>
<span class="cm"> *   |  |       |       B location</span>
<span class="cm"> *   |  |       |       | */</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">B_1</span><span class="p">,</span><span class="w">    </span><span class="n">A_1</span><span class="p">,</span><span class="w">    </span><span class="n">C_1</span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="p">....</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>Where <code>X_Y</code> is the location of the LED in the matrix defined by <a href="https://www.issi.com/WW/pdf/31FL3733.pdf">the datasheet</a> and the header file <code>drivers/led/issi/is31fl3733.h</code>. The <code>driver</code> is the index of the driver you defined in your <code>config.h</code> (<code>0</code>, <code>1</code>, <code>2</code>, or <code>3</code> for now).</p>
<hr />
<h3 id="is31fl3737">IS31FL3737<a class="headerlink" href="#is31fl3737" title="Permanent link">&para;</a></h3>
<p>There is basic support for addressable RGB matrix lighting with the I2C IS31FL3737 RGB controller. To enable it, add this to your <code>rules.mk</code>:</p>
<p><div class="highlight"><pre><span></span><code><span class="nv">RGB_MATRIX_ENABLE</span> <span class="o">=</span> yes
<span class="nv">RGB_MATRIX_DRIVER</span> <span class="o">=</span> IS31FL3737
</code></pre></div>
You can use between 1 and 2 IS31FL3737 IC's. Do not specify <code>DRIVER_ADDR_2</code> define for second IC if not present on your keyboard.</p>
<p>Configure the hardware via your <code>config.h</code>:</p>
<table>
<thead>
<tr>
<th>Variable</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ISSI_TIMEOUT</code></td>
<td>(Optional) How long to wait for i2c messages, in milliseconds</td>
<td>100</td>
</tr>
<tr>
<td><code>ISSI_PERSISTENCE</code></td>
<td>(Optional) Retry failed messages this many times</td>
<td>0</td>
</tr>
<tr>
<td><code>ISSI_SWPULLUP</code></td>
<td>(Optional) Set the value of the SWx lines on-chip de-ghosting resistors</td>
<td>PUR_0R (Disabled)</td>
</tr>
<tr>
<td><code>ISSI_CSPULLUP</code></td>
<td>(Optional) Set the value of the CSx lines on-chip de-ghosting resistors</td>
<td>PUR_0R (Disabled)</td>
</tr>
<tr>
<td><code>DRIVER_COUNT</code></td>
<td>(Required) How many RGB driver IC's are present</td>
<td></td>
</tr>
<tr>
<td><code>DRIVER_LED_TOTAL</code></td>
<td>(Required) How many RGB lights are present across all drivers</td>
<td></td>
</tr>
<tr>
<td><code>DRIVER_ADDR_1</code></td>
<td>(Required) Address for the first RGB driver</td>
<td></td>
</tr>
<tr>
<td><code>DRIVER_ADDR_2</code></td>
<td>(Optional) Address for the second RGB driver</td>
<td></td>
</tr>
</tbody>
</table>
<p>The IS31FL3737 IC's have on-chip resistors that can be enabled to allow for de-ghosting of the RGB matrix. By default these resistors are not enabled (<code>ISSI_SWPULLUP</code>/<code>ISSI_CSPULLUP</code> are given the value of<code>PUR_0R</code>), the values that can be set to enable de-ghosting are as follows:</p>
<table>
<thead>
<tr>
<th><code>ISSI_SWPULLUP/ISSI_CSPULLUP</code></th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>PUR_0R</code></td>
<td>(default) Do not use the on-chip resistors/enable de-ghosting</td>
</tr>
<tr>
<td><code>PUR_05KR</code></td>
<td>The 0.5k Ohm resistor used during blanking period (t_NOL)</td>
</tr>
<tr>
<td><code>PUR_1KR</code></td>
<td>The 1k Ohm resistor used during blanking period (t_NOL)</td>
</tr>
<tr>
<td><code>PUR_2KR</code></td>
<td>The 2k Ohm resistor used during blanking period (t_NOL)</td>
</tr>
<tr>
<td><code>PUR_4KR</code></td>
<td>The 4k Ohm resistor used during blanking period (t_NOL)</td>
</tr>
<tr>
<td><code>PUR_8KR</code></td>
<td>The 8k Ohm resistor during blanking period (t_NOL)</td>
</tr>
<tr>
<td><code>PUR_16KR</code></td>
<td>The 16k Ohm resistor during blanking period (t_NOL)</td>
</tr>
<tr>
<td><code>PUR_32KR</code></td>
<td>The 32k Ohm resistor used during blanking period (t_NOL)</td>
</tr>
</tbody>
</table>
<p>Here is an example using 2 drivers.</p>
<div class="highlight"><pre><span></span><code><span class="c1">// This is a 7-bit address, that gets left-shifted and bit 0</span>
<span class="c1">// set to 0 for write, 1 for read (as per I2C protocol)</span>
<span class="c1">// The address will vary depending on your wiring:</span>
<span class="c1">// 0000 &lt;-&gt; GND</span>
<span class="c1">// 0101 &lt;-&gt; SCL</span>
<span class="c1">// 1010 &lt;-&gt; SDA</span>
<span class="c1">// 1111 &lt;-&gt; VCC</span>
<span class="c1">// ADDR represents A3:A0 of the 7-bit address.</span>
<span class="c1">// The result is: 0b101(ADDR)</span>
<span class="cp">#define DRIVER_ADDR_1 0b1010000</span>
<span class="cp">#define DRIVER_ADDR_2 0b1010001</span>

<span class="cp">#define DRIVER_COUNT 2</span>
<span class="cp">#define DRIVER_1_LED_TOTAL 30</span>
<span class="cp">#define DRIVER_2_LED_TOTAL 36</span>
<span class="cp">#define DRIVER_LED_TOTAL (DRIVER_1_LED_TOTAL + DRIVER_2_LED_TOTAL)</span>
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Note the parentheses, this is so when <code>DRIVER_LED_TOTAL</code> is used in code and expanded, the values are added together before any additional math is applied to them. As an example, <code>rand() % (DRIVER_1_LED_TOTAL + DRIVER_2_LED_TOTAL)</code> will give very different results than <code>rand() % DRIVER_1_LED_TOTAL + DRIVER_2_LED_TOTAL</code>.</p>
</div>
<p>Currently only 2 drivers are supported, but it would be trivial to support all 4 combinations.</p>
<p>Define these arrays listing all the LEDs in your <code>&lt;keyboard&gt;.c</code>:</p>
<div class="highlight"><pre><span></span><code><span class="k">const</span><span class="w"> </span><span class="n">is31_led</span><span class="w"> </span><span class="n">PROGMEM</span><span class="w"> </span><span class="n">g_is31_leds</span><span class="p">[</span><span class="n">DRIVER_LED_TOTAL</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="cm">/* Refer to IS31 manual for these locations</span>
<span class="cm"> *   driver</span>
<span class="cm"> *   |  R location</span>
<span class="cm"> *   |  |       G location</span>
<span class="cm"> *   |  |       |       B location</span>
<span class="cm"> *   |  |       |       | */</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">B_1</span><span class="p">,</span><span class="w">    </span><span class="n">A_1</span><span class="p">,</span><span class="w">    </span><span class="n">C_1</span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="p">....</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>Where <code>X_Y</code> is the location of the LED in the matrix defined by <a href="https://www.issi.com/WW/pdf/31FL3737.pdf">the datasheet</a> and the header file <code>drivers/led/issi/is31fl3737.h</code>. The <code>driver</code> is the index of the driver you defined in your <code>config.h</code> (Only <code>0</code>, <code>1</code> for now).</p>
<hr />
<h3 id="ws2812">WS2812<a class="headerlink" href="#ws2812" title="Permanent link">&para;</a></h3>
<p>There is basic support for addressable RGB matrix lighting with a WS2811/WS2812{a,b,c} addressable LED strand. To enable it, add this to your <code>rules.mk</code>:</p>
<div class="highlight"><pre><span></span><code><span class="nv">RGB_MATRIX_ENABLE</span> <span class="o">=</span> yes
<span class="nv">RGB_MATRIX_DRIVER</span> <span class="o">=</span> WS2812
</code></pre></div>
<p>Configure the hardware via your <code>config.h</code>:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// The pin connected to the data pin of the LEDs</span>
<span class="cp">#define RGB_DI_PIN D7</span>
<span class="c1">// The number of LEDs connected</span>
<span class="cp">#define DRIVER_LED_TOTAL 70</span>
</code></pre></div>
<hr />
<h3 id="apa102">APA102<a class="headerlink" href="#apa102" title="Permanent link">&para;</a></h3>
<p>There is basic support for APA102 based addressable LED strands. To enable it, add this to your <code>rules.mk</code>:</p>
<div class="highlight"><pre><span></span><code><span class="nv">RGB_MATRIX_ENABLE</span> <span class="o">=</span> yes
<span class="nv">RGB_MATRIX_DRIVER</span> <span class="o">=</span> APA102
</code></pre></div>
<p>Configure the hardware via your <code>config.h</code>:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// The pin connected to the data pin of the LEDs</span>
<span class="cp">#define RGB_DI_PIN D7</span>
<span class="c1">// The pin connected to the clock pin of the LEDs</span>
<span class="cp">#define RGB_CI_PIN D6</span>
<span class="c1">// The number of LEDs connected</span>
<span class="cp">#define DRIVER_LED_TOTAL 70</span>
</code></pre></div>
<hr />
<h3 id="aw20216">AW20216<a class="headerlink" href="#aw20216" title="Permanent link">&para;</a></h3>
<p>There is basic support for addressable RGB matrix lighting with the SPI AW20216 RGB controller. To enable it, add this to your <code>rules.mk</code>:</p>
<div class="highlight"><pre><span></span><code><span class="nv">RGB_MATRIX_ENABLE</span> <span class="o">=</span> yes
<span class="nv">RGB_MATRIX_DRIVER</span> <span class="o">=</span> AW20216
</code></pre></div>
<p>You can use up to 2 AW20216 IC's. Do not specify <code>DRIVER_&lt;N&gt;_xxx</code> defines for IC's that are not present on your keyboard. You can define the following items in <code>config.h</code>:</p>
<table>
<thead>
<tr>
<th>Variable</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>DRIVER_1_CS</code></td>
<td>(Required) MCU pin connected to first RGB driver chip select line</td>
<td>B13</td>
</tr>
<tr>
<td><code>DRIVER_2_CS</code></td>
<td>(Optional) MCU pin connected to second RGB driver chip select line</td>
<td></td>
</tr>
<tr>
<td><code>DRIVER_1_EN</code></td>
<td>(Required) MCU pin connected to first RGB driver hardware enable line</td>
<td>C13</td>
</tr>
<tr>
<td><code>DRIVER_2_EN</code></td>
<td>(Optional) MCU pin connected to second RGB driver hardware enable line</td>
<td></td>
</tr>
<tr>
<td><code>DRIVER_1_LED_TOTAL</code></td>
<td>(Required) How many RGB lights are connected to first RGB driver</td>
<td></td>
</tr>
<tr>
<td><code>DRIVER_2_LED_TOTAL</code></td>
<td>(Optional) How many RGB lights are connected to second RGB driver</td>
<td></td>
</tr>
<tr>
<td><code>DRIVER_COUNT</code></td>
<td>(Required) How many RGB driver IC's are present</td>
<td></td>
</tr>
<tr>
<td><code>DRIVER_LED_TOTAL</code></td>
<td>(Required) How many RGB lights are present across all drivers</td>
<td></td>
</tr>
<tr>
<td><code>AW_SCALING_MAX</code></td>
<td>(Optional) LED current scaling value (0-255, higher values mean LED is brighter at full PWM)</td>
<td>150</td>
</tr>
<tr>
<td><code>AW_GLOBAL_CURRENT_MAX</code></td>
<td>(Optional) Driver global current limit (0-255, higher values means the driver may consume more power)</td>
<td>150</td>
</tr>
<tr>
<td><code>AW_SPI_DIVISOR</code></td>
<td>(Optional) Clock divisor for SPI communication (powers of 2, smaller numbers means faster communication, should not be less than 4)</td>
<td>4</td>
</tr>
</tbody>
</table>
<p>Here is an example using 2 drivers.</p>
<div class="highlight"><pre><span></span><code><span class="cp">#define DRIVER_1_CS B13</span>
<span class="cp">#define DRIVER_2_CS B14</span>
<span class="c1">// Hardware enable lines may be connected to the same pin</span>
<span class="cp">#define DRIVER_1_EN C13</span>
<span class="cp">#define DRIVER_2_EN C13</span>

<span class="cp">#define DRIVER_COUNT 2</span>
<span class="cp">#define DRIVER_1_LED_TOTAL 66</span>
<span class="cp">#define DRIVER_2_LED_TOTAL 32</span>
<span class="cp">#define DRIVER_LED_TOTAL (DRIVER_1_LED_TOTAL + DRIVER_2_LED_TOTAL)</span>
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Note the parentheses, this is so when <code>DRIVER_LED_TOTAL</code> is used in code and expanded, the values are added together before any additional math is applied to them. As an example, <code>rand() % (DRIVER_1_LED_TOTAL + DRIVER_2_LED_TOTAL)</code> will give very different results than <code>rand() % DRIVER_1_LED_TOTAL + DRIVER_2_LED_TOTAL</code>.</p>
</div>
<p>Define these arrays listing all the LEDs in your <code>&lt;keyboard&gt;.c</code>:</p>
<div class="highlight"><pre><span></span><code><span class="k">const</span><span class="w"> </span><span class="n">aw_led</span><span class="w"> </span><span class="n">PROGMEM</span><span class="w"> </span><span class="n">g_aw_leds</span><span class="p">[</span><span class="n">DRIVER_LED_TOTAL</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="cm">/* Each AW20216 channel is controlled by a register at some offset between 0x00</span>
<span class="cm"> * and 0xD7 inclusive.</span>
<span class="cm"> * See drivers/awinic/aw20216.h for the mapping between register offsets and</span>
<span class="cm"> * driver pin locations.</span>
<span class="cm"> *    driver</span>
<span class="cm"> *    |  R location</span>
<span class="cm"> *    |  |        G location</span>
<span class="cm"> *    |  |        |        B location</span>
<span class="cm"> *    |  |        |        | */</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">CS1_SW1</span><span class="p">,</span><span class="w"> </span><span class="n">CS2_SW1</span><span class="p">,</span><span class="w"> </span><span class="n">CS3_SW1</span><span class="w"> </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">CS4_SW1</span><span class="p">,</span><span class="w"> </span><span class="n">CS5_SW1</span><span class="p">,</span><span class="w"> </span><span class="n">CS6_SW1</span><span class="w"> </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">CS7_SW1</span><span class="p">,</span><span class="w"> </span><span class="n">CS8_SW1</span><span class="p">,</span><span class="w"> </span><span class="n">CS9_SW1</span><span class="w"> </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">CS10_SW1</span><span class="p">,</span><span class="w"> </span><span class="n">CS11_SW1</span><span class="p">,</span><span class="w"> </span><span class="n">CS12_SW1</span><span class="w"> </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">CS13_SW1</span><span class="p">,</span><span class="w"> </span><span class="n">CS14_SW1</span><span class="p">,</span><span class="w"> </span><span class="n">CS15_SW1</span><span class="w"> </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="p">...</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">CS1_SW1</span><span class="p">,</span><span class="w"> </span><span class="n">CS2_SW1</span><span class="p">,</span><span class="w"> </span><span class="n">CS3_SW1</span><span class="w"> </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">CS13_SW1</span><span class="p">,</span><span class="w"> </span><span class="n">CS14_SW1</span><span class="p">,</span><span class="w"> </span><span class="n">CS15_SW1</span><span class="w"> </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">CS16_SW1</span><span class="p">,</span><span class="w"> </span><span class="n">CS17_SW1</span><span class="p">,</span><span class="w"> </span><span class="n">CS18_SW1</span><span class="w"> </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">CS4_SW2</span><span class="p">,</span><span class="w"> </span><span class="n">CS5_SW2</span><span class="p">,</span><span class="w"> </span><span class="n">CS6_SW2</span><span class="w"> </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="p">...</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
</code></pre></div>
<hr />
<h2 id="common-configuration">Common Configuration<a class="headerlink" href="#common-configuration" title="Permanent link">&para;</a></h2>
<p>From this point forward the configuration is the same for all the drivers. The <code>led_config_t</code> struct provides a key electrical matrix to led index lookup table, what the physical position of each LED is on the board, and what type of key or usage the LED if the LED represents. Here is a brief example:</p>
<div class="highlight"><pre><span></span><code><span class="n">led_config_t</span><span class="w"> </span><span class="n">g_led_config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="c1">// Key Matrix to LED Index</span>
<span class="w">  </span><span class="p">{</span><span class="w">   </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="n">NO_LED</span><span class="p">,</span><span class="w"> </span><span class="n">NO_LED</span><span class="p">,</span><span class="w">   </span><span class="mi">0</span><span class="w"> </span><span class="p">},</span><span class="w"></span>
<span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="n">NO_LED</span><span class="p">,</span><span class="w"> </span><span class="n">NO_LED</span><span class="p">,</span><span class="w"> </span><span class="n">NO_LED</span><span class="p">,</span><span class="w"> </span><span class="n">NO_LED</span><span class="w"> </span><span class="p">},</span><span class="w"></span>
<span class="w">  </span><span class="p">{</span><span class="w">   </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="n">NO_LED</span><span class="p">,</span><span class="w"> </span><span class="n">NO_LED</span><span class="p">,</span><span class="w">   </span><span class="mi">1</span><span class="w"> </span><span class="p">},</span><span class="w"></span>
<span class="w">  </span><span class="p">{</span><span class="w">   </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="n">NO_LED</span><span class="p">,</span><span class="w"> </span><span class="n">NO_LED</span><span class="p">,</span><span class="w">   </span><span class="mi">2</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="c1">// LED Index to Physical Position</span>
<span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="mi">188</span><span class="p">,</span><span class="w">  </span><span class="mi">16</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mi">187</span><span class="p">,</span><span class="w">  </span><span class="mi">48</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mi">149</span><span class="p">,</span><span class="w">  </span><span class="mi">64</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mi">112</span><span class="p">,</span><span class="w">  </span><span class="mi">64</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">  </span><span class="mi">37</span><span class="p">,</span><span class="w">  </span><span class="mi">48</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">  </span><span class="mi">38</span><span class="p">,</span><span class="w">  </span><span class="mi">16</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="c1">// LED Index to Flag</span>
<span class="w">  </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"></span>
<span class="p">}</span><span class="w"> </span><span class="p">};</span><span class="w"></span>
</code></pre></div>
<p>The first part, <code>// Key Matrix to LED Index</code>, tells the system what key this LED represents by using the key's electrical matrix row &amp; col. The second part, <code>// LED Index to Physical Position</code> represents the LED's physical <code>{ x, y }</code> position on the keyboard. The default expected range of values for <code>{ x, y }</code> is the inclusive range <code>{ 0..224, 0..64 }</code>. This default expected range is due to effects that calculate the center of the keyboard for their animations. The easiest way to calculate these positions is imagine your keyboard is a grid, and the top left of the keyboard represents <code>{ x, y }</code> coordinate <code>{ 0, 0 }</code> and the bottom right of your keyboard represents <code>{ 224, 64 }</code>. Using this as a basis, you can use the following formula to calculate the physical position:</p>
<div class="highlight"><pre><span></span><code><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">224</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="n">NUMBER_OF_COLS</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">COL_POSITION</span><span class="w"></span>
<span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w">  </span><span class="mi">64</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="n">NUMBER_OF_ROWS</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">ROW_POSITION</span><span class="w"></span>
</code></pre></div>
<p>Where NUMBER_OF_COLS, NUMBER_OF_ROWS, COL_POSITION, &amp; ROW_POSITION are all based on the physical layout of your keyboard, not the electrical layout.</p>
<p>As mentioned earlier, the center of the keyboard by default is expected to be <code>{ 112, 32 }</code>, but this can be changed if you want to more accurately calculate the LED's physical <code>{ x, y }</code> positions. Keyboard designers can implement <code>#define RGB_MATRIX_CENTER { 112, 32 }</code> in their config.h file with the new center point of the keyboard, or where they want it to be allowing more possibilities for the <code>{ x, y }</code> values. Do note that the maximum value for x or y is 255, and the recommended maximum is 224 as this gives animations runoff room before they reset.</p>
<p><code>// LED Index to Flag</code> is a bitmask, whether or not a certain LEDs is of a certain type. It is recommended that LEDs are set to only 1 type.</p>
<h2 id="flags">Flags<a class="headerlink" href="#flags" title="Permanent link">&para;</a></h2>
<table>
<thead>
<tr>
<th>Define</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>HAS_FLAGS(bits, flags)</code></td>
<td><em>n/a</em></td>
<td>Evaluates to <code>true</code> if <code>bits</code> has all <code>flags</code> set</td>
</tr>
<tr>
<td><code>HAS_ANY_FLAGS(bits, flags)</code></td>
<td><em>n/a</em></td>
<td>Evaluates to <code>true</code> if <code>bits</code> has any <code>flags</code> set</td>
</tr>
<tr>
<td><code>LED_FLAG_NONE</code></td>
<td><code>0x00</code></td>
<td>If this LED has no flags</td>
</tr>
<tr>
<td><code>LED_FLAG_ALL</code></td>
<td><code>0xFF</code></td>
<td>If this LED has all flags</td>
</tr>
<tr>
<td><code>LED_FLAG_MODIFIER</code></td>
<td><code>0x01</code></td>
<td>If the LED is on a modifier key</td>
</tr>
<tr>
<td><code>LED_FLAG_UNDERGLOW</code></td>
<td><code>0x02</code></td>
<td>If the LED is for underglow</td>
</tr>
<tr>
<td><code>LED_FLAG_KEYLIGHT</code></td>
<td><code>0x04</code></td>
<td>If the LED is for key backlight</td>
</tr>
<tr>
<td><code>LED_FLAG_INDICATOR</code></td>
<td><code>0x08</code></td>
<td>If the LED is for keyboard state indication</td>
</tr>
</tbody>
</table>
<h2 id="keycodes">Keycodes<a class="headerlink" href="#keycodes" title="Permanent link">&para;</a></h2>
<p>All RGB keycodes are currently shared with the RGBLIGHT system:</p>
<table>
<thead>
<tr>
<th>Key</th>
<th>Aliases</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>RGB_TOG</code></td>
<td></td>
<td>Toggle RGB lighting on or off</td>
</tr>
<tr>
<td><code>RGB_MODE_FORWARD</code></td>
<td><code>RGB_MOD</code></td>
<td>Cycle through modes, reverse direction when Shift is held</td>
</tr>
<tr>
<td><code>RGB_MODE_REVERSE</code></td>
<td><code>RGB_RMOD</code></td>
<td>Cycle through modes in reverse, forward direction when Shift is held</td>
</tr>
<tr>
<td><code>RGB_HUI</code></td>
<td></td>
<td>Increase hue, decrease hue when Shift is held</td>
</tr>
<tr>
<td><code>RGB_HUD</code></td>
<td></td>
<td>Decrease hue, increase hue when Shift is held</td>
</tr>
<tr>
<td><code>RGB_SAI</code></td>
<td></td>
<td>Increase saturation, decrease saturation when Shift is held</td>
</tr>
<tr>
<td><code>RGB_SAD</code></td>
<td></td>
<td>Decrease saturation, increase saturation when Shift is held</td>
</tr>
<tr>
<td><code>RGB_VAI</code></td>
<td></td>
<td>Increase value (brightness), decrease value when Shift is held</td>
</tr>
<tr>
<td><code>RGB_VAD</code></td>
<td></td>
<td>Decrease value (brightness), increase value when Shift is held</td>
</tr>
<tr>
<td><code>RGB_SPI</code></td>
<td></td>
<td>Increase effect speed (does not support eeprom yet), decrease speed when Shift is held</td>
</tr>
<tr>
<td><code>RGB_SPD</code></td>
<td></td>
<td>Decrease effect speed (does not support eeprom yet), increase speed when Shift is held</td>
</tr>
<tr>
<td><code>RGB_MODE_PLAIN</code></td>
<td><code>RGB_M_P</code></td>
<td>Static (no animation) mode</td>
</tr>
<tr>
<td><code>RGB_MODE_BREATHE</code></td>
<td><code>RGB_M_B</code></td>
<td>Breathing animation mode</td>
</tr>
<tr>
<td><code>RGB_MODE_RAINBOW</code></td>
<td><code>RGB_M_R</code></td>
<td>Full gradient scrolling left to right (uses the <code>RGB_MATRIX_CYCLE_LEFT_RIGHT</code> mode)</td>
</tr>
<tr>
<td><code>RGB_MODE_SWIRL</code></td>
<td><code>RGB_M_SW</code></td>
<td>Full gradient spinning pinwheel around center of keyboard (uses <code>RGB_MATRIX_CYCLE_PINWHEEL</code> mode)</td>
</tr>
</tbody>
</table>
<ul>
<li><code>RGB_MODE_*</code> keycodes will generally work, but not all of the modes are currently mapped to the correct effects for the RGB Matrix system.</li>
</ul>
<p><code>RGB_MODE_PLAIN</code>, <code>RGB_MODE_BREATHE</code>, <code>RGB_MODE_RAINBOW</code>, and <code>RGB_MODE_SWIRL</code> are the only ones that are mapped properly. The rest don't have a direct equivalent, and are not mapped.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>By default, if you have both the <a href="../feature_rgblight/">RGB Light</a> and the RGB Matrix feature enabled, these keycodes will work for both features, at the same time. You can disable the keycode functionality by defining the <code>*_DISABLE_KEYCODES</code> option for the specific feature.</p>
</div>
<h2 id="rgb-matrix-effects">RGB Matrix Effects<a class="headerlink" href="#rgb-matrix-effects" title="Permanent link">&para;</a></h2>
<p>All effects have been configured to support current configuration values (Hue, Saturation, Value, &amp; Speed) unless otherwise noted below. These are the effects that are currently available:</p>
<div class="highlight"><pre><span></span><code><span class="k">enum</span><span class="w"> </span><span class="n">rgb_matrix_effects</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">RGB_MATRIX_NONE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">RGB_MATRIX_SOLID_COLOR</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">     </span><span class="c1">// Static single hue, no speed support</span>
<span class="w">    </span><span class="n">RGB_MATRIX_ALPHAS_MODS</span><span class="p">,</span><span class="w">         </span><span class="c1">// Static dual hue, speed is hue for secondary hue</span>
<span class="w">    </span><span class="n">RGB_MATRIX_GRADIENT_UP_DOWN</span><span class="p">,</span><span class="w">    </span><span class="c1">// Static gradient top to bottom, speed controls how much gradient changes</span>
<span class="w">    </span><span class="n">RGB_MATRIX_GRADIENT_LEFT_RIGHT</span><span class="p">,</span><span class="w">    </span><span class="c1">// Static gradient left to right, speed controls how much gradient changes</span>
<span class="w">    </span><span class="n">RGB_MATRIX_BREATHING</span><span class="p">,</span><span class="w">           </span><span class="c1">// Single hue brightness cycling animation</span>
<span class="w">    </span><span class="n">RGB_MATRIX_BAND_SAT</span><span class="p">,</span><span class="w">        </span><span class="c1">// Single hue band fading saturation scrolling left to right</span>
<span class="w">    </span><span class="n">RGB_MATRIX_BAND_VAL</span><span class="p">,</span><span class="w">        </span><span class="c1">// Single hue band fading brightness scrolling left to right</span>
<span class="w">    </span><span class="n">RGB_MATRIX_BAND_PINWHEEL_SAT</span><span class="p">,</span><span class="w">   </span><span class="c1">// Single hue 3 blade spinning pinwheel fades saturation</span>
<span class="w">    </span><span class="n">RGB_MATRIX_BAND_PINWHEEL_VAL</span><span class="p">,</span><span class="w">   </span><span class="c1">// Single hue 3 blade spinning pinwheel fades brightness</span>
<span class="w">    </span><span class="n">RGB_MATRIX_BAND_SPIRAL_SAT</span><span class="p">,</span><span class="w">     </span><span class="c1">// Single hue spinning spiral fades saturation</span>
<span class="w">    </span><span class="n">RGB_MATRIX_BAND_SPIRAL_VAL</span><span class="p">,</span><span class="w">     </span><span class="c1">// Single hue spinning spiral fades brightness</span>
<span class="w">    </span><span class="n">RGB_MATRIX_CYCLE_ALL</span><span class="p">,</span><span class="w">           </span><span class="c1">// Full keyboard solid hue cycling through full gradient</span>
<span class="w">    </span><span class="n">RGB_MATRIX_CYCLE_LEFT_RIGHT</span><span class="p">,</span><span class="w">    </span><span class="c1">// Full gradient scrolling left to right</span>
<span class="w">    </span><span class="n">RGB_MATRIX_CYCLE_UP_DOWN</span><span class="p">,</span><span class="w">       </span><span class="c1">// Full gradient scrolling top to bottom</span>
<span class="w">    </span><span class="n">RGB_MATRIX_CYCLE_OUT_IN</span><span class="p">,</span><span class="w">        </span><span class="c1">// Full gradient scrolling out to in</span>
<span class="w">    </span><span class="n">RGB_MATRIX_CYCLE_OUT_IN_DUAL</span><span class="p">,</span><span class="w">   </span><span class="c1">// Full dual gradients scrolling out to in</span>
<span class="w">    </span><span class="n">RGB_MATRIX_RAINBOW_MOVING_CHEVRON</span><span class="p">,</span><span class="w">  </span><span class="c1">// Full gradent Chevron shapped scrolling left to right</span>
<span class="w">    </span><span class="n">RGB_MATRIX_CYCLE_PINWHEEL</span><span class="p">,</span><span class="w">      </span><span class="c1">// Full gradient spinning pinwheel around center of keyboard</span>
<span class="w">    </span><span class="n">RGB_MATRIX_CYCLE_SPIRAL</span><span class="p">,</span><span class="w">        </span><span class="c1">// Full gradient spinning spiral around center of keyboard</span>
<span class="w">    </span><span class="n">RGB_MATRIX_DUAL_BEACON</span><span class="p">,</span><span class="w">         </span><span class="c1">// Full gradient spinning around center of keyboard</span>
<span class="w">    </span><span class="n">RGB_MATRIX_RAINBOW_BEACON</span><span class="p">,</span><span class="w">      </span><span class="c1">// Full tighter gradient spinning around center of keyboard</span>
<span class="w">    </span><span class="n">RGB_MATRIX_RAINBOW_PINWHEELS</span><span class="p">,</span><span class="w">   </span><span class="c1">// Full dual gradients spinning two halfs of keyboard</span>
<span class="w">    </span><span class="n">RGB_MATRIX_RAINDROPS</span><span class="p">,</span><span class="w">           </span><span class="c1">// Randomly changes a single key&#39;s hue</span>
<span class="w">    </span><span class="n">RGB_MATRIX_JELLYBEAN_RAINDROPS</span><span class="p">,</span><span class="w"> </span><span class="c1">// Randomly changes a single key&#39;s hue and saturation</span>
<span class="w">    </span><span class="n">RGB_MATRIX_HUE_BREATHING</span><span class="p">,</span><span class="w">       </span><span class="c1">// Hue shifts up a slight ammount at the same time, then shifts back</span>
<span class="w">    </span><span class="n">RGB_MATRIX_HUE_PENDULUM</span><span class="p">,</span><span class="w">        </span><span class="c1">// Hue shifts up a slight ammount in a wave to the right, then back to the left</span>
<span class="w">    </span><span class="n">RGB_MATRIX_HUE_WAVE</span><span class="p">,</span><span class="w">            </span><span class="c1">// Hue shifts up a slight ammount and then back down in a wave to the right</span>
<span class="w">    </span><span class="n">RGB_MATRIX_PIXEL_FRACTAL</span><span class="p">,</span><span class="w">       </span><span class="c1">// Single hue fractal filled keys pulsing horizontally out to edges</span>
<span class="w">    </span><span class="n">RGB_MATRIX_PIXEL_RAIN</span><span class="p">,</span><span class="w">          </span><span class="c1">// Randomly light keys with random hues</span>
<span class="cp">#if define(RGB_MATRIX_FRAMEBUFFER_EFFECTS)</span>
<span class="w">    </span><span class="n">RGB_MATRIX_TYPING_HEATMAP</span><span class="p">,</span><span class="w">      </span><span class="c1">// How hot is your WPM!</span>
<span class="w">    </span><span class="n">RGB_MATRIX_DIGITAL_RAIN</span><span class="p">,</span><span class="w">        </span><span class="c1">// That famous computer simulation</span>
<span class="cp">#endif</span>
<span class="cp">#if defined(RGB_MATRIX_KEYPRESSES) || defined(RGB_MATRIX_KEYRELEASES)</span>
<span class="w">    </span><span class="n">RGB_MATRIX_SOLID_REACTIVE_SIMPLE</span><span class="p">,</span><span class="w">   </span><span class="c1">// Pulses keys hit to hue &amp; value then fades value out</span>
<span class="w">    </span><span class="n">RGB_MATRIX_SOLID_REACTIVE</span><span class="p">,</span><span class="w">      </span><span class="c1">// Static single hue, pulses keys hit to shifted hue then fades to current hue</span>
<span class="w">    </span><span class="n">RGB_MATRIX_SOLID_REACTIVE_WIDE</span><span class="w">       </span><span class="c1">// Hue &amp; value pulse near a single key hit then fades value out</span>
<span class="w">    </span><span class="n">RGB_MATRIX_SOLID_REACTIVE_MULTIWIDE</span><span class="w">  </span><span class="c1">// Hue &amp; value pulse near multiple key hits then fades value out</span>
<span class="w">    </span><span class="n">RGB_MATRIX_SOLID_REACTIVE_CROSS</span><span class="w">      </span><span class="c1">// Hue &amp; value pulse the same column and row of a single key hit then fades value out</span>
<span class="w">    </span><span class="n">RGB_MATRIX_SOLID_REACTIVE_MULTICROSS</span><span class="w"> </span><span class="c1">// Hue &amp; value pulse the same column and row of multiple key hits then fades value out</span>
<span class="w">    </span><span class="n">RGB_MATRIX_SOLID_REACTIVE_NEXUS</span><span class="w">      </span><span class="c1">// Hue &amp; value pulse away on the same column and row of a single key hit then fades value out</span>
<span class="w">    </span><span class="n">RGB_MATRIX_SOLID_REACTIVE_MULTINEXUS</span><span class="w"> </span><span class="c1">// Hue &amp; value pulse away on the same column and row of multiple key hits then fades value out</span>
<span class="w">    </span><span class="n">RGB_MATRIX_SPLASH</span><span class="p">,</span><span class="w">              </span><span class="c1">// Full gradient &amp; value pulse away from a single key hit then fades value out</span>
<span class="w">    </span><span class="n">RGB_MATRIX_MULTISPLASH</span><span class="p">,</span><span class="w">         </span><span class="c1">// Full gradient &amp; value pulse away from multiple key hits then fades value out</span>
<span class="w">    </span><span class="n">RGB_MATRIX_SOLID_SPLASH</span><span class="p">,</span><span class="w">        </span><span class="c1">// Hue &amp; value pulse away from a single key hit then fades value out</span>
<span class="w">    </span><span class="n">RGB_MATRIX_SOLID_MULTISPLASH</span><span class="p">,</span><span class="w">   </span><span class="c1">// Hue &amp; value pulse away from multiple key hits then fades value out</span>
<span class="cp">#endif</span>
<span class="w">    </span><span class="n">RGB_MATRIX_EFFECT_MAX</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
</code></pre></div>
<p>You can enable a single effect by defining <code>ENABLE_[EFFECT_NAME]</code> in your <code>config.h</code>:</p>
<table>
<thead>
<tr>
<th>Define</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>#define ENABLE_RGB_MATRIX_ALPHAS_MODS</code></td>
<td>Enables <code>RGB_MATRIX_ALPHAS_MODS</code></td>
</tr>
<tr>
<td><code>#define ENABLE_RGB_MATRIX_GRADIENT_UP_DOWN</code></td>
<td>Enables <code>RGB_MATRIX_GRADIENT_UP_DOWN</code></td>
</tr>
<tr>
<td><code>#define ENABLE_RGB_MATRIX_GRADIENT_LEFT_RIGHT</code></td>
<td>Enables <code>RGB_MATRIX_GRADIENT_LEFT_RIGHT</code></td>
</tr>
<tr>
<td><code>#define ENABLE_RGB_MATRIX_BREATHING</code></td>
<td>Enables <code>RGB_MATRIX_BREATHING</code></td>
</tr>
<tr>
<td><code>#define ENABLE_RGB_MATRIX_BAND_SAT</code></td>
<td>Enables <code>RGB_MATRIX_BAND_SAT</code></td>
</tr>
<tr>
<td><code>#define ENABLE_RGB_MATRIX_BAND_VAL</code></td>
<td>Enables <code>RGB_MATRIX_BAND_VAL</code></td>
</tr>
<tr>
<td><code>#define ENABLE_RGB_MATRIX_BAND_PINWHEEL_SAT</code></td>
<td>Enables <code>RGB_MATRIX_BAND_PINWHEEL_SAT</code></td>
</tr>
<tr>
<td><code>#define ENABLE_RGB_MATRIX_BAND_PINWHEEL_VAL</code></td>
<td>Enables <code>RGB_MATRIX_BAND_PINWHEEL_VAL</code></td>
</tr>
<tr>
<td><code>#define ENABLE_RGB_MATRIX_BAND_SPIRAL_SAT</code></td>
<td>Enables <code>RGB_MATRIX_BAND_SPIRAL_SAT</code></td>
</tr>
<tr>
<td><code>#define ENABLE_RGB_MATRIX_BAND_SPIRAL_VAL</code></td>
<td>Enables <code>RGB_MATRIX_BAND_SPIRAL_VAL</code></td>
</tr>
<tr>
<td><code>#define ENABLE_RGB_MATRIX_CYCLE_ALL</code></td>
<td>Enables <code>RGB_MATRIX_CYCLE_ALL</code></td>
</tr>
<tr>
<td><code>#define ENABLE_RGB_MATRIX_CYCLE_LEFT_RIGHT</code></td>
<td>Enables <code>RGB_MATRIX_CYCLE_LEFT_RIGHT</code></td>
</tr>
<tr>
<td><code>#define ENABLE_RGB_MATRIX_CYCLE_UP_DOWN</code></td>
<td>Enables <code>RGB_MATRIX_CYCLE_UP_DOWN</code></td>
</tr>
<tr>
<td><code>#define ENABLE_RGB_MATRIX_RAINBOW_MOVING_CHEVRON</code></td>
<td>Enables <code>RGB_MATRIX_RAINBOW_MOVING_CHEVRON</code></td>
</tr>
<tr>
<td><code>#define ENABLE_RGB_MATRIX_CYCLE_OUT_IN</code></td>
<td>Enables <code>RGB_MATRIX_CYCLE_OUT_IN</code></td>
</tr>
<tr>
<td><code>#define ENABLE_RGB_MATRIX_CYCLE_OUT_IN_DUAL</code></td>
<td>Enables <code>RGB_MATRIX_CYCLE_OUT_IN_DUAL</code></td>
</tr>
<tr>
<td><code>#define ENABLE_RGB_MATRIX_CYCLE_PINWHEEL</code></td>
<td>Enables <code>RGB_MATRIX_CYCLE_PINWHEEL</code></td>
</tr>
<tr>
<td><code>#define ENABLE_RGB_MATRIX_CYCLE_SPIRAL</code></td>
<td>Enables <code>RGB_MATRIX_CYCLE_SPIRAL</code></td>
</tr>
<tr>
<td><code>#define ENABLE_RGB_MATRIX_DUAL_BEACON</code></td>
<td>Enables <code>RGB_MATRIX_DUAL_BEACON</code></td>
</tr>
<tr>
<td><code>#define ENABLE_RGB_MATRIX_RAINBOW_BEACON</code></td>
<td>Enables <code>RGB_MATRIX_RAINBOW_BEACON</code></td>
</tr>
<tr>
<td><code>#define ENABLE_RGB_MATRIX_RAINBOW_PINWHEELS</code></td>
<td>Enables <code>RGB_MATRIX_RAINBOW_PINWHEELS</code></td>
</tr>
<tr>
<td><code>#define ENABLE_RGB_MATRIX_RAINDROPS</code></td>
<td>Enables <code>RGB_MATRIX_RAINDROPS</code></td>
</tr>
<tr>
<td><code>#define ENABLE_RGB_MATRIX_JELLYBEAN_RAINDROPS</code></td>
<td>Enables <code>RGB_MATRIX_JELLYBEAN_RAINDROPS</code></td>
</tr>
<tr>
<td><code>#define ENABLE_RGB_MATRIX_HUE_BREATHING</code></td>
<td>Enables <code>RGB_MATRIX_HUE_BREATHING</code></td>
</tr>
<tr>
<td><code>#define ENABLE_RGB_MATRIX_HUE_PENDULUM</code></td>
<td>Enables <code>RGB_MATRIX_HUE_PENDULUM</code></td>
</tr>
<tr>
<td><code>#define ENABLE_RGB_MATRIX_HUE_WAVE</code></td>
<td>Enables <code>RGB_MATRIX_HUE_WAVE</code></td>
</tr>
<tr>
<td><code>#define ENABLE_RGB_MATRIX_PIXEL_FRACTAL</code></td>
<td>Enables <code>RGB_MATRIX_PIXEL_FRACTAL</code></td>
</tr>
<tr>
<td><code>#define ENABLE_RGB_MATRIX_PIXEL_RAIN</code></td>
<td>Enables <code>RGB_MATRIX_PIXEL_RAIN</code></td>
</tr>
</tbody>
</table>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>These modes don't require any additional defines.</p>
</div>
<table>
<thead>
<tr>
<th>Framebuffer Defines</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>#define ENABLE_RGB_MATRIX_TYPING_HEATMAP</code></td>
<td>Enables <code>RGB_MATRIX_TYPING_HEATMAP</code></td>
</tr>
<tr>
<td><code>#define ENABLE_RGB_MATRIX_DIGITAL_RAIN</code></td>
<td>Enables <code>RGB_MATRIX_DIGITAL_RAIN</code></td>
</tr>
</tbody>
</table>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>These modes also require the <code>RGB_MATRIX_FRAMEBUFFER_EFFECTS</code> define to be available.</p>
</div>
<table>
<thead>
<tr>
<th>Reactive Defines</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>#define ENABLE_RGB_MATRIX_SOLID_REACTIVE_SIMPLE</code></td>
<td>Enables <code>RGB_MATRIX_SOLID_REACTIVE_SIMPLE</code></td>
</tr>
<tr>
<td><code>#define ENABLE_RGB_MATRIX_SOLID_REACTIVE</code></td>
<td>Enables <code>RGB_MATRIX_SOLID_REACTIVE</code></td>
</tr>
<tr>
<td><code>#define ENABLE_RGB_MATRIX_SOLID_REACTIVE_WIDE</code></td>
<td>Enables <code>RGB_MATRIX_SOLID_REACTIVE_WIDE</code></td>
</tr>
<tr>
<td><code>#define ENABLE_RGB_MATRIX_SOLID_REACTIVE_MULTIWIDE</code></td>
<td>Enables <code>RGB_MATRIX_SOLID_REACTIVE_MULTIWIDE</code></td>
</tr>
<tr>
<td><code>#define ENABLE_RGB_MATRIX_SOLID_REACTIVE_CROSS</code></td>
<td>Enables <code>RGB_MATRIX_SOLID_REACTIVE_CROSS</code></td>
</tr>
<tr>
<td><code>#define ENABLE_RGB_MATRIX_SOLID_REACTIVE_MULTICROSS</code></td>
<td>Enables <code>RGB_MATRIX_SOLID_REACTIVE_MULTICROSS</code></td>
</tr>
<tr>
<td><code>#define ENABLE_RGB_MATRIX_SOLID_REACTIVE_NEXUS</code></td>
<td>Enables <code>RGB_MATRIX_SOLID_REACTIVE_NEXUS</code></td>
</tr>
<tr>
<td><code>#define ENABLE_RGB_MATRIX_SOLID_REACTIVE_MULTINEXUS</code></td>
<td>Enables <code>RGB_MATRIX_SOLID_REACTIVE_MULTINEXUS</code></td>
</tr>
<tr>
<td><code>#define ENABLE_RGB_MATRIX_SPLASH</code></td>
<td>Enables <code>RGB_MATRIX_SPLASH</code></td>
</tr>
<tr>
<td><code>#define ENABLE_RGB_MATRIX_MULTISPLASH</code></td>
<td>Enables <code>RGB_MATRIX_MULTISPLASH</code></td>
</tr>
<tr>
<td><code>#define ENABLE_RGB_MATRIX_SOLID_SPLASH</code></td>
<td>Enables <code>RGB_MATRIX_SOLID_SPLASH</code></td>
</tr>
<tr>
<td><code>#define ENABLE_RGB_MATRIX_SOLID_MULTISPLASH</code></td>
<td>Enables <code>RGB_MATRIX_SOLID_MULTISPLASH</code></td>
</tr>
</tbody>
</table>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>These modes also require the <code>RGB_MATRIX_KEYPRESSES</code> or <code>RGB_MATRIX_KEYRELEASES</code> define to be available.</p>
</div>
<h3 id="rgb-matrix-effect-typing-heatmap">RGB Matrix Effect Typing Heatmap<a class="headerlink" href="#rgb-matrix-effect-typing-heatmap" title="Permanent link">&para;</a></h3>
<p>This effect will color the RGB matrix according to a heatmap of recently pressed
keys. Whenever a key is pressed its "temperature" increases as well as that of
its neighboring keys. The temperature of each key is then decreased
automatically every 25 milliseconds by default.</p>
<p>In order to change the delay of temperature decrease define
<code>RGB_MATRIX_TYPING_HEATMAP_DECREASE_DELAY_MS</code>:</p>
<div class="highlight"><pre><span></span><code><span class="cp">#define RGB_MATRIX_TYPING_HEATMAP_DECREASE_DELAY_MS 50</span>
</code></pre></div>
<h2 id="custom-rgb-matrix-effects">Custom RGB Matrix Effects<a class="headerlink" href="#custom-rgb-matrix-effects" title="Permanent link">&para;</a></h2>
<p>By setting <code>RGB_MATRIX_CUSTOM_USER = yes</code> in <code>rules.mk</code>, new effects can be defined directly from your keymap or userspace, without having to edit any QMK core files.</p>
<p>To declare new effects, create a <code>rgb_matrix_user.inc</code> file in the user keymap directory or userspace folder.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Hardware maintainers who want to limit custom effects to a specific keyboard can create a <code>rgb_matrix_kb.inc</code> file in the root of the keyboard directory, and add <code>RGB_MATRIX_CUSTOM_KB = yes</code> to the keyboard level <code>rules.mk</code>.</p>
</div>
<p>To use custom effects in your code, simply prepend <code>RGB_MATRIX_CUSTOM_</code> to the effect name specified in <code>RGB_MATRIX_EFFECT()</code>. For example, an effect declared as <code>RGB_MATRIX_EFFECT(my_cool_effect)</code> would be referenced with:</p>
<div class="highlight"><pre><span></span><code><span class="n">rgb_matrix_mode</span><span class="p">(</span><span class="n">RGB_MATRIX_CUSTOM_my_cool_effect</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1">// !!! DO NOT ADD #pragma once !!! //</span>

<span class="c1">// Step 1.</span>
<span class="c1">// Declare custom effects using the RGB_MATRIX_EFFECT macro</span>
<span class="c1">// (note the lack of semicolon after the macro!)</span>
<span class="n">RGB_MATRIX_EFFECT</span><span class="p">(</span><span class="n">my_cool_effect</span><span class="p">)</span><span class="w"></span>
<span class="n">RGB_MATRIX_EFFECT</span><span class="p">(</span><span class="n">my_cool_effect2</span><span class="p">)</span><span class="w"></span>

<span class="c1">// Step 2.</span>
<span class="c1">// Define effects inside the `RGB_MATRIX_CUSTOM_EFFECT_IMPLS` ifdef block</span>
<span class="cp">#ifdef RGB_MATRIX_CUSTOM_EFFECT_IMPLS</span>

<span class="c1">// e.g: A simple effect, self-contained within a single method</span>
<span class="k">static</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="n">my_cool_effect</span><span class="p">(</span><span class="n">effect_params_t</span><span class="o">*</span><span class="w"> </span><span class="n">params</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="n">RGB_MATRIX_USE_LIMITS</span><span class="p">(</span><span class="n">led_min</span><span class="p">,</span><span class="w"> </span><span class="n">led_max</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">led_min</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">led_max</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">rgb_matrix_set_color</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="mh">0xff</span><span class="p">,</span><span class="w"> </span><span class="mh">0xff</span><span class="p">,</span><span class="w"> </span><span class="mh">0x00</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">rgb_matrix_check_finished_leds</span><span class="p">(</span><span class="n">led_max</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="c1">// e.g: A more complex effect, relying on external methods and state, with</span>
<span class="c1">// dedicated init and run methods</span>
<span class="k">static</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">some_global_state</span><span class="p">;</span><span class="w"></span>
<span class="k">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">my_cool_effect2_complex_init</span><span class="p">(</span><span class="n">effect_params_t</span><span class="o">*</span><span class="w"> </span><span class="n">params</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="n">some_global_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="k">static</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="nf">my_cool_effect2_complex_run</span><span class="p">(</span><span class="n">effect_params_t</span><span class="o">*</span><span class="w"> </span><span class="n">params</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="n">RGB_MATRIX_USE_LIMITS</span><span class="p">(</span><span class="n">led_min</span><span class="p">,</span><span class="w"> </span><span class="n">led_max</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">led_min</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">led_max</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">rgb_matrix_set_color</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="mh">0xff</span><span class="p">,</span><span class="w"> </span><span class="n">some_global_state</span><span class="o">++</span><span class="p">,</span><span class="w"> </span><span class="mh">0xff</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">rgb_matrix_check_finished_leds</span><span class="p">(</span><span class="n">led_max</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="k">static</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="nf">my_cool_effect2</span><span class="p">(</span><span class="n">effect_params_t</span><span class="o">*</span><span class="w"> </span><span class="n">params</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">params</span><span class="o">-&gt;</span><span class="n">init</span><span class="p">)</span><span class="w"> </span><span class="n">my_cool_effect2_complex_init</span><span class="p">(</span><span class="n">params</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">my_cool_effect2_complex_run</span><span class="p">(</span><span class="n">params</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="cp">#endif </span><span class="c1">// RGB_MATRIX_CUSTOM_EFFECT_IMPLS</span>
</code></pre></div>
<p>For inspiration and examples, check out the built-in effects under <code>quantum/rgb_matrix/animations/</code>.</p>
<h2 id="colors">Colors<a class="headerlink" href="#colors" title="Permanent link">&para;</a></h2>
<p>These are shorthands to popular colors. The <code>RGB</code> ones can be passed to the <code>setrgb</code> functions, while the <code>HSV</code> ones to the <code>sethsv</code> functions.</p>
<table>
<thead>
<tr>
<th>RGB</th>
<th>HSV</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>RGB_AZURE</code></td>
<td><code>HSV_AZURE</code></td>
</tr>
<tr>
<td><code>RGB_BLACK</code>/<code>RGB_OFF</code></td>
<td><code>HSV_BLACK</code>/<code>HSV_OFF</code></td>
</tr>
<tr>
<td><code>RGB_BLUE</code></td>
<td><code>HSV_BLUE</code></td>
</tr>
<tr>
<td><code>RGB_CHARTREUSE</code></td>
<td><code>HSV_CHARTREUSE</code></td>
</tr>
<tr>
<td><code>RGB_CORAL</code></td>
<td><code>HSV_CORAL</code></td>
</tr>
<tr>
<td><code>RGB_CYAN</code></td>
<td><code>HSV_CYAN</code></td>
</tr>
<tr>
<td><code>RGB_GOLD</code></td>
<td><code>HSV_GOLD</code></td>
</tr>
<tr>
<td><code>RGB_GOLDENROD</code></td>
<td><code>HSV_GOLDENROD</code></td>
</tr>
<tr>
<td><code>RGB_GREEN</code></td>
<td><code>HSV_GREEN</code></td>
</tr>
<tr>
<td><code>RGB_MAGENTA</code></td>
<td><code>HSV_MAGENTA</code></td>
</tr>
<tr>
<td><code>RGB_ORANGE</code></td>
<td><code>HSV_ORANGE</code></td>
</tr>
<tr>
<td><code>RGB_PINK</code></td>
<td><code>HSV_PINK</code></td>
</tr>
<tr>
<td><code>RGB_PURPLE</code></td>
<td><code>HSV_PURPLE</code></td>
</tr>
<tr>
<td><code>RGB_RED</code></td>
<td><code>HSV_RED</code></td>
</tr>
<tr>
<td><code>RGB_SPRINGGREEN</code></td>
<td><code>HSV_SPRINGGREEN</code></td>
</tr>
<tr>
<td><code>RGB_TEAL</code></td>
<td><code>HSV_TEAL</code></td>
</tr>
<tr>
<td><code>RGB_TURQUOISE</code></td>
<td><code>HSV_TURQUOISE</code></td>
</tr>
<tr>
<td><code>RGB_WHITE</code></td>
<td><code>HSV_WHITE</code></td>
</tr>
<tr>
<td><code>RGB_YELLOW</code></td>
<td><code>HSV_YELLOW</code></td>
</tr>
</tbody>
</table>
<p>These are defined in <a href="https://github.com/qmk/qmk_firmware/blob/master/quantum/color.h"><code>color.h</code></a>. Feel free to add to this list!</p>
<h2 id="additional-configh-options">Additional <code>config.h</code> Options<a class="headerlink" href="#additional-configh-options" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="cp">#define RGB_MATRIX_KEYPRESSES </span><span class="c1">// reacts to keypresses</span>
<span class="cp">#define RGB_MATRIX_KEYRELEASES </span><span class="c1">// reacts to keyreleases (instead of keypresses)</span>
<span class="cp">#define RGB_MATRIX_FRAMEBUFFER_EFFECTS </span><span class="c1">// enable framebuffer effects</span>
<span class="cp">#define RGB_DISABLE_TIMEOUT 0 </span><span class="c1">// number of milliseconds to wait until rgb automatically turns off</span>
<span class="cp">#define RGB_DISABLE_AFTER_TIMEOUT 0 </span><span class="c1">// OBSOLETE: number of ticks to wait until disabling effects</span>
<span class="cp">#define RGB_DISABLE_WHEN_USB_SUSPENDED </span><span class="c1">// turn off effects when suspended</span>
<span class="cp">#define RGB_MATRIX_LED_PROCESS_LIMIT (DRIVER_LED_TOTAL + 4) / 5 </span><span class="c1">// limits the number of LEDs to process in an animation per task run (increases keyboard responsiveness)</span>
<span class="cp">#define RGB_MATRIX_LED_FLUSH_LIMIT 16 </span><span class="c1">// limits in milliseconds how frequently an animation will update the LEDs. 16 (16ms) is equivalent to limiting to 60fps (increases keyboard responsiveness)</span>
<span class="cp">#define RGB_MATRIX_MAXIMUM_BRIGHTNESS 200 </span><span class="c1">// limits maximum brightness of LEDs to 200 out of 255. If not defined maximum brightness is set to 255</span>
<span class="cp">#define RGB_MATRIX_STARTUP_MODE RGB_MATRIX_CYCLE_LEFT_RIGHT </span><span class="c1">// Sets the default mode, if none has been set</span>
<span class="cp">#define RGB_MATRIX_STARTUP_HUE 0 </span><span class="c1">// Sets the default hue value, if none has been set</span>
<span class="cp">#define RGB_MATRIX_STARTUP_SAT 255 </span><span class="c1">// Sets the default saturation value, if none has been set</span>
<span class="cp">#define RGB_MATRIX_STARTUP_VAL RGB_MATRIX_MAXIMUM_BRIGHTNESS </span><span class="c1">// Sets the default brightness value, if none has been set</span>
<span class="cp">#define RGB_MATRIX_STARTUP_SPD 127 </span><span class="c1">// Sets the default animation speed, if none has been set</span>
<span class="cp">#define RGB_MATRIX_DISABLE_KEYCODES </span><span class="c1">// disables control of rgb matrix by keycodes (must use code functions to control the feature)</span>
<span class="cp">#define RGB_MATRIX_SPLIT { X, Y }   </span><span class="c1">// (Optional) For split keyboards, the number of LEDs connected on each half. X = left, Y = Right.</span>
<span class="w">                                    </span><span class="c1">// If RGB_MATRIX_KEYPRESSES or RGB_MATRIX_KEYRELEASES is enabled, you also will want to enable SPLIT_TRANSPORT_MIRROR</span>
</code></pre></div>
<h2 id="eeprom-storage">EEPROM storage<a class="headerlink" href="#eeprom-storage" title="Permanent link">&para;</a></h2>
<p>The EEPROM for it is currently shared with the LED Matrix system (it's generally assumed only one feature would be used at a time), but could be configured to use its own 32bit address with:</p>
<div class="highlight"><pre><span></span><code><span class="cp">#define EECONFIG_RGB_MATRIX (uint32_t *)28</span>
</code></pre></div>
<p>Where <code>28</code> is an unused index from <code>eeconfig.h</code>.</p>
<h2 id="functions">Functions<a class="headerlink" href="#functions" title="Permanent link">&para;</a></h2>
<h3 id="direct-operation">Direct Operation<a class="headerlink" href="#direct-operation" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Function</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>rgb_matrix_set_color_all(r, g, b)</code></td>
<td>Set all of the LEDs to the given RGB value, where <code>r</code>/<code>g</code>/<code>b</code> are between 0 and 255 (not written to EEPROM)</td>
</tr>
<tr>
<td><code>rgb_matrix_set_color(index, r, g, b)</code></td>
<td>Set a single LED to the given RGB value, where <code>r</code>/<code>g</code>/<code>b</code> are between 0 and 255, and <code>index</code> is between 0 and <code>DRIVER_LED_TOTAL</code> (not written to EEPROM)</td>
</tr>
</tbody>
</table>
<h3 id="disable-enable-effects">Disable/Enable Effects<a class="headerlink" href="#disable-enable-effects" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Function</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>rgb_matrix_toggle()</code></td>
<td>Toggle effect range LEDs between on and off</td>
</tr>
<tr>
<td><code>rgb_matrix_toggle_noeeprom()</code></td>
<td>Toggle effect range LEDs between on and off (not written to EEPROM)</td>
</tr>
<tr>
<td><code>rgb_matrix_enable()</code></td>
<td>Turn effect range LEDs on, based on their previous state</td>
</tr>
<tr>
<td><code>rgb_matrix_enable_noeeprom()</code></td>
<td>Turn effect range LEDs on, based on their previous state (not written to EEPROM)</td>
</tr>
<tr>
<td><code>rgb_matrix_disable()</code></td>
<td>Turn effect range LEDs off, based on their previous state</td>
</tr>
<tr>
<td><code>rgb_matrix_disable_noeeprom()</code></td>
<td>Turn effect range LEDs off, based on their previous state (not written to EEPROM)</td>
</tr>
</tbody>
</table>
<h3 id="change-effect-mode">Change Effect Mode<a class="headerlink" href="#change-effect-mode" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Function</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>rgb_matrix_mode(mode)</code></td>
<td>Set the mode, if RGB animations are enabled</td>
</tr>
<tr>
<td><code>rgb_matrix_mode_noeeprom(mode)</code></td>
<td>Set the mode, if RGB animations are enabled (not written to EEPROM)</td>
</tr>
<tr>
<td><code>rgb_matrix_step()</code></td>
<td>Change the mode to the next RGB animation in the list of enabled RGB animations</td>
</tr>
<tr>
<td><code>rgb_matrix_step_noeeprom()</code></td>
<td>Change the mode to the next RGB animation in the list of enabled RGB animations (not written to EEPROM)</td>
</tr>
<tr>
<td><code>rgb_matrix_step_reverse()</code></td>
<td>Change the mode to the previous RGB animation in the list of enabled RGB animations</td>
</tr>
<tr>
<td><code>rgb_matrix_step_reverse_noeeprom()</code></td>
<td>Change the mode to the previous RGB animation in the list of enabled RGB animations (not written to EEPROM)</td>
</tr>
<tr>
<td><code>rgb_matrix_increase_speed()</code></td>
<td>Increase the speed of the animations</td>
</tr>
<tr>
<td><code>rgb_matrix_increase_speed_noeeprom()</code></td>
<td>Increase the speed of the animations (not written to EEPROM)</td>
</tr>
<tr>
<td><code>rgb_matrix_decrease_speed()</code></td>
<td>Decrease the speed of the animations</td>
</tr>
<tr>
<td><code>rgb_matrix_decrease_speed_noeeprom()</code></td>
<td>Decrease the speed of the animations (not written to EEPROM)</td>
</tr>
<tr>
<td><code>rgb_matrix_set_speed(speed)</code></td>
<td>Set the speed of the animations to the given value where <code>speed</code> is between 0 and 255</td>
</tr>
<tr>
<td><code>rgb_matrix_set_speed_noeeprom(speed)</code></td>
<td>Set the speed of the animations to the given value where <code>speed</code> is between 0 and 255 (not written to EEPROM)</td>
</tr>
</tbody>
</table>
<h3 id="change-color">Change Color<a class="headerlink" href="#change-color" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Function</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>rgb_matrix_increase_hue()</code></td>
<td>Increase the hue for effect range LEDs. This wraps around at maximum hue</td>
</tr>
<tr>
<td><code>rgb_matrix_increase_hue_noeeprom()</code></td>
<td>Increase the hue for effect range LEDs. This wraps around at maximum hue (not written to EEPROM)</td>
</tr>
<tr>
<td><code>rgb_matrix_decrease_hue()</code></td>
<td>Decrease the hue for effect range LEDs. This wraps around at minimum hue</td>
</tr>
<tr>
<td><code>rgb_matrix_decrease_hue_noeeprom()</code></td>
<td>Decrease the hue for effect range LEDs. This wraps around at minimum hue (not written to EEPROM)</td>
</tr>
<tr>
<td><code>rgb_matrix_increase_sat()</code></td>
<td>Increase the saturation for effect range LEDs. This wraps around at maximum saturation</td>
</tr>
<tr>
<td><code>rgb_matrix_increase_sat_noeeprom()</code></td>
<td>Increase the saturation for effect range LEDs. This wraps around at maximum saturation (not written to EEPROM)</td>
</tr>
<tr>
<td><code>rgb_matrix_decrease_sat()</code></td>
<td>Decrease the saturation for effect range LEDs. This wraps around at minimum saturation</td>
</tr>
<tr>
<td><code>rgb_matrix_decrease_sat_noeeprom()</code></td>
<td>Decrease the saturation for effect range LEDs. This wraps around at minimum saturation (not written to EEPROM)</td>
</tr>
<tr>
<td><code>rgb_matrix_increase_val()</code></td>
<td>Increase the value for effect range LEDs. This wraps around at maximum value</td>
</tr>
<tr>
<td><code>rgb_matrix_increase_val_noeeprom()</code></td>
<td>Increase the value for effect range LEDs. This wraps around at maximum value (not written to EEPROM)</td>
</tr>
<tr>
<td><code>rgb_matrix_decrease_val()</code></td>
<td>Decrease the value for effect range LEDs. This wraps around at minimum value</td>
</tr>
<tr>
<td><code>rgb_matrix_decrease_val_noeeprom()</code></td>
<td>Decrease the value for effect range LEDs. This wraps around at minimum value (not written to EEPROM)</td>
</tr>
<tr>
<td><code>rgb_matrix_sethsv(h, s, v)</code></td>
<td>Set LEDs to the given HSV value where <code>h</code>/<code>s</code>/<code>v</code> are between 0 and 255</td>
</tr>
<tr>
<td><code>rgb_matrix_sethsv_noeeprom(h, s, v)</code></td>
<td>Set LEDs to the given HSV value where <code>h</code>/<code>s</code>/<code>v</code> are between 0 and 255 (not written to EEPROM)</td>
</tr>
</tbody>
</table>
<h3 id="query-current-status">Query Current Status<a class="headerlink" href="#query-current-status" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Function</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>rgb_matrix_is_enabled()</code></td>
<td>Gets current on/off status</td>
</tr>
<tr>
<td><code>rgb_matrix_get_mode()</code></td>
<td>Gets current mode</td>
</tr>
<tr>
<td><code>rgb_matrix_get_hue()</code></td>
<td>Gets current hue</td>
</tr>
<tr>
<td><code>rgb_matrix_get_sat()</code></td>
<td>Gets current sat</td>
</tr>
<tr>
<td><code>rgb_matrix_get_val()</code></td>
<td>Gets current val</td>
</tr>
<tr>
<td><code>rgb_matrix_get_hsv()</code></td>
<td>Gets hue, sat, and val and returns a <a href="https://github.com/qmk/qmk_firmware/blob/7ba6456c0b2e041bb9f97dbed265c5b8b4b12192/quantum/color.h#L56-L61"><code>HSV</code> structure</a></td>
</tr>
<tr>
<td><code>rgb_matrix_get_speed()</code></td>
<td>Gets current speed</td>
</tr>
<tr>
<td><code>rgb_matrix_get_suspend_state()</code></td>
<td>Gets current suspend state</td>
</tr>
</tbody>
</table>
<h2 id="callbacks">Callbacks<a class="headerlink" href="#callbacks" title="Permanent link">&para;</a></h2>
<h3 id="indicators">Indicators<a class="headerlink" href="#indicators" title="Permanent link">&para;</a></h3>
<p>If you want to set custom indicators, such as an LED for Caps Lock, or layer indication, you can use the <code>rgb_matrix_indicators_kb</code> or <code>rgb_matrix_indicators_user</code> function for that:
<div class="highlight"><pre><span></span><code><span class="kt">void</span><span class="w"> </span><span class="nf">rgb_matrix_indicators_kb</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">rgb_matrix_set_color</span><span class="p">(</span><span class="n">index</span><span class="p">,</span><span class="w"> </span><span class="n">red</span><span class="p">,</span><span class="w"> </span><span class="n">green</span><span class="p">,</span><span class="w"> </span><span class="n">blue</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div></p>
<p>In addition, there are the advanced indicator functions.  These are aimed at those with heavily customized displays, where rendering every LED per cycle is expensive.  Such as some of the "drashna" layouts.  This includes a special macro to help make this easier to use: <code>RGB_MATRIX_INDICATOR_SET_COLOR(i, r, g, b)</code>.</p>
<div class="highlight"><pre><span></span><code><span class="kt">void</span><span class="w"> </span><span class="nf">rgb_matrix_indicators_advanced_user</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">led_min</span><span class="p">,</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">led_max</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">RGB_MATRIX_INDICATOR_SET_COLOR</span><span class="p">(</span><span class="n">index</span><span class="p">,</span><span class="w"> </span><span class="n">red</span><span class="p">,</span><span class="w"> </span><span class="n">green</span><span class="p">,</span><span class="w"> </span><span class="n">blue</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<h3 id="indicator-examples">Indicator Examples<a class="headerlink" href="#indicator-examples" title="Permanent link">&para;</a></h3>
<p>Caps Lock indicator on alphanumeric flagged keys:
<div class="highlight"><pre><span></span><code><span class="kt">void</span><span class="w"> </span><span class="nf">rgb_matrix_indicators_advanced_user</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">led_min</span><span class="p">,</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">led_max</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">host_keyboard_led_state</span><span class="p">().</span><span class="n">caps_lock</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">led_min</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">led_max</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">g_led_config</span><span class="p">.</span><span class="n">flags</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">LED_FLAG_KEYLIGHT</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="n">rgb_matrix_set_color</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">RGB_RED</span><span class="p">);</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div></p>
<p>Layer indicator on all flagged keys:
<div class="highlight"><pre><span></span><code><span class="kt">void</span><span class="w"> </span><span class="nf">rgb_matrix_indicators_advanced_user</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">led_min</span><span class="p">,</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">led_max</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">led_min</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">led_max</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">switch</span><span class="p">(</span><span class="n">get_highest_layer</span><span class="p">(</span><span class="n">layer_state</span><span class="o">|</span><span class="n">default_layer_state</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="nl">RAISE</span><span class="p">:</span><span class="w"></span>
<span class="w">                </span><span class="n">rgb_matrix_set_color</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">RGB_BLUE</span><span class="p">);</span><span class="w"></span>
<span class="w">                </span><span class="k">break</span><span class="p">;</span><span class="w"></span>
<span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="nl">LOWER</span><span class="p">:</span><span class="w"></span>
<span class="w">                </span><span class="n">rgb_matrix_set_color</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">RGB_YELLOW</span><span class="p">);</span><span class="w"></span>
<span class="w">                </span><span class="k">break</span><span class="p">;</span><span class="w"></span>
<span class="w">            </span><span class="k">default</span><span class="o">:</span><span class="w"></span>
<span class="w">                </span><span class="k">break</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div></p>
<p>Layer indicator with only configured keys:
<div class="highlight"><pre><span></span><code><span class="kt">void</span><span class="w"> </span><span class="nf">rgb_matrix_indicators_advanced_user</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">led_min</span><span class="p">,</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">led_max</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">get_highest_layer</span><span class="p">(</span><span class="n">layer_state</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">layer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">get_highest_layer</span><span class="p">(</span><span class="n">layer_state</span><span class="p">);</span><span class="w"></span>

<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">row</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">row</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">MATRIX_ROWS</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">row</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">col</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">MATRIX_COLS</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">col</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">index</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">g_led_config</span><span class="p">.</span><span class="n">matrix_co</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">col</span><span class="p">];</span><span class="w"></span>

<span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">index</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">led_min</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">index</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">led_max</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">index</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">NO_LED</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"></span>
<span class="w">                </span><span class="n">keymap_key_to_keycode</span><span class="p">(</span><span class="n">layer</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">keypos_t</span><span class="p">){</span><span class="n">col</span><span class="p">,</span><span class="n">row</span><span class="p">})</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">KC_TRNS</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                    </span><span class="n">rgb_matrix_set_color</span><span class="p">(</span><span class="n">index</span><span class="p">,</span><span class="w"> </span><span class="n">RGB_GREEN</span><span class="p">);</span><span class="w"></span>
<span class="w">                </span><span class="p">}</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div></p>
<h4 id="indicator-examples">Examples<a class="headerlink" href="#indicator-examples" title="Permanent link">&para;</a></h4>
<p>This example sets the modifiers to be a specific color based on the layer state.  You can use a switch case here, instead, if you would like.  This uses HSV and then converts to RGB, because this allows the brightness to be limited (important when using the WS2812 driver).</p>
<div class="highlight"><pre><span></span><code><span class="kt">void</span><span class="w"> </span><span class="nf">rgb_matrix_indicators_advanced_user</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">led_min</span><span class="p">,</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">led_max</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">HSV</span><span class="w"> </span><span class="n">hsv</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">255</span><span class="p">,</span><span class="w"> </span><span class="mi">255</span><span class="p">};</span><span class="w"></span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">layer_state_is</span><span class="p">(</span><span class="n">layer_state</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">hsv</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">130</span><span class="p">,</span><span class="w"> </span><span class="mi">255</span><span class="p">,</span><span class="w"> </span><span class="mi">255</span><span class="p">};</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">hsv</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">30</span><span class="p">,</span><span class="w"> </span><span class="mi">255</span><span class="p">,</span><span class="w"> </span><span class="mi">255</span><span class="p">};</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">hsv</span><span class="p">.</span><span class="n">v</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">rgb_matrix_get_val</span><span class="p">())</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">hsv</span><span class="p">.</span><span class="n">v</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rgb_matrix_get_val</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="n">RGB</span><span class="w"> </span><span class="n">rgb</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">hsv_to_rgb</span><span class="p">(</span><span class="n">hsv</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">led_min</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">led_max</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">HAS_FLAGS</span><span class="p">(</span><span class="n">g_led_config</span><span class="p">.</span><span class="n">flags</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="w"> </span><span class="mh">0x01</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// 0x01 == LED_FLAG_MODIFIER</span>
<span class="w">            </span><span class="n">rgb_matrix_set_color</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">rgb</span><span class="p">.</span><span class="n">r</span><span class="p">,</span><span class="w"> </span><span class="n">rgb</span><span class="p">.</span><span class="n">g</span><span class="p">,</span><span class="w"> </span><span class="n">rgb</span><span class="p">.</span><span class="n">b</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>If you want to indicate a Host LED status (caps lock, num lock, etc), you can use something like this to light up the caps lock key:</p>
<div class="highlight"><pre><span></span><code><span class="kt">void</span><span class="w"> </span><span class="nf">rgb_matrix_indicators_advanced_user</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">led_min</span><span class="p">,</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">led_max</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">host_keyboard_led_state</span><span class="p">().</span><span class="n">caps_lock</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">RGB_MATRIX_INDICATOR_SET_COLOR</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">255</span><span class="p">,</span><span class="w"> </span><span class="mi">255</span><span class="p">,</span><span class="w"> </span><span class="mi">255</span><span class="p">);</span><span class="w"> </span><span class="c1">// assuming caps lock is at led #5</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">RGB_MATRIX_INDICATOR_SET_COLOR</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<h4 id="indicators-without-rgb-matrix-effect">Indicators without RGB Matrix Effect<a class="headerlink" href="#indicators-without-rgb-matrix-effect" title="Permanent link">&para;</a></h4>
<p>If you want to just use RGB indicators without RGB matrix effect, it is not possible to disable the latter because toggling RGB off will disable everything. You can workaround it with solid effect and colors off using this init function:
<div class="highlight"><pre><span></span><code><span class="kt">void</span><span class="w"> </span><span class="nf">keyboard_post_init_user</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">rgb_matrix_mode_noeeprom</span><span class="p">(</span><span class="n">RGB_MATRIX_SOLID_COLOR</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">rgb_matrix_sethsv_noeeprom</span><span class="p">(</span><span class="n">HSV_OFF</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div></p>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../feature_rgblight/" class="md-footer__link md-footer__link--prev" aria-label="Previous: RGB ライト" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              RGB ライト
            </div>
          </div>
        </a>
      
      
        
        <a href="../feature_audio/" class="md-footer__link md-footer__link--next" aria-label="Next: オーディオ" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              オーディオ
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.expand", "navigation.sections", "search.highlight", "search.share", "search.suggest"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../assets/javascripts/workers/search.361d90f1.min.js", "version": {"provider": "mike"}}</script>
    
    
      <script src="../assets/javascripts/bundle.289a2a4b.min.js"></script>
      
    
  </body>
</html>