
<!doctype html>
<html lang="es" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="canonical" href="https://qmk.github.io/qmk_mkdocs/master/es/custom_quantum_functions/">
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.2, mkdocs-material-7.2.5">
    
    
      
        <title>Personalizando funcionalidad - QMK Firmware Docs</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.be71726b.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.3f5d1f46.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Varela+Round:300,400,400i,700%7CSource+Code+Pro&display=fallback">
        <style>:root{--md-text-font-family:"Varela Round";--md-code-font-family:"Source Code Pro"}</style>
      
    
    
    
      <link rel="stylesheet" href="../stylesheets/qmk.css">
    
    
      


    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="light-blue">
  
    
    <script>function __prefix(e){return new URL("..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
      <script>var palette=__get("__palette");if(null!==palette&&"object"==typeof palette.color)for(var key in palette.color)document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#how-to-customize-your-keyboards-behavior" class="md-skip">
          Saltar a contenido
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Cabecera">
    <a href=".." title="QMK Firmware Docs" class="md-header__button md-logo" aria-label="QMK Firmware Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            QMK Firmware Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Personalizando funcionalidad
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="light-blue"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7 10a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2 2 2 0 0 1 2-2m10-3a5 5 0 0 1 5 5 5 5 0 0 1-5 5H7a5 5 0 0 1-5-5 5 5 0 0 1 5-5h10M7 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3h10a3 3 0 0 0 3-3 3 3 0 0 0-3-3H7z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="blue-grey" data-md-color-accent="light-blue"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Búsqueda" placeholder="Búsqueda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Limpiar" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicializando búsqueda
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/qmk/qmk_firmware/" title="Ir al repositorio" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    qmk/qmk_firmware
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navegación" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="QMK Firmware Docs" class="md-nav__button md-logo" aria-label="QMK Firmware Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    QMK Firmware Docs
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/qmk/qmk_firmware/" title="Ir al repositorio" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    qmk/qmk_firmware
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Pagino de inicio
      </a>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" data-md-state="indeterminate" type="checkbox" id="__nav_2" checked>
      
      <label class="md-nav__link" for="__nav_2">
        Guía completa para novatos
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Guía completa para novatos" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Guía completa para novatos
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/" class="md-nav__link">
        Introducción
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial_getting_started/" class="md-nav__link">
        Empezando
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial_building_firmware/" class="md-nav__link">
        Construyendo tu primer firmare
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial_flashing/" class="md-nav__link">
        Flasheando el firmware
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial_testing_debugging/" class="md-nav__link">
        Testeando y depurando
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial_best_practices/" class="md-nav__link">
        Mejores práticas
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial_learn_more_resources/" class="md-nav__link">
        Recursos de aprendizaje
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" data-md-state="indeterminate" type="checkbox" id="__nav_3" checked>
      
      <label class="md-nav__link" for="__nav_3">
        QMK Basics
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="QMK Basics" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          QMK Basics
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../getting_started_introduction/" class="md-nav__link">
        Introducción a QMK
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../cli/" class="md-nav__link">
        QMK CLI
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../cli_configuration/" class="md-nav__link">
        Configuración de QMK CLI
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../contributing/" class="md-nav__link">
        Contribuyendo a QMK
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../getting_started_github/" class="md-nav__link">
        Cómo usar GitHub
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../support/" class="md-nav__link">
        Obtener ayuda
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" data-md-state="indeterminate" type="checkbox" id="__nav_4" checked>
      
      <label class="md-nav__link" for="__nav_4">
        Cambios incompatibles
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Cambios incompatibles" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Cambios incompatibles
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../breaking_changes/" class="md-nav__link">
        Overview
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../ChangeLog/20190830/" class="md-nav__link">
        30 Ago 2019
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" data-md-state="indeterminate" type="checkbox" id="__nav_5" checked>
      
      <label class="md-nav__link" for="__nav_5">
        Preguntas frecuentes
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Preguntas frecuentes" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Preguntas frecuentes
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../faq_general/" class="md-nav__link">
        General
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../faq_build/" class="md-nav__link">
        Construir/Compilar QMK
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../faq_debug/" class="md-nav__link">
        Depurando/Encontrando problemas en QMK
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../faq_keymap/" class="md-nav__link">
        Keymap
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../driver_installation_zadig/" class="md-nav__link">
        Instalación de drivers con Zadig
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" checked>
      
      <label class="md-nav__link" for="__nav_6">
        Guías detalladas
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Guías detalladas" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Guías detalladas
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial_getting_started/" class="md-nav__link">
        Instalar herramientas construcción
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../getting_started_vagrant/" class="md-nav__link">
        Guía Vagrant
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../getting_started_make_guide/" class="md-nav__link">
        Instrucciones de Construcción/Compilado
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../flashing/" class="md-nav__link">
        Flasheando Firmware
      </a>
    </li>
  

          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Personalizando funcionalidad
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Personalizando funcionalidad
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#a-word-on-core-vs-keyboards-vs-keymap" class="md-nav__link">
    A Word on Core vs Keyboards vs Keymap
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../keymap/" class="md-nav__link">
        Visión general del Keymap
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" data-md-state="indeterminate" type="checkbox" id="__nav_7" checked>
      
      <label class="md-nav__link" for="__nav_7">
        Hardware
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Hardware" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Hardware
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../hardware_avr/" class="md-nav__link">
        Procesadores AVR
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../hardware_drivers/" class="md-nav__link">
        Drivers
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" data-md-state="indeterminate" type="checkbox" id="__nav_8" checked>
      
      <label class="md-nav__link" for="__nav_8">
        Referencia
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Referencia" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Referencia
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../hardware_keyboard_guidelines/" class="md-nav__link">
        Pautas de teclados
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../config_options/" class="md-nav__link">
        Opciones de configuración
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../keycodes/" class="md-nav__link">
        Keycodes
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../coding_conventions_c/" class="md-nav__link">
        Convenciones de código - C
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../coding_conventions_python/" class="md-nav__link">
        Convenciones de código - Python
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../documentation_best_practices/" class="md-nav__link">
        Mejores prácticas de documentación
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../documentation_templates/" class="md-nav__link">
        Plantillas de documentación
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../reference_glossary/" class="md-nav__link">
        Glosario
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../unit_testing/" class="md-nav__link">
        Tests unitarios
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../ref_functions/" class="md-nav__link">
        Funciones útiles
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../reference_configurator_support/" class="md-nav__link">
        Sporte configurador
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../reference_info_json/" class="md-nav__link">
        Formato info.json
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../cli_development/" class="md-nav__link">
        Desarrollo Python CLI
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9" data-md-state="indeterminate" type="checkbox" id="__nav_9" checked>
      
      <label class="md-nav__link" for="__nav_9">
        Características
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Características" data-md-level="1">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          Características
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../keycodes_basic/" class="md-nav__link">
        Keycodes Básicos
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../keycodes_us_ansi_shifted/" class="md-nav__link">
        Teclas US ANSI Shifted
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../quantum_keycodes/" class="md-nav__link">
        Keycodes Quantum
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../feature_advanced_keycodes/" class="md-nav__link">
        Keycodes Avanzados
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../feature_audio/" class="md-nav__link">
        Audio
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../feature_auto_shift/" class="md-nav__link">
        Auto Shift
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../feature_backlight/" class="md-nav__link">
        Retroiluminación
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../feature_bluetooth/" class="md-nav__link">
        Bluetooth
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../feature_bootmagic/" class="md-nav__link">
        Bootmagic
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../feature_combo/" class="md-nav__link">
        Combos
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../feature_command/" class="md-nav__link">
        Comando
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../feature_debounce_type/" class="md-nav__link">
        API Debounce
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../feature_dip_switch/" class="md-nav__link">
        Switch DIP
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../feature_dynamic_macros/" class="md-nav__link">
        Macros Dinámicas
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../feature_encoders/" class="md-nav__link">
        Encoders
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../feature_grave_esc/" class="md-nav__link">
        Grave Escape
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../feature_haptic_feedback/" class="md-nav__link">
        Feedback Háptico
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../feature_hd44780/" class="md-nav__link">
        Controlador LCD HD44780
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../feature_key_lock/" class="md-nav__link">
        Key Lock
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../feature_layouts/" class="md-nav__link">
        Layouts
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../feature_leader_key/" class="md-nav__link">
        Tecla Leader
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../feature_led_matrix/" class="md-nav__link">
        Matriz LED
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../feature_macros/" class="md-nav__link">
        Macros
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../feature_mouse_keys/" class="md-nav__link">
        Teclas del ratón
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../feature_oled_driver/" class="md-nav__link">
        Driver OLED
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../one_shot_keys/" class="md-nav__link">
        Teclas One Shot
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../feature_pointing_device/" class="md-nav__link">
        Dispositivo de apuntado
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../feature_ps2_mouse/" class="md-nav__link">
        Ratón PS/2
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../feature_rgblight/" class="md-nav__link">
        Iluminación RGB
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../feature_rgb_matrix/" class="md-nav__link">
        Matriz RGB
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../feature_space_cadet/" class="md-nav__link">
        Cadete espacial
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../feature_split_keyboard/" class="md-nav__link">
        Teclado dividido
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../feature_stenography/" class="md-nav__link">
        Stenografía
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../feature_swap_hands/" class="md-nav__link">
        Swap Hands
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../feature_tap_dance/" class="md-nav__link">
        Tap Dance
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../feature_terminal/" class="md-nav__link">
        Terminal
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../feature_thermal_printer/" class="md-nav__link">
        Impresora Térmica
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../feature_unicode/" class="md-nav__link">
        Unicode
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../feature_userspace/" class="md-nav__link">
        Userspace
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../feature_velocikey/" class="md-nav__link">
        Velocikey
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10" data-md-state="indeterminate" type="checkbox" id="__nav_10" checked>
      
      <label class="md-nav__link" for="__nav_10">
        Para Makers y Modders
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Para Makers y Modders" data-md-level="1">
        <label class="md-nav__title" for="__nav_10">
          <span class="md-nav__icon md-icon"></span>
          Para Makers y Modders
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../hand_wire/" class="md-nav__link">
        Guía de cableado a mano
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../isp_flashing_guide/" class="md-nav__link">
        Guía de flasheado de ISP
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../arm_debugging/" class="md-nav__link">
        Guía de depuración de ARM
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../i2c_driver/" class="md-nav__link">
        Driver I2C
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../spi_driver/" class="md-nav__link">
        Driver SPI
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../internals_gpio_control/" class="md-nav__link">
        Controles GPIO
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../proton_c_conversion/" class="md-nav__link">
        Conversión Proton C
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_11" data-md-state="indeterminate" type="checkbox" id="__nav_11" checked>
      
      <label class="md-nav__link" for="__nav_11">
        Para entender en profundidad
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Para entender en profundidad" data-md-level="1">
        <label class="md-nav__title" for="__nav_11">
          <span class="md-nav__icon md-icon"></span>
          Para entender en profundidad
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../how_keyboards_work/" class="md-nav__link">
        Cómo funcionan los teclados
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../understanding_qmk/" class="md-nav__link">
        Entendiendo QMK
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_12" data-md-state="indeterminate" type="checkbox" id="__nav_12" checked>
      
      <label class="md-nav__link" for="__nav_12">
        Otros temas
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Otros temas" data-md-level="1">
        <label class="md-nav__title" for="__nav_12">
          <span class="md-nav__icon md-icon"></span>
          Otros temas
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../other_eclipse/" class="md-nav__link">
        Usando Eclipse con QMK
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../other_vscode/" class="md-nav__link">
        Usando VSCode con QMK
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../support/" class="md-nav__link">
        Soporte
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../translating/" class="md-nav__link">
        Cómo añadir traducciones
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_13" data-md-state="indeterminate" type="checkbox" id="__nav_13" checked>
      
      <label class="md-nav__link" for="__nav_13">
        QMK Internals (En progreso)
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="QMK Internals (En progreso)" data-md-level="1">
        <label class="md-nav__title" for="__nav_13">
          <span class="md-nav__icon md-icon"></span>
          QMK Internals (En progreso)
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../internals_defines/" class="md-nav__link">
        Defines
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../internals_input_callback_reg/" class="md-nav__link">
        Input Callback Reg
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../internals_midi_device/" class="md-nav__link">
        Dispositivo Midi
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../internals_midi_device_setup_process/" class="md-nav__link">
        Proceso de configuración de un dispositivo Midi
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../internals_midi_util/" class="md-nav__link">
        Utilidad Midi
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../internals_send_functions/" class="md-nav__link">
        Funciones Send
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../internals_sysex_tools/" class="md-nav__link">
        Herramientas Sysex
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#a-word-on-core-vs-keyboards-vs-keymap" class="md-nav__link">
    A Word on Core vs Keyboards vs Keymap
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/qmk/qmk_firmware/edit/master/docs/custom_quantum_functions.md" title="Editar esta página" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="how-to-customize-your-keyboards-behavior">How to Customize Your Keyboard's Behavior<a class="headerlink" href="#how-to-customize-your-keyboards-behavior" title="Permanent link">&para;</a></h1>
<p>For a lot of people a custom keyboard is about more than sending button presses to your computer. You want to be able to do things that are more complex than simple button presses and macros. QMK has hooks that allow you to inject code, override functionality, and otherwise customize how your keyboard behaves in different situations.</p>
<p>This page does not assume any special knowledge about QMK, but reading <a href="../understanding_qmk/">Understanding QMK</a> will help you understand what is going on at a more fundamental level.</p>
<h2 id="a-word-on-core-vs-keyboards-vs-keymap">A Word on Core vs Keyboards vs Keymap<a class="headerlink" href="#a-word-on-core-vs-keyboards-vs-keymap" title="Permanent link">&para;</a></h2>
<p>We have structured QMK as a hierarchy:</p>
<ul>
<li>Core (<code>_quantum</code>)</li>
<li>Keyboard/Revision (<code>_kb</code>)<ul>
<li>Keymap (<code>_user</code>)</li>
</ul>
</li>
</ul>
<p>Each of the functions described below can be defined with a <code>_kb()</code> suffix or a <code>_user()</code> suffix. We intend for you to use the <code>_kb()</code> suffix at the Keyboard/Revision level, while the <code>_user()</code> suffix should be used at the Keymap level.</p>
<p>When defining functions at the Keyboard/Revision level it is important that your <code>_kb()</code> implementation call <code>_user()</code> before executing anything else- otherwise the keymap level function will never be called.</p>
<h1 id="custom-keycodes">Custom Keycodes<a class="headerlink" href="#custom-keycodes" title="Permanent link">&para;</a></h1>
<p>By far the most common task is to change the behavior of an existing keycode or to create a new keycode. From a code standpoint the mechanism for each is very similar.</p>
<h2 id="defining-a-new-keycode">Defining a New Keycode<a class="headerlink" href="#defining-a-new-keycode" title="Permanent link">&para;</a></h2>
<p>The first step to creating your own custom keycode(s) is to enumerate them. This means both naming them and assigning a unique number to that keycode. Rather than limit custom keycodes to a fixed range of numbers QMK provides the <code>SAFE_RANGE</code> macro. You can use <code>SAFE_RANGE</code> when enumerating your custom keycodes to guarantee that you get a unique number.</p>
<p>Here is an example of enumerating 2 keycodes. After adding this block to your <code>keymap.c</code> you will be able to use <code>FOO</code> and <code>BAR</code> inside your keymap.</p>
<div class="highlight"><pre><span></span><code><span class="k">enum</span> <span class="n">my_keycodes</span> <span class="p">{</span>
  <span class="n">FOO</span> <span class="o">=</span> <span class="n">SAFE_RANGE</span><span class="p">,</span>
  <span class="n">BAR</span>
<span class="p">};</span>
</code></pre></div>
<h2 id="programming-the-behavior-of-any-keycode">Programming the Behavior of Any Keycode<a class="headerlink" href="#programming-the-behavior-of-any-keycode" title="Permanent link">&para;</a></h2>
<p>When you want to override the behavior of an existing key, or define the behavior for a new key, you should use the <code>process_record_kb()</code> and <code>process_record_user()</code> functions. These are called by QMK during key processing before the actual key event is handled. If these functions return <code>true</code> QMK will process the keycodes as usual. That can be handy for extending the functionality of a key rather than replacing it. If these functions return <code>false</code> QMK will skip the normal key handling, and it will be up to you to send any key up or down events that are required.</p>
<p>These function are called every time a key is pressed or released.</p>
<h3 id="example-process_record_user-implementation">Example <code>process_record_user()</code> Implementation<a class="headerlink" href="#example-process_record_user-implementation" title="Permanent link">&para;</a></h3>
<p>This example does two things. It defines the behavior for a custom keycode called <code>FOO</code>, and it supplements our Enter key by playing a tone whenever it is pressed.</p>
<div class="highlight"><pre><span></span><code><span class="kt">bool</span> <span class="nf">process_record_user</span><span class="p">(</span><span class="kt">uint16_t</span> <span class="n">keycode</span><span class="p">,</span> <span class="n">keyrecord_t</span> <span class="o">*</span><span class="n">record</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">switch</span> <span class="p">(</span><span class="n">keycode</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">case</span> <span class="nl">FOO</span><span class="p">:</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">record</span><span class="o">-&gt;</span><span class="n">event</span><span class="p">.</span><span class="n">pressed</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Do something when pressed</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// Do something else when release</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nb">false</span><span class="p">;</span> <span class="c1">// Skip all further processing of this key</span>
    <span class="k">case</span> <span class="nl">KC_ENTER</span><span class="p">:</span>
      <span class="c1">// Play a tone when enter is pressed</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">record</span><span class="o">-&gt;</span><span class="n">event</span><span class="p">.</span><span class="n">pressed</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">PLAY_SONG</span><span class="p">(</span><span class="n">tone_qwerty</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nb">true</span><span class="p">;</span> <span class="c1">// Let QMK send the enter press/release events</span>
    <span class="k">default</span><span class="o">:</span>
      <span class="k">return</span> <span class="nb">true</span><span class="p">;</span> <span class="c1">// Process all other keycodes normally</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="process_record_-function-documentation"><code>process_record_*</code> Function Documentation<a class="headerlink" href="#process_record_-function-documentation" title="Permanent link">&para;</a></h3>
<ul>
<li>Keyboard/Revision: <code>bool process_record_kb(uint16_t keycode, keyrecord_t *record)</code></li>
<li>Keymap: <code>bool process_record_user(uint16_t keycode, keyrecord_t *record)</code></li>
</ul>
<p>The <code>keycode</code> argument is whatever is defined in your keymap, eg <code>MO(1)</code>, <code>KC_L</code>, etc. You should use a <code>switch...case</code> block to handle these events.</p>
<p>The <code>record</code> argument contains information about the actual press:</p>
<div class="highlight"><pre><span></span><code><span class="n">keyrecord_t</span> <span class="n">record</span> <span class="p">{</span>
  <span class="n">keyevent_t</span> <span class="n">event</span> <span class="p">{</span>
    <span class="n">keypos_t</span> <span class="n">key</span> <span class="p">{</span>
      <span class="kt">uint8_t</span> <span class="n">col</span>
      <span class="kt">uint8_t</span> <span class="n">row</span>
    <span class="p">}</span>
    <span class="kt">bool</span>     <span class="n">pressed</span>
    <span class="kt">uint16_t</span> <span class="n">time</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h1 id="keyboard-initialization-code">Keyboard Initialization Code<a class="headerlink" href="#keyboard-initialization-code" title="Permanent link">&para;</a></h1>
<p>There are several steps in the keyboard initialization process.  Depending on what you want to do, it will influence which function you should use.</p>
<p>These are the three main initialization functions, listed in the order that they're called.</p>
<ul>
<li><code>keyboard_pre_init_*</code> - Happens before most anything is started. Good for hardware setup that you want running very early.</li>
<li><code>matrix_init_*</code> - Happens midway through the firmware's startup process. Hardware is initialized, but features may not be yet.</li>
<li><code>keyboard_post_init_*</code> - Happens at the end of the firmware's startup process. This is where you'd want to put "customization" code, for the most part.</li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>For most people, the <code>keyboard_post_init_user</code> function is what you want to call.  For instance, this is where you want to set up things for RGB Underglow.</p>
</div>
<h2 id="keyboard-pre-initialization-code">Keyboard Pre Initialization code<a class="headerlink" href="#keyboard-pre-initialization-code" title="Permanent link">&para;</a></h2>
<p>This runs very early during startup, even before the USB has been started. </p>
<p>Shortly after this, the matrix is initialized.</p>
<p>For most users, this shouldn't be used, as it's primarily for hardware oriented initialization. </p>
<p>However, if you have hardware stuff that you need initialized, this is the best place for it (such as initializing LED pins).</p>
<h3 id="example-keyboard_pre_init_user-implementation">Example <code>keyboard_pre_init_user()</code> Implementation<a class="headerlink" href="#example-keyboard_pre_init_user-implementation" title="Permanent link">&para;</a></h3>
<p>This example, at the keyboard level, sets up B0, B1, B2, B3, and B4 as LED pins.</p>
<div class="highlight"><pre><span></span><code><span class="kt">void</span> <span class="nf">keyboard_pre_init_user</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Call the keyboard pre init code.</span>

  <span class="c1">// Set our LED pins as output</span>
  <span class="n">setPinOutput</span><span class="p">(</span><span class="n">B0</span><span class="p">);</span>
  <span class="n">setPinOutput</span><span class="p">(</span><span class="n">B1</span><span class="p">);</span>
  <span class="n">setPinOutput</span><span class="p">(</span><span class="n">B2</span><span class="p">);</span>
  <span class="n">setPinOutput</span><span class="p">(</span><span class="n">B3</span><span class="p">);</span>
  <span class="n">setPinOutput</span><span class="p">(</span><span class="n">B4</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="keyboard_pre_init_-function-documentation"><code>keyboard_pre_init_*</code> Function Documentation<a class="headerlink" href="#keyboard_pre_init_-function-documentation" title="Permanent link">&para;</a></h3>
<ul>
<li>Keyboard/Revision: <code>void keyboard_pre_init_kb(void)</code></li>
<li>Keymap: <code>void keyboard_pre_init_user(void)</code></li>
</ul>
<h2 id="matrix-initialization-code">Matrix Initialization Code<a class="headerlink" href="#matrix-initialization-code" title="Permanent link">&para;</a></h2>
<p>This is called when the matrix is initialized, and after some of the hardware has been set up, but before many of the features have been initialized. </p>
<p>This is useful for setting up stuff that you may need elsewhere, but isn't hardware related nor is dependant on where it's started. </p>
<h3 id="matrix_init_-function-documentation"><code>matrix_init_*</code> Function Documentation<a class="headerlink" href="#matrix_init_-function-documentation" title="Permanent link">&para;</a></h3>
<ul>
<li>Keyboard/Revision: <code>void matrix_init_kb(void)</code></li>
<li>Keymap: <code>void matrix_init_user(void)</code></li>
</ul>
<h2 id="keyboard-post-initialization-code">Keyboard Post Initialization code<a class="headerlink" href="#keyboard-post-initialization-code" title="Permanent link">&para;</a></h2>
<p>This is ran as the very last task in the keyboard initialization process. This is useful if you want to make changes to certain features, as they should be initialized by this point.</p>
<h3 id="example-keyboard_post_init_user-implementation">Example <code>keyboard_post_init_user()</code> Implementation<a class="headerlink" href="#example-keyboard_post_init_user-implementation" title="Permanent link">&para;</a></h3>
<p>This example, running after everything else has initialized, sets up the rgb underglow configuration.</p>
<div class="highlight"><pre><span></span><code><span class="kt">void</span> <span class="nf">keyboard_post_init_user</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Call the post init code.</span>
  <span class="n">rgblight_enable_noeeprom</span><span class="p">();</span> <span class="c1">// enables Rgb, without saving settings</span>
  <span class="n">rgblight_sethsv_noeeprom</span><span class="p">(</span><span class="mi">180</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">);</span> <span class="c1">// sets the color to teal/cyan without saving</span>
  <span class="n">rgblight_mode_noeeprom</span><span class="p">(</span><span class="n">RGBLIGHT_MODE_BREATHING</span> <span class="o">+</span> <span class="mi">3</span><span class="p">);</span> <span class="c1">// sets mode to Fast breathing without saving</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="keyboard_post_init_-function-documentation"><code>keyboard_post_init_*</code> Function Documentation<a class="headerlink" href="#keyboard_post_init_-function-documentation" title="Permanent link">&para;</a></h3>
<ul>
<li>Keyboard/Revision: <code>void keyboard_post_init_kb(void)</code></li>
<li>Keymap: <code>void keyboard_post_init_user(void)</code></li>
</ul>
<h1 id="matrix-scanning-code">Matrix Scanning Code<a class="headerlink" href="#matrix-scanning-code" title="Permanent link">&para;</a></h1>
<p>Whenever possible you should customize your keyboard by using <code>process_record_*()</code> and hooking into events that way, to ensure that your code does not have a negative performance impact on your keyboard. However, in rare cases it is necessary to hook into the matrix scanning. Be extremely careful with the performance of code in these functions, as it will be called at least 10 times per second.</p>
<h3 id="example-matrix_scan_-implementation">Example <code>matrix_scan_*</code> Implementation<a class="headerlink" href="#example-matrix_scan_-implementation" title="Permanent link">&para;</a></h3>
<p>This example has been deliberately omitted. You should understand enough about QMK internals to write this without an example before hooking into such a performance sensitive area. If you need help please <a href="https://github.com/qmk/qmk_firmware/issues/new">open an issue</a> or <a href="https://discord.gg/Uq7gcHh">chat with us on Discord</a>.</p>
<h3 id="matrix_scan_-function-documentation"><code>matrix_scan_*</code> Function Documentation<a class="headerlink" href="#matrix_scan_-function-documentation" title="Permanent link">&para;</a></h3>
<ul>
<li>Keyboard/Revision: <code>void matrix_scan_kb(void)</code></li>
<li>Keymap: <code>void matrix_scan_user(void)</code></li>
</ul>
<p>This function gets called at every matrix scan, which is basically as often as the MCU can handle. Be careful what you put here, as it will get run a lot.</p>
<p>You should use this function if you need custom matrix scanning code. It can also be used for custom status output (such as LEDs or a display) or other functionality that you want to trigger regularly even when the user isn't typing.</p>
<h1 id="keyboard-housekeeping">Keyboard housekeeping<a class="headerlink" href="#keyboard-housekeeping" title="Permanent link">&para;</a></h1>
<ul>
<li>Keyboard/Revision: <code>void housekeeping_task_kb(void)</code></li>
<li>Keymap: <code>void housekeeping_task_user(void)</code></li>
</ul>
<p>This function gets called at the end of all QMK processing, before starting the next iteration. You can safely assume that QMK has dealt with the last matrix scan at the time that these functions are invoked -- layer states have been updated, USB reports have been sent, LEDs have been updated, and displays have been drawn.</p>
<p>Similar to <code>matrix_scan_*</code>, these are called as often as the MCU can handle. To keep your board responsive, it's suggested to do as little as possible during these function calls, potentially throtting their behaviour if you do indeed require implementing something special.</p>
<h1 id="keyboard-idlingwake-code">Keyboard Idling/Wake Code<a class="headerlink" href="#keyboard-idlingwake-code" title="Permanent link">&para;</a></h1>
<p>If the board supports it, it can be "idled", by stopping a number of functions.  A good example of this is RGB lights or backlights.   This can save on power consumption, or may be better behavior for your keyboard.</p>
<p>This is controlled by two functions: <code>suspend_power_down_*</code> and <code>suspend_wakeup_init_*</code>, which are called when the system board is idled and when it wakes up, respectively.</p>
<h3 id="example-suspend_power_down_user-and-suspend_wakeup_init_user-implementation">Example suspend_power_down_user() and suspend_wakeup_init_user() Implementation<a class="headerlink" href="#example-suspend_power_down_user-and-suspend_wakeup_init_user-implementation" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kt">void</span> <span class="nf">suspend_power_down_user</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">rgb_matrix_set_suspend_state</span><span class="p">(</span><span class="nb">true</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">suspend_wakeup_init_user</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">rgb_matrix_set_suspend_state</span><span class="p">(</span><span class="nb">false</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="keyboard-suspendwake-function-documentation">Keyboard suspend/wake  Function Documentation<a class="headerlink" href="#keyboard-suspendwake-function-documentation" title="Permanent link">&para;</a></h3>
<ul>
<li>Keyboard/Revision: <code>void suspend_power_down_kb(void)</code> and <code>void suspend_wakeup_init_user(void)</code></li>
<li>Keymap: <code>void suspend_power_down_kb(void)</code> and <code>void suspend_wakeup_init_user(void)</code></li>
</ul>
<h1 id="layer-change-code">Layer Change Code<a class="headerlink" href="#layer-change-code" title="Permanent link">&para;</a></h1>
<p>This runs code every time that the layers get changed.  This can be useful for layer indication, or custom layer handling.</p>
<h3 id="example-layer_state_set_-implementation">Example <code>layer_state_set_*</code> Implementation<a class="headerlink" href="#example-layer_state_set_-implementation" title="Permanent link">&para;</a></h3>
<p>This example shows how to set the <a href="../feature_rgblight/">RGB Underglow</a> lights based on the layer, using the Planck as an example.</p>
<div class="highlight"><pre><span></span><code><span class="n">layer_state_t</span> <span class="nf">layer_state_set_user</span><span class="p">(</span><span class="n">layer_state_t</span> <span class="n">state</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">switch</span> <span class="p">(</span><span class="n">get_highest_layer</span><span class="p">(</span><span class="n">state</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">case</span> <span class="nl">_RAISE</span><span class="p">:</span>
        <span class="n">rgblight_setrgb</span> <span class="p">(</span><span class="mh">0x00</span><span class="p">,</span>  <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0xFF</span><span class="p">);</span>
        <span class="k">break</span><span class="p">;</span>
    <span class="k">case</span> <span class="nl">_LOWER</span><span class="p">:</span>
        <span class="n">rgblight_setrgb</span> <span class="p">(</span><span class="mh">0xFF</span><span class="p">,</span>  <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">);</span>
        <span class="k">break</span><span class="p">;</span>
    <span class="k">case</span> <span class="nl">_PLOVER</span><span class="p">:</span>
        <span class="n">rgblight_setrgb</span> <span class="p">(</span><span class="mh">0x00</span><span class="p">,</span>  <span class="mh">0xFF</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">);</span>
        <span class="k">break</span><span class="p">;</span>
    <span class="k">case</span> <span class="nl">_ADJUST</span><span class="p">:</span>
        <span class="n">rgblight_setrgb</span> <span class="p">(</span><span class="mh">0x7A</span><span class="p">,</span>  <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0xFF</span><span class="p">);</span>
        <span class="k">break</span><span class="p">;</span>
    <span class="k">default</span><span class="o">:</span> <span class="c1">//  for any other layers, or the default layer</span>
        <span class="n">rgblight_setrgb</span> <span class="p">(</span><span class="mh">0x00</span><span class="p">,</span>  <span class="mh">0xFF</span><span class="p">,</span> <span class="mh">0xFF</span><span class="p">);</span>
        <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="k">return</span> <span class="n">state</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>Use the <code>IS_LAYER_ON_STATE(state, layer)</code> and <code>IS_LAYER_OFF_STATE(state, layer)</code> macros to check the status of a particular layer.</p>
<p>Outside of <code>layer_state_set_*</code> functions, you can use the <code>IS_LAYER_ON(layer)</code> and <code>IS_LAYER_OFF(layer)</code> macros to check global layer state.</p>
<h3 id="layer_state_set_-function-documentation"><code>layer_state_set_*</code> Function Documentation<a class="headerlink" href="#layer_state_set_-function-documentation" title="Permanent link">&para;</a></h3>
<ul>
<li>Keyboard/Revision: <code>layer_state_t layer_state_set_kb(layer_state_t state)</code></li>
<li>Keymap: <code>layer_state_t layer_state_set_user(layer_state_t state)</code></li>
</ul>
<p>The <code>state</code> is the bitmask of the active layers, as explained in the <a href="../keymap/#keymap-layer-status">Keymap Overview</a></p>
<h1 id="persistent-configuration-eeprom">Persistent Configuration (EEPROM)<a class="headerlink" href="#persistent-configuration-eeprom" title="Permanent link">&para;</a></h1>
<p>This allows you to configure persistent settings for your keyboard.  These settings are stored in the EEPROM of your controller, and are retained even after power loss. The settings can be read with <code>eeconfig_read_kb</code> and <code>eeconfig_read_user</code>, and can be written to using <code>eeconfig_update_kb</code> and <code>eeconfig_update_user</code>. This is useful for features that you want to be able to toggle (like toggling rgb layer indication).  Additionally, you can use <code>eeconfig_init_kb</code> and <code>eeconfig_init_user</code> to set the default values for the EEPROM. </p>
<p>The complicated part here, is that there are a bunch of ways that you can store and access data via EEPROM, and there is no "correct" way to do this.  However, you only have a DWORD (4 bytes) for each function.</p>
<p>Keep in mind that EEPROM has a limited number of writes. While this is very high, it's not the only thing writing to the EEPROM, and if you write too often, you can potentially drastically shorten the life of your MCU.</p>
<ul>
<li>If you don't understand the example, then you may want to avoid using this feature, as it is rather complicated. </li>
</ul>
<h3 id="example-implementation">Example Implementation<a class="headerlink" href="#example-implementation" title="Permanent link">&para;</a></h3>
<p>This is an example of how to add settings, and read and write it. We're using the user keymap for the example here.  This is a complex function, and has a lot going on.  In fact, it uses a lot of the above functions to work! </p>
<p>In your keymap.c file, add this to the top:
<div class="highlight"><pre><span></span><code><span class="k">typedef</span> <span class="k">union</span> <span class="p">{</span>
  <span class="kt">uint32_t</span> <span class="n">raw</span><span class="p">;</span>
  <span class="k">struct</span> <span class="p">{</span>
    <span class="kt">bool</span>     <span class="nl">rgb_layer_change</span> <span class="p">:</span><span class="mi">1</span><span class="p">;</span>
  <span class="p">};</span>
<span class="p">}</span> <span class="n">user_config_t</span><span class="p">;</span>

<span class="n">user_config_t</span> <span class="n">user_config</span><span class="p">;</span>
</code></pre></div></p>
<p>This sets up a 32 bit structure that we can store settings with in memory, and write to the EEPROM. Using this removes the need to define variables, since they're defined in this structure. Remember that <code>bool</code> (boolean) values use 1 bit, <code>uint8_t</code> uses 8 bits, <code>uint16_t</code> uses up 16 bits.  You can mix and match, but changing the order can cause issues, as it will change the values that are read and written. </p>
<p>We're using <code>rgb_layer_change</code>, for the <code>layer_state_set_*</code> function, and use <code>keyboard_post_init_user</code> and <code>process_record_user</code> to configure everything. </p>
<p>Now, using the <code>keyboard_post_init_user</code> code above, you want to add <code>eeconfig_read_user()</code> to it, to populate the structure you've just created. And you can then immediately use this structure to control functionality in your keymap.  And It should look like: 
<div class="highlight"><pre><span></span><code><span class="kt">void</span> <span class="nf">keyboard_post_init_user</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Call the keymap level matrix init.</span>

  <span class="c1">// Read the user config from EEPROM</span>
  <span class="n">user_config</span><span class="p">.</span><span class="n">raw</span> <span class="o">=</span> <span class="n">eeconfig_read_user</span><span class="p">();</span>

  <span class="c1">// Set default layer, if enabled</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">user_config</span><span class="p">.</span><span class="n">rgb_layer_change</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">rgblight_enable_noeeprom</span><span class="p">();</span>
    <span class="n">rgblight_sethsv_noeeprom_cyan</span><span class="p">();</span>
    <span class="n">rgblight_mode_noeeprom</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
The above function will use the EEPROM config immediately after reading it, to set the default layer's RGB color. The "raw" value of it is converted in a usable structure based on the "union" that you created above. </p>
<p><div class="highlight"><pre><span></span><code><span class="n">layer_state_t</span> <span class="nf">layer_state_set_user</span><span class="p">(</span><span class="n">layer_state_t</span> <span class="n">state</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">switch</span> <span class="p">(</span><span class="n">get_highest_layer</span><span class="p">(</span><span class="n">state</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">case</span> <span class="nl">_RAISE</span><span class="p">:</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">user_config</span><span class="p">.</span><span class="n">rgb_layer_change</span><span class="p">)</span> <span class="p">{</span> <span class="n">rgblight_sethsv_noeeprom_magenta</span><span class="p">();</span> <span class="n">rgblight_mode_noeeprom</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span> <span class="p">}</span>
        <span class="k">break</span><span class="p">;</span>
    <span class="k">case</span> <span class="nl">_LOWER</span><span class="p">:</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">user_config</span><span class="p">.</span><span class="n">rgb_layer_change</span><span class="p">)</span> <span class="p">{</span> <span class="n">rgblight_sethsv_noeeprom_red</span><span class="p">();</span> <span class="n">rgblight_mode_noeeprom</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span> <span class="p">}</span>
        <span class="k">break</span><span class="p">;</span>
    <span class="k">case</span> <span class="nl">_PLOVER</span><span class="p">:</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">user_config</span><span class="p">.</span><span class="n">rgb_layer_change</span><span class="p">)</span> <span class="p">{</span> <span class="n">rgblight_sethsv_noeeprom_green</span><span class="p">();</span> <span class="n">rgblight_mode_noeeprom</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span> <span class="p">}</span>
        <span class="k">break</span><span class="p">;</span>
    <span class="k">case</span> <span class="nl">_ADJUST</span><span class="p">:</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">user_config</span><span class="p">.</span><span class="n">rgb_layer_change</span><span class="p">)</span> <span class="p">{</span> <span class="n">rgblight_sethsv_noeeprom_white</span><span class="p">();</span> <span class="n">rgblight_mode_noeeprom</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span> <span class="p">}</span>
        <span class="k">break</span><span class="p">;</span>
    <span class="k">default</span><span class="o">:</span> <span class="c1">//  for any other layers, or the default layer</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">user_config</span><span class="p">.</span><span class="n">rgb_layer_change</span><span class="p">)</span> <span class="p">{</span> <span class="n">rgblight_sethsv_noeeprom_cyan</span><span class="p">();</span> <span class="n">rgblight_mode_noeeprom</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span> <span class="p">}</span>
        <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="k">return</span> <span class="n">state</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
This will cause the RGB underglow to be changed ONLY if the value was enabled.  Now to configure this value, create a new keycode for <code>process_record_user</code> called <code>RGB_LYR</code>. Additionally, we want to make sure that if you use the normal RGB codes, that it turns off  Using the example above, make it look this:
<div class="highlight"><pre><span></span><code><span class="kt">bool</span> <span class="nf">process_record_user</span><span class="p">(</span><span class="kt">uint16_t</span> <span class="n">keycode</span><span class="p">,</span> <span class="n">keyrecord_t</span> <span class="o">*</span><span class="n">record</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">switch</span> <span class="p">(</span><span class="n">keycode</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">case</span> <span class="nl">FOO</span><span class="p">:</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">record</span><span class="o">-&gt;</span><span class="n">event</span><span class="p">.</span><span class="n">pressed</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Do something when pressed</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// Do something else when release</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nb">false</span><span class="p">;</span> <span class="c1">// Skip all further processing of this key</span>
    <span class="k">case</span> <span class="nl">KC_ENTER</span><span class="p">:</span>
        <span class="c1">// Play a tone when enter is pressed</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">record</span><span class="o">-&gt;</span><span class="n">event</span><span class="p">.</span><span class="n">pressed</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">PLAY_SONG</span><span class="p">(</span><span class="n">tone_qwerty</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nb">true</span><span class="p">;</span> <span class="c1">// Let QMK send the enter press/release events</span>
    <span class="k">case</span> <span class="nl">RGB_LYR</span><span class="p">:</span>  <span class="c1">// This allows me to use underglow as layer indication, or as normal</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">record</span><span class="o">-&gt;</span><span class="n">event</span><span class="p">.</span><span class="n">pressed</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">user_config</span><span class="p">.</span><span class="n">rgb_layer_change</span> <span class="o">^=</span> <span class="mi">1</span><span class="p">;</span> <span class="c1">// Toggles the status</span>
            <span class="n">eeconfig_update_user</span><span class="p">(</span><span class="n">user_config</span><span class="p">.</span><span class="n">raw</span><span class="p">);</span> <span class="c1">// Writes the new status to EEPROM</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">user_config</span><span class="p">.</span><span class="n">rgb_layer_change</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// if layer state indication is enabled,</span>
                <span class="n">layer_state_set</span><span class="p">(</span><span class="n">layer_state</span><span class="p">);</span>   <span class="c1">// then immediately update the layer color</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
    <span class="k">case</span> <span class="n">RGB_MODE_FORWARD</span> <span class="p">...</span> <span class="nl">RGB_MODE_GRADIENT</span><span class="p">:</span> <span class="c1">// For any of the RGB codes (see quantum_keycodes.h, L400 for reference)</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">record</span><span class="o">-&gt;</span><span class="n">event</span><span class="p">.</span><span class="n">pressed</span><span class="p">)</span> <span class="p">{</span> <span class="c1">//This disables layer indication, as it&#39;s assumed that if you&#39;re changing this ... you want that disabled</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">user_config</span><span class="p">.</span><span class="n">rgb_layer_change</span><span class="p">)</span> <span class="p">{</span>        <span class="c1">// only if this is enabled</span>
                <span class="n">user_config</span><span class="p">.</span><span class="n">rgb_layer_change</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>  <span class="c1">// disable it, and</span>
                <span class="n">eeconfig_update_user</span><span class="p">(</span><span class="n">user_config</span><span class="p">.</span><span class="n">raw</span><span class="p">);</span> <span class="c1">// write the setings to EEPROM</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nb">true</span><span class="p">;</span> <span class="k">break</span><span class="p">;</span>
    <span class="k">default</span><span class="o">:</span>
      <span class="k">return</span> <span class="nb">true</span><span class="p">;</span> <span class="c1">// Process all other keycodes normally</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
And lastly, you want to add the <code>eeconfig_init_user</code> function, so that when the EEPROM is reset, you can specify default values, and even custom actions. To force an EEPROM reset, use the <code>EEP_RST</code> keycode or <a href="../feature_bootmagic/">Bootmagic</a> functionallity. For example, if you want to set rgb layer indication by default, and save the default valued. </p>
<div class="highlight"><pre><span></span><code><span class="kt">void</span> <span class="nf">eeconfig_init_user</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>  <span class="c1">// EEPROM is getting reset!</span>
  <span class="n">user_config</span><span class="p">.</span><span class="n">raw</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="n">user_config</span><span class="p">.</span><span class="n">rgb_layer_change</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span> <span class="c1">// We want this enabled by default</span>
  <span class="n">eeconfig_update_user</span><span class="p">(</span><span class="n">user_config</span><span class="p">.</span><span class="n">raw</span><span class="p">);</span> <span class="c1">// Write default value to EEPROM now</span>

  <span class="c1">// use the non noeeprom versions, to write these values to EEPROM too</span>
  <span class="n">rgblight_enable</span><span class="p">();</span> <span class="c1">// Enable RGB by default</span>
  <span class="n">rgblight_sethsv_cyan</span><span class="p">();</span>  <span class="c1">// Set it to CYAN by default</span>
  <span class="n">rgblight_mode</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span> <span class="c1">// set to solid by default</span>
<span class="p">}</span>
</code></pre></div>
<p>And you're done.  The RGB layer indication will only work if you want it to. And it will be saved, even after unplugging the board. And if you use any of the RGB codes, it will disable the layer indication, so that it stays on the mode and color that you set it to. </p>
<h3 id="eeconfig-function-documentation">'EECONFIG' Function Documentation<a class="headerlink" href="#eeconfig-function-documentation" title="Permanent link">&para;</a></h3>
<ul>
<li>Keyboard/Revision: <code>void eeconfig_init_kb(void)</code>, <code>uint32_t eeconfig_read_kb(void)</code> and <code>void eeconfig_update_kb(uint32_t val)</code></li>
<li>Keymap: <code>void eeconfig_init_user(void)</code>, <code>uint32_t eeconfig_read_user(void)</code> and <code>void eeconfig_update_user(uint32_t val)</code></li>
</ul>
<p>The <code>val</code> is the value of the data that you want to write to EEPROM.  And the <code>eeconfig_read_*</code> function return a 32 bit (DWORD) value from the EEPROM. </p>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Pie">
      
        
        <a href="../flashing/" class="md-footer__link md-footer__link--prev" aria-label="Anterior: Flasheando Firmware" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Anterior
              </span>
              Flasheando Firmware
            </div>
          </div>
        </a>
      
      
        
        <a href="../keymap/" class="md-footer__link md-footer__link--next" aria-label="Siguiente: Visión general del Keymap" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Siguiente
              </span>
              Visión general del Keymap
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.expand", "navigation.sections", "search.highlight", "search.share", "search.suggest"], "translations": {"clipboard.copy": "Copiar al portapapeles", "clipboard.copied": "Copiado al portapapeles", "search.config.lang": "es", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "B\u00fasqueda", "search.result.placeholder": "Teclee para comenzar b\u00fasqueda", "search.result.none": "No se encontraron documentos", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados", "search.result.more.one": "1 m\u00e1s en esta p\u00e1gina", "search.result.more.other": "# m\u00e1s en esta p\u00e1gina", "search.result.term.missing": "Falta", "select.version.title": "Seleccionar versi\u00f3n"}, "search": "../assets/javascripts/workers/search.409db549.min.js", "version": {"provider": "mike"}}</script>
    
    
      <script src="../assets/javascripts/bundle.56a63758.min.js"></script>
      
    
  </body>
</html>