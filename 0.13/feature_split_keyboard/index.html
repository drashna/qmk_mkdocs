
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="canonical" href="https://docs.qmk.fm/0.13/feature_split_keyboard/">
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.2, mkdocs-material-7.2.4">
    
    
      
        <title>Split Keyboard - QMK Firmware Docs</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.f7f47774.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.3f5d1f46.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
    
      


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    <script>function __prefix(e){return new URL("..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#split-keyboard" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="QMK Firmware Docs" class="md-header__button md-logo" aria-label="QMK Firmware Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            QMK Firmware Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Split Keyboard
            
          </span>
        </div>
      </div>
    </div>
    
    
      <div class="md-header__option">
        <div class="md-select">
          
          <button class="md-header__button md-icon" aria-label="Select language">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.52 17.52 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04M18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12m-2.62 7 1.62-4.33L19.12 17h-3.24z"/></svg>
          </button>
          <div class="md-select__inner">
            <ul class="md-select__list">
              
                <li class="md-select__item">
                  <a href="../README.md" hreflang="en" class="md-select__link">
                    English
                  </a>
                </li>
                
                <li class="md-select__item">
                  <a href="../zh-cn/" hreflang="zh" class="md-select__link">
                    中文
                  </a>
                </li>
                
                <li class="md-select__item">
                  <a href="../es/" hreflang="es" class="md-select__link">
                    Español
                  </a>
                </li>
                
                <li class="md-select__item">
                  <a href="../fr-fr/" hreflang="fr" class="md-select__link">
                    Français
                  </a>
                </li>
                
                <li class="md-select__item">
                  <a href="../he-il/" hreflang="he" class="md-select__link">
                    עברית
                  </a>
                </li>
                
                <li class="md-select__item">
                  <a href="../pt-br/" hreflang="pt" class="md-select__link">
                    Português
                  </a>
                </li>
                
                <li class="md-select__item">
                  <a href="../ru-ru/" hreflang="ru" class="md-select__link">
                    Русский
                  </a>
                </li>
                
                <li class="md-select__item">
                  <a href="../ja/" hreflang="ja" class="md-select__link">
                    日本語
                  </a>
                </li>
                
            </ul>
          </div>
        </div>
      </div>
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/qmk/qmk_firmware/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    qmk/qmk_firmware
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href=".." class="md-tabs__link">
      Quantum Mechanical Keyboard Firmware
    </a>
  </li>

      
    </ul>
  </div>
</nav>
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="QMK Firmware Docs" class="md-nav__button md-logo" aria-label="QMK Firmware Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    QMK Firmware Docs
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/qmk/qmk_firmware/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    qmk/qmk_firmware
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Quantum Mechanical Keyboard Firmware
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#compatibility-overview" class="md-nav__link">
    Compatibility Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hardware-configuration" class="md-nav__link">
    Hardware Configuration
  </a>
  
    <nav class="md-nav" aria-label="Hardware Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#required-hardware" class="md-nav__link">
    Required Hardware
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#serial-wiring" class="md-nav__link">
    Serial Wiring
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#i2c-wiring" class="md-nav__link">
    I2C Wiring
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#firmware-configuration" class="md-nav__link">
    Firmware Configuration
  </a>
  
    <nav class="md-nav" aria-label="Firmware Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setting-handedness" class="md-nav__link">
    Setting Handedness
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#communication-options" class="md-nav__link">
    Communication Options
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hardware-configuration-options" class="md-nav__link">
    Hardware Configuration Options
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hardware-considerations-and-mods" class="md-nav__link">
    Hardware Considerations and Mods
  </a>
  
    <nav class="md-nav" aria-label="Hardware Considerations and Mods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#teensy-boards" class="md-nav__link">
    Teensy boards
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#additional-resources" class="md-nav__link">
    Additional Resources
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/qmk/qmk_firmware/edit/master/docs/feature_split_keyboard.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="split-keyboard">Split Keyboard<a class="headerlink" href="#split-keyboard" title="Permanent link">&para;</a></h1>
<p>Many keyboards in the QMK Firmware repo are "split" keyboards. They use two controllers—one plugging into USB, and the second connected by a serial or an I<sup>2</sup>C connection over a TRRS or similar cable. </p>
<p>Split keyboards can have a lot of benefits, but there is some additional work needed to get them enabled.  </p>
<p>QMK Firmware has a generic implementation that is usable by any board, as well as numerous board specific implementations. </p>
<p>For this, we will mostly be talking about the generic implementation used by the Let's Split and other keyboards. </p>
<p>!&gt; ARM is not yet fully supported for Split Keyboards and has many limitations. Progress is being made, but we have not yet reached 100% feature parity.</p>
<h2 id="compatibility-overview">Compatibility Overview<a class="headerlink" href="#compatibility-overview" title="Permanent link">&para;</a></h2>
<table>
<thead>
<tr>
<th>Transport</th>
<th>AVR</th>
<th>ARM</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="../serial_driver/">'serial'</a></td>
<td>:heavy_check_mark:</td>
<td>:white_check_mark: <sup>1</sup></td>
</tr>
<tr>
<td>I2C</td>
<td>:heavy_check_mark:</td>
<td></td>
</tr>
</tbody>
</table>
<p>Notes:</p>
<ol>
<li>Both hardware and software limitations are detailed within the <a href="../serial_driver/">driver documentation</a>.</li>
</ol>
<h2 id="hardware-configuration">Hardware Configuration<a class="headerlink" href="#hardware-configuration" title="Permanent link">&para;</a></h2>
<p>This assumes that you're using two Pro Micro-compatible controllers, and are using TRRS jacks to connect to two halves. </p>
<h3 id="required-hardware">Required Hardware<a class="headerlink" href="#required-hardware" title="Permanent link">&para;</a></h3>
<p>Apart from diodes and key switches for the keyboard matrix in each half, you will need 2x TRRS sockets and 1x TRRS cable.</p>
<p>Alternatively, you can use any sort of cable and socket that has at least 3 wires. </p>
<p>If you want to use I<sup>2</sup>C to communicate between halves, you will need a cable with at least 4 wires and 2x 4.7kΩ pull-up resistors.</p>
<h4 id="considerations">Considerations<a class="headerlink" href="#considerations" title="Permanent link">&para;</a></h4>
<p>The most commonly used connection is a TRRS cable and jacks.  These provide 4 wires, making them very useful for split keyboards, and are easy to find. </p>
<p>However, since one of the wires carries VCC, this means that the boards are not hot pluggable. You should always disconnect the board from USB before unplugging and plugging in TRRS cables, or you can short the controller, or worse. </p>
<p>Another option is to use phone cables (as in, old school RJ-11/RJ-14 cables). Make sure that you use one that actually supports 4 wires/lanes.  </p>
<p>However, USB cables, SATA cables, and even just 4 wires have been known to be used for communication between the controllers. </p>
<p>!&gt; Using USB cables for communication between the controllers works just fine, but the connector could be mistaken for a normal USB connection and potentially short out the keyboard, depending on how it's wired.  For this reason, they are not recommended for connecting split keyboards.  </p>
<h3 id="serial-wiring">Serial Wiring<a class="headerlink" href="#serial-wiring" title="Permanent link">&para;</a></h3>
<p>The 3 wires of the TRS/TRRS cable need to connect GND, VCC, and D0/D1/D2/D3 (aka PD0/PD1/PD2/PD3) between the two Pro Micros. </p>
<p>?&gt; Note that the pin used here is actually set by <code>SOFT_SERIAL_PIN</code> below.</p>
<p><img alt="sk-pd0-connection-mono" src="https://user-images.githubusercontent.com/2170248/92296488-28e9ad80-ef70-11ea-98be-c40cb48a0319.JPG" width="48%"/>
<img alt="sk-pd2-connection-mono" src="https://user-images.githubusercontent.com/2170248/92296490-2d15cb00-ef70-11ea-801f-5ace313013e6.JPG" width="48%"/></p>
<h3 id="i2c-wiring">I<sup>2</sup>C Wiring<a class="headerlink" href="#i2c-wiring" title="Permanent link">&para;</a></h3>
<p>The 4 wires of the TRRS cable need to connect GND, VCC, and SCL and SDA (aka PD0/pin 3 and PD1/pin 2, respectively) between the two Pro Micros. </p>
<p>The pull-up resistors may be placed on either half. If you wish to use the halves independently, it is also possible to use 4 resistors and have the pull-ups in both halves.
Note that the total resistance for the connected system should be within spec at 2.2k-10kOhm, with an 'ideal' at 4.7kOhm, regardless of the placement and number.</p>
<p><img alt="sk-i2c-connection-mono" src="https://user-images.githubusercontent.com/2170248/92297182-92b98580-ef77-11ea-9d7d-d6033914af43.JPG" width="50%"/></p>
<h2 id="firmware-configuration">Firmware Configuration<a class="headerlink" href="#firmware-configuration" title="Permanent link">&para;</a></h2>
<p>To enable the split keyboard feature, add the following to your <code>rules.mk</code>: </p>
<div class="codehilite"><pre><span></span><code><span class="nv">SPLIT_KEYBOARD</span> <span class="o">=</span> yes
</code></pre></div>

<p>If you're using a custom transport (communication method), then you will also need to add: </p>
<div class="codehilite"><pre><span></span><code><span class="nv">SPLIT_TRANSPORT</span> <span class="o">=</span> custom
</code></pre></div>

<h3 id="setting-handedness">Setting Handedness<a class="headerlink" href="#setting-handedness" title="Permanent link">&para;</a></h3>
<p>By default, the firmware does not know which side is which; it needs some help to determine that. There are several ways to do this, listed in order of precedence.</p>
<h4 id="handedness-by-pin">Handedness by Pin<a class="headerlink" href="#handedness-by-pin" title="Permanent link">&para;</a></h4>
<p>You can configure the firmware to read a pin on the controller to determine handedness.  To do this, add the following to your <code>config.h</code> file:</p>
<div class="codehilite"><pre><span></span><code><span class="cp">#define SPLIT_HAND_PIN B7</span>
</code></pre></div>

<p>This will read the specified pin. If it's high, then the controller assumes it is the left hand, and if it's low, it's assumed to be the right side. </p>
<h4 id="handedness-by-matrix-pin">Handedness by Matrix Pin<a class="headerlink" href="#handedness-by-matrix-pin" title="Permanent link">&para;</a></h4>
<p>You can configure the firmware to read key matrix pins on the controller to determine handedness.  To do this, add the following to your <code>config.h</code> file:</p>
<div class="codehilite"><pre><span></span><code><span class="cp">#define SPLIT_HAND_MATRIX_GRID D0, F1</span>
</code></pre></div>

<p>The first pin is the output pin and the second is the input pin.</p>
<p>Some keyboards have unused intersections in the key matrix. This setting uses one of these unused intersections to determine the handness.</p>
<p>Normally, when a diode is connected to an intersection, it is judged to be left. If you add the following definition, it will be judged to be right.</p>
<div class="codehilite"><pre><span></span><code><span class="cp">#define SPLIT_HAND_MATRIX_GRID_LOW_IS_RIGHT</span>
</code></pre></div>

<p>Note that adding a diode at a previously unused intersection will effectively tell the firmware that there is a key held down at that point. You can instruct qmk to ignore that intersection by defining <code>MATRIX_MASKED</code> and then defining a <code>matrix_row_t matrix_mask[MATRIX_ROWS]</code> array in your keyboard config. Each bit of a single value (starting form the least-significant bit) is used to tell qmk whether or not to pay attention to key presses at that intersection.</p>
<p>While <code>MATRIX_MASKED</code> isn't necessary to use <code>SPLIT_HAND_MATRIX_GRID</code> successfully, without it you may experience issues trying to suspend your computer with your keyboard attached as the matrix will always report at least one key-press.</p>
<h4 id="handedness-by-eeprom">Handedness by EEPROM<a class="headerlink" href="#handedness-by-eeprom" title="Permanent link">&para;</a></h4>
<p>This method sets the keyboard's handedness by setting a flag in the persistent storage (<code>EEPROM</code>).  This is checked when the controller first starts up, and determines what half the keyboard is, and how to orient the keyboard layout. </p>
<p>To enable this method, add the following to your <code>config.h</code> file: </p>
<div class="codehilite"><pre><span></span><code><span class="cp">#define EE_HANDS</span>
</code></pre></div>

<p>However, you'll have to flash the EEPROM files for the correct hand to each controller.  You can do this manually, or there are targets for avrdude and dfu to do this, while flashing the firmware: </p>
<ul>
<li><code>:avrdude-split-left</code></li>
<li><code>:avrdude-split-right</code></li>
<li><code>:dfu-split-left</code></li>
<li><code>:dfu-split-right</code></li>
<li><code>:dfu-util-split-left</code></li>
<li><code>:dfu-util-split-right</code></li>
</ul>
<p>Example:</p>
<div class="codehilite"><pre><span></span><code>make crkbd:default:avrdude-split-left
</code></pre></div>

<p>This setting is not changed when re-initializing the EEPROM using the <code>EEP_RST</code> key, or using the <code>eeconfig_init()</code> function.  However, if you reset the EEPROM outside of the firmware's built in options (such as flashing a file that overwrites the <code>EEPROM</code>, like how the <a href="">QMK Toolbox</a>'s "Reset EEPROM" button works), you'll need to re-flash the controller with the <code>EEPROM</code> files. </p>
<p>You can find the <code>EEPROM</code> files in the QMK firmware repo, <a href="https://github.com/qmk/qmk_firmware/tree/master/quantum/split_common">here</a>. </p>
<h4 id="handedness-by-define">Handedness by <code>#define</code><a class="headerlink" href="#handedness-by-define" title="Permanent link">&para;</a></h4>
<p>You can set the handedness at compile time.  This is done by adding the following to your <code>config.h</code> file:</p>
<div class="codehilite"><pre><span></span><code><span class="cp">#define MASTER_RIGHT</span>
</code></pre></div>

<p>or </p>
<div class="codehilite"><pre><span></span><code><span class="cp">#define MASTER_LEFT</span>
</code></pre></div>

<p>If neither are defined, the handedness defaults to <code>MASTER_LEFT</code>.</p>
<h3 id="communication-options">Communication Options<a class="headerlink" href="#communication-options" title="Permanent link">&para;</a></h3>
<p>Because not every split keyboard is identical, there are a number of additional options that can be configured in your <code>config.h</code> file.</p>
<div class="codehilite"><pre><span></span><code><span class="cp">#define USE_I2C</span>
</code></pre></div>

<p>This enables I<sup>2</sup>C support for split keyboards. This isn't strictly for communication, but can be used for OLED or other I<sup>2</sup>C-based devices. </p>
<div class="codehilite"><pre><span></span><code><span class="cp">#define SOFT_SERIAL_PIN D0</span>
</code></pre></div>

<p>This sets the pin to be used for serial communication. If you're not using serial, you shouldn't need to define this.  </p>
<p>However, if you are using serial and I<sup>2</sup>C on the board, you will need to set this, and to something other than D0 and D1 (as these are used for I<sup>2</sup>C communication).</p>
<div class="codehilite"><pre><span></span><code><span class="cp">#define SELECT_SOFT_SERIAL_SPEED {#}`</span>
</code></pre></div>

<p>If you're having issues with serial communication, you can change this value, as it controls the communication speed for serial.  The default is 1, and the possible values are:</p>
<ul>
<li><strong><code>0</code></strong>: about 189kbps (Experimental only)</li>
<li><strong><code>1</code></strong>: about 137kbps (default)</li>
<li><strong><code>2</code></strong>: about 75kbps</li>
<li><strong><code>3</code></strong>: about 39kbps</li>
<li><strong><code>4</code></strong>: about 26kbps</li>
<li><strong><code>5</code></strong>: about 20kbps</li>
</ul>
<div class="codehilite"><pre><span></span><code><span class="cp">#define SPLIT_MODS_ENABLE</span>
</code></pre></div>

<p>This enables transmitting modifier state (normal, weak and oneshot) to the non
primary side of the split keyboard.  This adds a few bytes of data to the split
communication protocol and may impact the matrix scan speed when enabled.
The purpose of this feature is to support cosmetic use of modifer state (e.g.
displaying status on an OLED screen).</p>
<div class="codehilite"><pre><span></span><code><span class="cp">#define SPLIT_TRANSPORT_MIRROR</span>
</code></pre></div>

<p>This mirrors the master side matrix to the slave side for features that react or require knowledge of master side key presses on the slave side.  This adds a few bytes of data to the split communication protocol and may impact the matrix scan speed when enabled. The purpose of this feature is to support cosmetic use of key events (e.g. RGB reacting to Keypresses).</p>
<h3 id="hardware-configuration-options">Hardware Configuration Options<a class="headerlink" href="#hardware-configuration-options" title="Permanent link">&para;</a></h3>
<p>There are some settings that you may need to configure, based on how the hardware is set up. </p>
<div class="codehilite"><pre><span></span><code><span class="cp">#define MATRIX_ROW_PINS_RIGHT { &lt;row pins&gt; }</span>
<span class="cp">#define MATRIX_COL_PINS_RIGHT { &lt;col pins&gt; }</span>
</code></pre></div>

<p>This allows you to specify a different set of pins for the matrix on the right side.  This is useful if you have a board with differently-shaped halves that requires a different configuration (such as Keebio's Quefrency).</p>
<div class="codehilite"><pre><span></span><code><span class="cp">#define DIRECT_PINS_RIGHT { { F1, F0, B0, C7 }, { F4, F5, F6, F7 } }</span>
</code></pre></div>

<p>This allows you to specify a different set of direct pins for the right side.</p>
<div class="codehilite"><pre><span></span><code><span class="cp">#define ENCODERS_PAD_A_RIGHT { encoder1a, encoder2a }</span>
<span class="cp">#define ENCODERS_PAD_B_RIGHT { encoder1b, encoder2b }</span>
</code></pre></div>

<p>This allows you to specify a different set of encoder pins for the right side.</p>
<div class="codehilite"><pre><span></span><code><span class="cp">#define RGBLIGHT_SPLIT</span>
</code></pre></div>

<p>This option enables synchronization of the RGB Light modes between the controllers of the split keyboard.  This is for keyboards that have RGB LEDs that are directly wired to the controller (that is, they are not using the "extra data" option on the TRRS cable).</p>
<div class="codehilite"><pre><span></span><code><span class="cp">#define RGBLED_SPLIT { 6, 6 }</span>
</code></pre></div>

<p>This sets how many LEDs are directly connected to each controller.  The first number is the left side, and the second number is the right side.  </p>
<p>?&gt; This setting implies that <code>RGBLIGHT_SPLIT</code> is enabled, and will forcibly enable it, if it's not.</p>
<div class="codehilite"><pre><span></span><code><span class="cp">#define SPLIT_USB_DETECT</span>
</code></pre></div>

<p>Enabling this option changes the startup behavior to listen for an active USB communication to delegate which part is master and which is slave. With this option enabled and theres's USB communication, then that half assumes it is the master, otherwise it assumes it is the slave.</p>
<p>Without this option, the master is the half that can detect voltage on the physical USB connection (VBUS detection).</p>
<p>Enabled by default on ChibiOS/ARM.</p>
<p>?&gt; This setting will stop the ability to demo using battery packs.</p>
<div class="codehilite"><pre><span></span><code><span class="cp">#define SPLIT_USB_TIMEOUT 2000</span>
</code></pre></div>

<p>This sets the maximum timeout when detecting master/slave when using <code>SPLIT_USB_DETECT</code>.</p>
<div class="codehilite"><pre><span></span><code><span class="cp">#define SPLIT_USB_TIMEOUT_POLL 10</span>
</code></pre></div>

<p>This sets the poll frequency when detecting master/slave when using <code>SPLIT_USB_DETECT</code></p>
<h2 id="hardware-considerations-and-mods">Hardware Considerations and Mods<a class="headerlink" href="#hardware-considerations-and-mods" title="Permanent link">&para;</a></h2>
<p>Master/slave delegation is made either by detecting voltage on VBUS connection or waiting for USB communication (<code>SPLIT_USB_DETECT</code>). Pro Micro boards can use VBUS detection out of the box and be used with or without <code>SPLIT_USB_DETECT</code>.</p>
<p>Many ARM boards, but not all, do not support VBUS detection. Because it is common that ARM boards lack VBUS detection, <code>SPLIT_USB_DETECT</code> is automatically defined on ARM targets (technically when ChibiOS is targetted).</p>
<h3 id="teensy-boards">Teensy boards<a class="headerlink" href="#teensy-boards" title="Permanent link">&para;</a></h3>
<p>Teensy boards lack VBUS detection out of the box and must have <code>SPLIT_USB_DETECT</code> defined. With the Teensy 2.0 and Teensy++ 2.0, there is a simple hardware mod that you can perform to add VBUS detection, so you don't need the <code>SPLIT_USB_DETECT</code> option.</p>
<p>You'll only need a few things:</p>
<ul>
<li>A knife (x-acto knife, ideally)</li>
<li>A solder station or hot air station</li>
<li>An appropriate Schottky diode, such as the <a href="https://www.digikey.com/en/products/detail/nexperia-usa-inc/PMEG2005EH,115/1589924">PMEG2005EH</a></li>
</ul>
<p>You'll need to cut the small trace between the 5V and center pads on the back of the Teensy.</p>
<p>Once you have done that, you will want to solder the diode from the 5V pad to the center pad.</p>
<p>You may need to use the 5V pad from the regulator block above as the pads were too small and placed too closely together to place the Schottky diode properly.</p>
<p><img alt="Teensy++ 2.0" src="https://i.imgur.com/BPEC5n5.png" /></p>
<h2 id="additional-resources">Additional Resources<a class="headerlink" href="#additional-resources" title="Permanent link">&para;</a></h2>
<p>Nicinabox has a <a href="https://github.com/nicinabox/lets-split-guide">very nice and detailed guide</a> for the Let's Split keyboard, that covers most everything you need to know, including troubleshooting information. </p>
<p>However, the RGB Light section is out of date, as it was written long before the RGB Split code was added to QMK Firmware. Instead, wire each strip up directly to the controller.</p>
<!-- I may port this information later, but for now ... it's very nice, and covers everything -->
                
              
              
                


              
            </article>
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" data-md-state="hidden">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg>
            Back to top
          </a>
        
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.expand", "navigation.instant", "navigation.sections", "navigation.tabs", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../assets/javascripts/workers/search.709b4209.min.js", "version": {"provider": "mike"}}</script>
    
    
      <script src="../assets/javascripts/bundle.febc23d1.min.js"></script>
      
    
  </body>
</html>