
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="canonical" href="https://docs.qmk.fm/0.13/hardware_avr/">
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.2, mkdocs-material-7.2.4">
    
    
      
        <title>Keyboards with AVR Processors - QMK Firmware Docs</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.f7f47774.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.3f5d1f46.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
    
      


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    <script>function __prefix(e){return new URL("..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#keyboards-with-avr-processors" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="QMK Firmware Docs" class="md-header__button md-logo" aria-label="QMK Firmware Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            QMK Firmware Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Keyboards with AVR Processors
            
          </span>
        </div>
      </div>
    </div>
    
    
      <div class="md-header__option">
        <div class="md-select">
          
          <button class="md-header__button md-icon" aria-label="Select language">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.52 17.52 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04M18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12m-2.62 7 1.62-4.33L19.12 17h-3.24z"/></svg>
          </button>
          <div class="md-select__inner">
            <ul class="md-select__list">
              
                <li class="md-select__item">
                  <a href="../README.md" hreflang="en" class="md-select__link">
                    English
                  </a>
                </li>
                
                <li class="md-select__item">
                  <a href="../zh-cn/" hreflang="zh" class="md-select__link">
                    中文
                  </a>
                </li>
                
                <li class="md-select__item">
                  <a href="../es/" hreflang="es" class="md-select__link">
                    Español
                  </a>
                </li>
                
                <li class="md-select__item">
                  <a href="../fr-fr/" hreflang="fr" class="md-select__link">
                    Français
                  </a>
                </li>
                
                <li class="md-select__item">
                  <a href="../he-il/" hreflang="he" class="md-select__link">
                    עברית
                  </a>
                </li>
                
                <li class="md-select__item">
                  <a href="../pt-br/" hreflang="pt" class="md-select__link">
                    Português
                  </a>
                </li>
                
                <li class="md-select__item">
                  <a href="../ru-ru/" hreflang="ru" class="md-select__link">
                    Русский
                  </a>
                </li>
                
                <li class="md-select__item">
                  <a href="../ja/" hreflang="ja" class="md-select__link">
                    日本語
                  </a>
                </li>
                
            </ul>
          </div>
        </div>
      </div>
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/qmk/qmk_firmware/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    qmk/qmk_firmware
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href=".." class="md-tabs__link">
      Quantum Mechanical Keyboard Firmware
    </a>
  </li>

      
    </ul>
  </div>
</nav>
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="QMK Firmware Docs" class="md-nav__button md-logo" aria-label="QMK Firmware Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    QMK Firmware Docs
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/qmk/qmk_firmware/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    qmk/qmk_firmware
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Quantum Mechanical Keyboard Firmware
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#adding-your-avr-keyboard-to-qmk" class="md-nav__link">
    Adding Your AVR Keyboard to QMK
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#readmemd" class="md-nav__link">
    readme.md
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#keyboardc" class="md-nav__link">
    &lt;keyboard&gt;.c
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#keyboardh" class="md-nav__link">
    &lt;keyboard&gt;.h
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configh" class="md-nav__link">
    config.h
  </a>
  
    <nav class="md-nav" aria-label="config.h">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hardware-configuration" class="md-nav__link">
    Hardware Configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#keyboard-matrix-configuration" class="md-nav__link">
    Keyboard Matrix Configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#backlight-configuration" class="md-nav__link">
    Backlight Configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#other-configuration-options" class="md-nav__link">
    Other Configuration Options
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rulesmk" class="md-nav__link">
    rules.mk
  </a>
  
    <nav class="md-nav" aria-label="rules.mk">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mcu-options" class="md-nav__link">
    MCU Options
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bootloaders" class="md-nav__link">
    Bootloaders
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#build-options" class="md-nav__link">
    Build Options
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/qmk/qmk_firmware/edit/master/docs/hardware_avr.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="keyboards-with-avr-processors">Keyboards with AVR Processors<a class="headerlink" href="#keyboards-with-avr-processors" title="Permanent link">&para;</a></h1>
<p>This page describes the support for for AVR processors in QMK. AVR processors include the atmega32u4, atmega32u2, at90usb1286, and other processors from Atmel Corporation. AVR processors are 8-bit MCUs that are designed to be easy to work with. The most common AVR processors in keyboards have on-board USB and plenty of GPIO for supporting large keyboard matrices. They are the most popular MCU for use in keyboards today.</p>
<p>If you have not yet you should read the <a href="../hardware_keyboard_guidelines/">Keyboard Guidelines</a> to get a sense of how keyboards fit into QMK.</p>
<h2 id="adding-your-avr-keyboard-to-qmk">Adding Your AVR Keyboard to QMK<a class="headerlink" href="#adding-your-avr-keyboard-to-qmk" title="Permanent link">&para;</a></h2>
<p>QMK has a number of features to simplify working with AVR keyboards. For most keyboards you don't have to write a single line of code. To get started, run the <code>util/new_keyboard.sh</code> script:</p>
<div class="codehilite"><pre><span></span><code>$ ./util/new_keyboard.sh
Generating a new QMK keyboard directory

Keyboard Name: mycoolkb
Keyboard Type [avr]: 
Your Name [John Smith]: 

Copying base template files... done
Copying avr template files... done
Renaming keyboard files... done
Replacing %KEYBOARD% with mycoolkb... done
Replacing %YOUR_NAME% with John Smith... done

Created a new keyboard called mycoolkb.

To start working on things, cd into keyboards/mycoolkb,
or open the directory in your favourite text editor.
</code></pre></div>

<p>This will create all the files needed to support your new keyboard, and populate the settings with default values. Now you just need to customize it for your keyboard.</p>
<h2 id="readmemd"><code>readme.md</code><a class="headerlink" href="#readmemd" title="Permanent link">&para;</a></h2>
<p>This is where you'll describe your keyboard. Please follow the <a href="../documentation_templates/#keyboard-readmemd-template">Keyboard Readme Template</a> when writing your <code>readme.md</code>. You're encouraged to place an image at the top of your <code>readme.md</code>, please use an external service such as <a href="https://imgur.com">Imgur</a> to host the images.</p>
<h2 id="keyboardc"><code>&lt;keyboard&gt;.c</code><a class="headerlink" href="#keyboardc" title="Permanent link">&para;</a></h2>
<p>This is where all the custom logic for your keyboard goes. Many keyboards do not need to put anything at all in here. You can learn more about writing custom logic in <a href="../custom_quantum_functions/">Custom Quantum Functions</a>.</p>
<h2 id="keyboardh"><code>&lt;keyboard&gt;.h</code><a class="headerlink" href="#keyboardh" title="Permanent link">&para;</a></h2>
<p>This is the file you define your <a href="../feature_layouts/">Layout Macro(s)</a> in. At minimum you should have a <code>#define LAYOUT</code> for your keyboard that looks something like this:</p>
<div class="codehilite"><pre><span></span><code><span class="cp">#define LAYOUT(          \</span>
<span class="cp">      k00, k01, k02,     \</span>
<span class="cp">      k10,   k11         \</span>
<span class="cp">) {                      \</span>
<span class="cp">    { k00, k01,   k02 }, \</span>
<span class="cp">    { k10, KC_NO, k11 }, \</span>
<span class="cp">}</span>
</code></pre></div>

<p>The first half of the <code>LAYOUT</code> pre-processor macro defines the physical arrangement of keys. The second half of the macro defines the matrix the switches are connected to. This allows you to have a physical arrangement of keys that differs from the wiring matrix.</p>
<p>Each of the <code>k__</code> variables needs to be unique, and typically they follow the format <code>k&lt;row&gt;&lt;col&gt;</code>.</p>
<p>The physical matrix (the second half) must have a number of rows equaling <code>MATRIX_ROWS</code>, and each row must have exactly <code>MATRIX_COLS</code> elements in it. If you do not have this many physical keys you can use <code>KC_NO</code> to fill in the blank spots.</p>
<h2 id="configh"><code>config.h</code><a class="headerlink" href="#configh" title="Permanent link">&para;</a></h2>
<p>The <code>config.h</code> file is where you configure the hardware and feature set for your keyboard. There are a lot of options that can be placed in that file, too many to list there. For a complete overview of available options see the <a href="../config_options/">Config Options</a> page.</p>
<h3 id="hardware-configuration">Hardware Configuration<a class="headerlink" href="#hardware-configuration" title="Permanent link">&para;</a></h3>
<p>At the top of the <code>config.h</code> you'll find USB related settings. These control how your keyboard appears to the Operating System. If you don't have a good reason to change you should leave the <code>VENDOR_ID</code> as <code>0xFEED</code>. For the <code>PRODUCT_ID</code> you should pick a number that is not yet in use.</p>
<p>Do change the <code>MANUFACTURER</code> and <code>PRODUCT</code> lines to accurately reflect your keyboard.</p>
<div class="codehilite"><pre><span></span><code><span class="cp">#define VENDOR_ID       0xFEED</span>
<span class="cp">#define PRODUCT_ID      0x6060</span>
<span class="cp">#define DEVICE_VER      0x0001</span>
<span class="cp">#define MANUFACTURER    You</span>
<span class="cp">#define PRODUCT         my_awesome_keyboard</span>
</code></pre></div>

<p>?&gt; Windows and macOS will display the <code>MANUFACTURER</code> and <code>PRODUCT</code> in the list of USB devices. <code>lsusb</code> on Linux instead prefers the values in the list maintained by the <a href="http://www.linux-usb.org/usb-ids.html">USB ID Repository</a>. By default, it will only use <code>MANUFACTURER</code> and <code>PRODUCT</code> if the list does not contain that <code>VENDOR_ID</code> / <code>PRODUCT_ID</code>. <code>sudo lsusb -v</code> will show the values reported by the device, and they are also present in kernel logs after plugging it in.</p>
<h3 id="keyboard-matrix-configuration">Keyboard Matrix Configuration<a class="headerlink" href="#keyboard-matrix-configuration" title="Permanent link">&para;</a></h3>
<p>The next section of the <code>config.h</code> file deals with your keyboard's matrix. The first thing you should set is the matrix's size. This is usually, but not always, the same number of rows and columns as the physical key arrangement.</p>
<div class="codehilite"><pre><span></span><code><span class="cp">#define MATRIX_ROWS 2</span>
<span class="cp">#define MATRIX_COLS 3</span>
</code></pre></div>

<p>Once you've defined the size of your matrix you need to define which pins on your MCU are connected to rows and columns. To do so simply specify the names of those pins:</p>
<div class="codehilite"><pre><span></span><code><span class="cp">#define MATRIX_ROW_PINS { D0, D5 }</span>
<span class="cp">#define MATRIX_COL_PINS { F1, F0, B0 }</span>
<span class="cp">#define UNUSED_PINS</span>
</code></pre></div>

<p>The number of <code>MATRIX_ROW_PINS</code> entries must be the same as the number you assigned to <code>MATRIX_ROWS</code>, and likewise for <code>MATRIX_COL_PINS</code> and <code>MATRIX_COLS</code>. You do not have to specify <code>UNUSED_PINS</code>, but you can if you want to document what pins are open.</p>
<p>Finally, you can specify the direction your diodes point. This can be <code>COL2ROW</code> or <code>ROW2COL</code>.</p>
<div class="codehilite"><pre><span></span><code><span class="cp">#define DIODE_DIRECTION COL2ROW</span>
</code></pre></div>

<h4 id="direct-pin-matrix">Direct Pin Matrix<a class="headerlink" href="#direct-pin-matrix" title="Permanent link">&para;</a></h4>
<p>To configure a keyboard where each switch is connected to a separate pin and ground instead of sharing row and column pins, use <code>DIRECT_PINS</code>. The mapping defines the pins of each switch in rows and columns, from left to right. Must conform to the sizes within <code>MATRIX_ROWS</code> and <code>MATRIX_COLS</code>, use <code>NO_PIN</code> to fill in blank spaces. Overrides the behaviour of <code>DIODE_DIRECTION</code>, <code>MATRIX_ROW_PINS</code> and <code>MATRIX_COL_PINS</code>.</p>
<div class="codehilite"><pre><span></span><code><span class="c1">// #define MATRIX_ROW_PINS { D0, D5 }</span>
<span class="c1">// #define MATRIX_COL_PINS { F1, F0, B0 }</span>
<span class="cp">#define DIRECT_PINS { \</span>
<span class="cp">    { F1, E6, B0, B2, B3 }, \</span>
<span class="cp">    { F5, F0, B1, B7, D2 }, \</span>
<span class="cp">    { F6, F7, C7, D5, D3 }, \</span>
<span class="cp">    { B5, C6, B6, NO_PIN, NO_PIN } \</span>
<span class="cp">}</span>
<span class="cp">#define UNUSED_PINS</span>

<span class="cm">/* COL2ROW, ROW2COL */</span>
<span class="c1">//#define DIODE_DIRECTION</span>
</code></pre></div>

<h3 id="backlight-configuration">Backlight Configuration<a class="headerlink" href="#backlight-configuration" title="Permanent link">&para;</a></h3>
<p>QMK supports backlighting on most GPIO pins. A select few of these can be driven by the MCU in hardware. For more details see the <a href="../feature_backlight/">Backlight Documentation</a>.</p>
<div class="codehilite"><pre><span></span><code><span class="cp">#define BACKLIGHT_PIN B7</span>
<span class="cp">#define BACKLIGHT_LEVELS 3</span>
<span class="cp">#define BACKLIGHT_BREATHING</span>
<span class="cp">#define BREATHING_PERIOD 6</span>
</code></pre></div>

<h3 id="other-configuration-options">Other Configuration Options<a class="headerlink" href="#other-configuration-options" title="Permanent link">&para;</a></h3>
<p>There are a lot of features that can be configured or tuned in <code>config.h</code>. You should see the <a href="../config_options/">Config Options</a> page for more details.</p>
<h2 id="rulesmk"><code>rules.mk</code><a class="headerlink" href="#rulesmk" title="Permanent link">&para;</a></h2>
<p>You use the <code>rules.mk</code> file to tell QMK what files to build and what features to enable. If you are building around an atmega32u4 you can largely leave these defaults alone. If you are using another MCU you may have to tweak some parameters.</p>
<h3 id="mcu-options">MCU Options<a class="headerlink" href="#mcu-options" title="Permanent link">&para;</a></h3>
<p>These options tell the build system what CPU to build for. Be very careful if you change any of these settings, you can render your keyboard inoperable.</p>
<div class="codehilite"><pre><span></span><code><span class="nv">MCU</span> <span class="o">=</span> atmega32u4
<span class="nv">F_CPU</span> <span class="o">=</span> <span class="m">16000000</span>
<span class="nv">ARCH</span> <span class="o">=</span> AVR8
<span class="nv">F_USB</span> <span class="o">=</span> <span class="k">$(</span>F_CPU<span class="k">)</span>
<span class="nv">OPT_DEFS</span> <span class="o">+=</span> -DINTERRUPT_CONTROL_ENDPOINT
</code></pre></div>

<h3 id="bootloaders">Bootloaders<a class="headerlink" href="#bootloaders" title="Permanent link">&para;</a></h3>
<p>The bootloader is a special section of your MCU that allows you to upgrade the code stored on the MCU. Think of it like a Rescue Partition for your keyboard. </p>
<h4 id="teensy-bootloader-example">Teensy Bootloader Example<a class="headerlink" href="#teensy-bootloader-example" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="nv">BOOTLOADER</span> <span class="o">=</span> halfkay
</code></pre></div>

<h4 id="atmel-dfu-loader-example">Atmel DFU Loader Example<a class="headerlink" href="#atmel-dfu-loader-example" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="nv">BOOTLOADER</span> <span class="o">=</span> atmel-dfu
</code></pre></div>

<h4 id="pro-micro-bootloader-example">Pro Micro Bootloader Example<a class="headerlink" href="#pro-micro-bootloader-example" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="nv">BOOTLOADER</span> <span class="o">=</span> caterina
</code></pre></div>

<h3 id="build-options">Build Options<a class="headerlink" href="#build-options" title="Permanent link">&para;</a></h3>
<p>There are a number of features that can be turned on or off in <code>rules.mk</code>. See the <a href="../config_options/#feature-options">Config Options</a> page for a detailed list and description.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" data-md-state="hidden">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg>
            Back to top
          </a>
        
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.expand", "navigation.instant", "navigation.sections", "navigation.tabs", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../assets/javascripts/workers/search.709b4209.min.js", "version": {"provider": "mike"}}</script>
    
    
      <script src="../assets/javascripts/bundle.febc23d1.min.js"></script>
      
    
  </body>
</html>