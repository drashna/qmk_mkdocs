
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="canonical" href="https://docs.qmk.fm/0.13/faq_keymap/">
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.2, mkdocs-material-7.2.4">
    
    
      
        <title>Keymap FAQ - QMK Firmware Docs</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.f7f47774.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.3f5d1f46.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
    
      


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    <script>function __prefix(e){return new URL("..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#keymap-faq" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="QMK Firmware Docs" class="md-header__button md-logo" aria-label="QMK Firmware Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            QMK Firmware Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Keymap FAQ
            
          </span>
        </div>
      </div>
    </div>
    
    
      <div class="md-header__option">
        <div class="md-select">
          
          <button class="md-header__button md-icon" aria-label="Select language">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.52 17.52 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04M18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12m-2.62 7 1.62-4.33L19.12 17h-3.24z"/></svg>
          </button>
          <div class="md-select__inner">
            <ul class="md-select__list">
              
                <li class="md-select__item">
                  <a href="../README.md" hreflang="en" class="md-select__link">
                    English
                  </a>
                </li>
                
                <li class="md-select__item">
                  <a href="../zh-cn/" hreflang="zh" class="md-select__link">
                    中文
                  </a>
                </li>
                
                <li class="md-select__item">
                  <a href="../es/" hreflang="es" class="md-select__link">
                    Español
                  </a>
                </li>
                
                <li class="md-select__item">
                  <a href="../fr-fr/" hreflang="fr" class="md-select__link">
                    Français
                  </a>
                </li>
                
                <li class="md-select__item">
                  <a href="../he-il/" hreflang="he" class="md-select__link">
                    עברית
                  </a>
                </li>
                
                <li class="md-select__item">
                  <a href="../pt-br/" hreflang="pt" class="md-select__link">
                    Português
                  </a>
                </li>
                
                <li class="md-select__item">
                  <a href="../ru-ru/" hreflang="ru" class="md-select__link">
                    Русский
                  </a>
                </li>
                
                <li class="md-select__item">
                  <a href="../ja/" hreflang="ja" class="md-select__link">
                    日本語
                  </a>
                </li>
                
            </ul>
          </div>
        </div>
      </div>
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/qmk/qmk_firmware/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    qmk/qmk_firmware
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href=".." class="md-tabs__link">
      Quantum Mechanical Keyboard Firmware
    </a>
  </li>

      
    </ul>
  </div>
</nav>
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="QMK Firmware Docs" class="md-nav__button md-logo" aria-label="QMK Firmware Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    QMK Firmware Docs
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/qmk/qmk_firmware/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    qmk/qmk_firmware
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Quantum Mechanical Keyboard Firmware
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#what-keycodes-can-i-use" class="md-nav__link">
    What Keycodes Can I Use?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-are-the-default-keycodes" class="md-nav__link">
    What Are the Default Keycodes?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-can-i-make-custom-names-for-complex-keycodes" class="md-nav__link">
    How Can I Make Custom Names For Complex Keycodes?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#some-of-my-keys-are-swapped-or-not-working" class="md-nav__link">
    Some Of My Keys Are Swapped Or Not Working
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-menu-key-isnt-working" class="md-nav__link">
    The Menu Key Isn't Working
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kc_sysreq-isnt-working" class="md-nav__link">
    KC_SYSREQ Isn't Working
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#power-keys-arent-working" class="md-nav__link">
    Power Keys Aren't Working
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#one-shot-modifier" class="md-nav__link">
    One Shot Modifier
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modifierlayer-stuck" class="md-nav__link">
    Modifier/Layer Stuck
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mechanical-lock-switch-support" class="md-nav__link">
    Mechanical Lock Switch Support
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#input-special-characters-other-than-ascii-like-cedille-c" class="md-nav__link">
    Input Special Characters Other Than ASCII like Cédille 'Ç'
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fn-key-on-macos" class="md-nav__link">
    Fn Key on macOS
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#keys-supported-in-mac-osx" class="md-nav__link">
    Keys Supported in Mac OSX?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#jis-keys-in-mac-osx" class="md-nav__link">
    JIS Keys in Mac OSX
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rn-42-bluetooth-doesnt-work-with-karabiner" class="md-nav__link">
    RN-42 Bluetooth Doesn't Work with Karabiner
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#esc-and-on-a-single-key" class="md-nav__link">
    Esc and &#96; on a Single Key
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#eject-on-mac-osx" class="md-nav__link">
    Eject on Mac OSX
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#whats-weak_mods-and-real_mods-in-action_utilc" class="md-nav__link">
    What's weak_mods and real_mods in action_util.c
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/qmk/qmk_firmware/edit/master/docs/faq_keymap.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="keymap-faq">Keymap FAQ<a class="headerlink" href="#keymap-faq" title="Permanent link">&para;</a></h1>
<p>This page covers questions people often have about keymaps. If you haven't you should read <a href="../keymap/">Keymap Overview</a> first.</p>
<h2 id="what-keycodes-can-i-use">What Keycodes Can I Use?<a class="headerlink" href="#what-keycodes-can-i-use" title="Permanent link">&para;</a></h2>
<p>See <a href="../keycodes/">Keycodes</a> for an index of keycodes available to you. These link to more extensive documentation when available.</p>
<p>Keycodes are actually defined in <a href="https://github.com/qmk/qmk_firmware/blob/master/tmk_core/common/keycode.h">common/keycode.h</a>.</p>
<h2 id="what-are-the-default-keycodes">What Are the Default Keycodes?<a class="headerlink" href="#what-are-the-default-keycodes" title="Permanent link">&para;</a></h2>
<p>There are 3 standard keyboard layouts in use around the world- ANSI, ISO, and JIS. North America primarily uses ANSI, Europe and Africa primarily use ISO, and Japan uses JIS. Regions not mentioned typically use either ANSI or ISO. The keycodes corresponding to these layouts are shown here:</p>
<!-- Source for this image: https://www.keyboard-layout-editor.com/#/gists/bf431647d1001cff5eff20ae55621e9a -->
<p><img alt="Keyboard Layout Image" src="https://i.imgur.com/5wsh5wM.png" /></p>
<h2 id="how-can-i-make-custom-names-for-complex-keycodes">How Can I Make Custom Names For Complex Keycodes?<a class="headerlink" href="#how-can-i-make-custom-names-for-complex-keycodes" title="Permanent link">&para;</a></h2>
<p>Sometimes, for readability's sake, it's useful to define custom names for some keycodes. People often define custom names using <code>#define</code>. For example:</p>
<div class="codehilite"><pre><span></span><code><span class="cp">#define FN_CAPS LT(_FL, KC_CAPSLOCK)</span>
<span class="cp">#define ALT_TAB LALT(KC_TAB)</span>
</code></pre></div>

<p>This will allow you to use <code>FN_CAPS</code> and <code>ALT_TAB</code> in your keymap, keeping it more readable.</p>
<h2 id="some-of-my-keys-are-swapped-or-not-working">Some Of My Keys Are Swapped Or Not Working<a class="headerlink" href="#some-of-my-keys-are-swapped-or-not-working" title="Permanent link">&para;</a></h2>
<p>QMK has two features, Bootmagic and Command, which allow you to change the behavior of your keyboard on the fly. This includes, but is not limited to, swapping Ctrl/Caps, disabling Gui, swapping Alt/Gui, swapping Backspace/Backslash, disabling all keys, and other behavioral modifications. </p>
<p>As a quick fix try holding down <code>Space</code>+<code>Backspace</code> while you plug in your keyboard. This will reset the stored settings on your keyboard, returning those keys to normal operation. If that doesn't work look here:</p>
<ul>
<li><a href="../feature_bootmagic/">Bootmagic</a></li>
<li><a href="../feature_command/">Command</a> </li>
</ul>
<h2 id="the-menu-key-isnt-working">The Menu Key Isn't Working<a class="headerlink" href="#the-menu-key-isnt-working" title="Permanent link">&para;</a></h2>
<p>The key found on most modern keyboards that is located between <code>KC_RGUI</code> and <code>KC_RCTL</code> is actually called <code>KC_APP</code>. This is because when that key was invented there was already a key named <code>MENU</code> in the relevant standards, so MS chose to call that the <code>APP</code> key.</p>
<h2 id="kc_sysreq-isnt-working"><code>KC_SYSREQ</code> Isn't Working<a class="headerlink" href="#kc_sysreq-isnt-working" title="Permanent link">&para;</a></h2>
<p>Use keycode for Print Screen(<code>KC_PSCREEN</code> or <code>KC_PSCR</code>) instead of <code>KC_SYSREQ</code>. Key combination of 'Alt + Print Screen' is recognized as 'System request'.</p>
<p>See <a href="https://github.com/tmk/tmk_keyboard/issues/168">issue #168</a> and
* https://en.wikipedia.org/wiki/Magic_SysRq_key
* https://en.wikipedia.org/wiki/System_request</p>
<h2 id="power-keys-arent-working">Power Keys Aren't Working<a class="headerlink" href="#power-keys-arent-working" title="Permanent link">&para;</a></h2>
<p>Somewhat confusingly, there are two "Power" keycodes in QMK: <code>KC_POWER</code> in the Keyboard/Keypad HID usage page, and <code>KC_SYSTEM_POWER</code> (or <code>KC_PWR</code>) in the Consumer page.</p>
<p>The former is only recognized on macOS, while the latter, <code>KC_SLEP</code> and <code>KC_WAKE</code> are supported by all three major operating systems, so it is recommended to use those instead. Under Windows, these keys take effect immediately, however on macOS they must be held down until a dialog appears.</p>
<h2 id="one-shot-modifier">One Shot Modifier<a class="headerlink" href="#one-shot-modifier" title="Permanent link">&para;</a></h2>
<p>Solves my personal 'the' problem. I often got 'the' or 'THe' wrongly instead of 'The'.  One Shot Shift mitigates this for me.
https://github.com/tmk/tmk_keyboard/issues/67</p>
<h2 id="modifierlayer-stuck">Modifier/Layer Stuck<a class="headerlink" href="#modifierlayer-stuck" title="Permanent link">&para;</a></h2>
<p>Modifier keys or layers can be stuck unless layer switching is configured properly.
For Modifier keys and layer actions you have to place <code>KC_TRANS</code> on same position of destination layer to  unregister the modifier key or return to previous layer on release event.</p>
<ul>
<li>https://github.com/tmk/tmk_core/blob/master/doc/keymap.md#31-momentary-switching</li>
<li>https://geekhack.org/index.php?topic=57008.msg1492604#msg1492604</li>
<li>https://github.com/tmk/tmk_keyboard/issues/248</li>
</ul>
<h2 id="mechanical-lock-switch-support">Mechanical Lock Switch Support<a class="headerlink" href="#mechanical-lock-switch-support" title="Permanent link">&para;</a></h2>
<p>This feature is for <em>mechanical lock switch</em> like <a href="https://deskthority.net/wiki/Alps_SKCL_Lock">this Alps one</a>. You can enable it by adding this to your <code>config.h</code>:</p>
<div class="codehilite"><pre><span></span><code>#define LOCKING_SUPPORT_ENABLE
#define LOCKING_RESYNC_ENABLE
</code></pre></div>

<p>After enabling this feature use keycodes <code>KC_LCAP</code>, <code>KC_LNUM</code> and <code>KC_LSCR</code> in your keymap instead.</p>
<p>Old vintage mechanical keyboards occasionally have lock switches but modern ones don't have. <strong><em>You don't need this feature in most case and just use keycodes <code>KC_CAPS</code>, <code>KC_NLCK</code> and <code>KC_SLCK</code>.</em></strong></p>
<h2 id="input-special-characters-other-than-ascii-like-cedille-c">Input Special Characters Other Than ASCII like Cédille 'Ç'<a class="headerlink" href="#input-special-characters-other-than-ascii-like-cedille-c" title="Permanent link">&para;</a></h2>
<p>See the <a href="../feature_unicode/">Unicode</a> feature.</p>
<h2 id="fn-key-on-macos"><code>Fn</code> Key on macOS<a class="headerlink" href="#fn-key-on-macos" title="Permanent link">&para;</a></h2>
<p>Unlike most Fn keys, the one on Apple keyboards actually has its own keycode... sort of. It takes the place of the sixth keycode in a basic 6KRO HID report -- so an Apple keyboard is in fact only 5KRO.</p>
<p>It is technically possible to get QMK to send this key. However, doing so requires modification of the report format to add the state of the Fn key.
Even worse, it is not recognized unless the keyboard's VID and PID match that of a real Apple keyboard. The legal issues that official QMK support for this feature may create mean it is unlikely to happen.</p>
<p>See <a href="https://github.com/qmk/qmk_firmware/issues/2179">this issue</a> for detailed information.</p>
<h2 id="keys-supported-in-mac-osx">Keys Supported in Mac OSX?<a class="headerlink" href="#keys-supported-in-mac-osx" title="Permanent link">&para;</a></h2>
<p>You can know which keycodes are supported in OSX from this source code.</p>
<p><code>usb_2_adb_keymap</code> array maps Keyboard/Keypad Page usages to ADB scancodes(OSX internal keycodes).</p>
<p>https://opensource.apple.com/source/IOHIDFamily/IOHIDFamily-606.1.7/IOHIDFamily/Cosmo_USB2ADB.c</p>
<p>And <code>IOHIDConsumer::dispatchConsumerEvent</code> handles Consumer page usages.</p>
<p>https://opensource.apple.com/source/IOHIDFamily/IOHIDFamily-606.1.7/IOHIDFamily/IOHIDConsumer.cpp</p>
<h2 id="jis-keys-in-mac-osx">JIS Keys in Mac OSX<a class="headerlink" href="#jis-keys-in-mac-osx" title="Permanent link">&para;</a></h2>
<p>Japanese JIS keyboard specific keys like <code>無変換(Muhenkan)</code>, <code>変換(Henkan)</code>, <code>ひらがな(hiragana)</code> are not recognized on OSX. You can use <strong>Seil</strong> to enable those keys, try following options.</p>
<ul>
<li>Enable NFER Key on PC keyboard</li>
<li>Enable XFER Key on PC keyboard</li>
<li>Enable KATAKANA Key on PC keyboard</li>
</ul>
<p>https://pqrs.org/osx/karabiner/seil.html</p>
<h2 id="rn-42-bluetooth-doesnt-work-with-karabiner">RN-42 Bluetooth Doesn't Work with Karabiner<a class="headerlink" href="#rn-42-bluetooth-doesnt-work-with-karabiner" title="Permanent link">&para;</a></h2>
<p>Karabiner - Keymapping tool on Mac OSX - ignores inputs from RN-42 module by default. You have to enable this option to make Karabiner working with your keyboard.
https://github.com/tekezo/Karabiner/issues/403#issuecomment-102559237</p>
<p>See these for the detail of this problem.
https://github.com/tmk/tmk_keyboard/issues/213
https://github.com/tekezo/Karabiner/issues/403</p>
<h2 id="esc-and-on-a-single-key">Esc and <code>&#96;</code> on a Single Key<a class="headerlink" href="#esc-and-on-a-single-key" title="Permanent link">&para;</a></h2>
<p>See the <a href="../feature_grave_esc/">Grave Escape</a> feature.</p>
<h2 id="eject-on-mac-osx">Eject on Mac OSX<a class="headerlink" href="#eject-on-mac-osx" title="Permanent link">&para;</a></h2>
<p><code>KC_EJCT</code> keycode works on OSX. https://github.com/tmk/tmk_keyboard/issues/250
It seems Windows 10 ignores the code and Linux/Xorg recognizes but has no mapping by default.</p>
<p>Not sure what keycode Eject is on genuine Apple keyboard actually. HHKB uses <code>F20</code> for Eject key(<code>Fn+f</code>) on Mac mode but this is not same as Apple Eject keycode probably.</p>
<h2 id="whats-weak_mods-and-real_mods-in-action_utilc">What's <code>weak_mods</code> and <code>real_mods</code> in <code>action_util.c</code><a class="headerlink" href="#whats-weak_mods-and-real_mods-in-action_utilc" title="Permanent link">&para;</a></h2>
<p><strong><em>TO BE IMPROVED</em></strong></p>
<p>real_mods is intended to retains state of real/physical modifier key state, while
weak_mods retains state of virtual or temporary modifiers which should not affect state real modifier key.</p>
<p>Let's say you hold down physical left shift key and type ACTION_MODS_KEY(LSHIFT, KC_A),</p>
<p>with weak_mods,
* (1) hold down left shift: real_mods |= MOD_BIT(LSHIFT)
* (2) press ACTION_MODS_KEY(LSHIFT, KC_A): weak_mods |= MOD_BIT(LSHIFT)
* (3) release ACTION_MODS_KEY(LSHIFT, KC_A): weak_mods &amp;= ~MOD_BIT(LSHIFT)
real_mods still keeps modifier state.</p>
<p>without weak mods,
* (1) hold down left shift: real_mods |= MOD_BIT(LSHIFT)
* (2) press ACTION_MODS_KEY(LSHIFT, KC_A): real_mods |= MOD_BIT(LSHIFT)
* (3) release ACTION_MODS_KEY(LSHIFT, KC_A): real_mods &amp;= ~MOD_BIT(LSHIFT)
here real_mods lost state for 'physical left shift'.</p>
<p>weak_mods is ORed with real_mods when keyboard report is sent.
https://github.com/tmk/tmk_core/blob/master/common/action_util.c#L57</p>
                
              
              
                


              
            </article>
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" data-md-state="hidden">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg>
            Back to top
          </a>
        
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.expand", "navigation.instant", "navigation.sections", "navigation.tabs", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../assets/javascripts/workers/search.709b4209.min.js", "version": {"provider": "mike"}}</script>
    
    
      <script src="../assets/javascripts/bundle.febc23d1.min.js"></script>
      
    
  </body>
</html>