
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="canonical" href="https://docs.qmk.fm/0.13/ChangeLog/20200530/">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.2, mkdocs-material-7.2.4">
    
    
      
        <title>QMK Breaking Change - 2020 May 30 Changelog - QMK Firmware Docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.f7f47774.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.3f5d1f46.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
    
      


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    <script>function __prefix(e){return new URL("../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#qmk-breaking-change-2020-may-30-changelog" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="QMK Firmware Docs" class="md-header__button md-logo" aria-label="QMK Firmware Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            QMK Firmware Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              QMK Breaking Change - 2020 May 30 Changelog
            
          </span>
        </div>
      </div>
    </div>
    
    
      <div class="md-header__option">
        <div class="md-select">
          
          <button class="md-header__button md-icon" aria-label="Select language">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.52 17.52 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04M18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12m-2.62 7 1.62-4.33L19.12 17h-3.24z"/></svg>
          </button>
          <div class="md-select__inner">
            <ul class="md-select__list">
              
                <li class="md-select__item">
                  <a href="../../README.md" hreflang="en" class="md-select__link">
                    English
                  </a>
                </li>
                
                <li class="md-select__item">
                  <a href="../../zh-cn/" hreflang="zh" class="md-select__link">
                    中文
                  </a>
                </li>
                
                <li class="md-select__item">
                  <a href="../../es/" hreflang="es" class="md-select__link">
                    Español
                  </a>
                </li>
                
                <li class="md-select__item">
                  <a href="../../fr-fr/" hreflang="fr" class="md-select__link">
                    Français
                  </a>
                </li>
                
                <li class="md-select__item">
                  <a href="../../he-il/" hreflang="he" class="md-select__link">
                    עברית
                  </a>
                </li>
                
                <li class="md-select__item">
                  <a href="../../pt-br/" hreflang="pt" class="md-select__link">
                    Português
                  </a>
                </li>
                
                <li class="md-select__item">
                  <a href="../../ru-ru/" hreflang="ru" class="md-select__link">
                    Русский
                  </a>
                </li>
                
                <li class="md-select__item">
                  <a href="../../ja/" hreflang="ja" class="md-select__link">
                    日本語
                  </a>
                </li>
                
            </ul>
          </div>
        </div>
      </div>
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/qmk/qmk_firmware/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    qmk/qmk_firmware
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../.." class="md-tabs__link">
      Quantum Mechanical Keyboard Firmware
    </a>
  </li>

      
    </ul>
  </div>
</nav>
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="QMK Firmware Docs" class="md-nav__button md-logo" aria-label="QMK Firmware Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    QMK Firmware Docs
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/qmk/qmk_firmware/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    qmk/qmk_firmware
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Quantum Mechanical Keyboard Firmware
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#core-changes" class="md-nav__link">
    Core Changes
  </a>
  
    <nav class="md-nav" aria-label="Core Changes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#converting-v-usb-usbdrv-to-a-submodule" class="md-nav__link">
    Converting V-USB usbdrv to a submodule
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unify-tap-hold-functions-and-documentation" class="md-nav__link">
    Unify Tap Hold functions and documentation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#python-required-in-the-build-process" class="md-nav__link">
    Python Required In The Build Process
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#upgrade-from-tinyprintf-to-mpalandprintf" class="md-nav__link">
    Upgrade from tinyprintf to mpaland/printf
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fixed-rgb_disable_after_timeout-to-be-seconds-based-small-internals-cleanup" class="md-nav__link">
    Fixed RGB_DISABLE_AFTER_TIMEOUT to be seconds based &amp; small internals cleanup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#switch-to-qmk-forks-for-everything" class="md-nav__link">
    Switch to qmk forks for everything
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#code-cleanup-regarding-deprecated-macro-play_note_array-by-replacing-it-with-play_song" class="md-nav__link">
    code cleanup regarding deprecated macro PLAY_NOTE_ARRAY by replacing it with PLAY_SONG
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fixing-wrong-configuration-of-audio-feature" class="md-nav__link">
    fixing wrong configuration of AUDIO feature
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#keyboard-refactors" class="md-nav__link">
    Keyboard Refactors
  </a>
  
    <nav class="md-nav" aria-label="Keyboard Refactors">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#migrating-lily58-to-use-split_common" class="md-nav__link">
    Migrating Lily58 to use split_common
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#refactor-zinc-to-use-split_common" class="md-nav__link">
    Refactor zinc to use split_common
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#refactor-of-tkc1800-to-use-common-oled-code" class="md-nav__link">
    Refactor of TKC1800 to use common OLED code
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#split-hhkb-to-ansi-and-jp-layouts-and-add-via-support-for-each" class="md-nav__link">
    Split HHKB to ANSI and JP layouts and Add VIA support for each
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#keyboard-moves" class="md-nav__link">
    Keyboard Moves
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#keycode-migration-prs" class="md-nav__link">
    Keycode Migration PRs
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/qmk/qmk_firmware/edit/master/docs/ChangeLog/20200530.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="qmk-breaking-change-2020-may-30-changelog">QMK Breaking Change - 2020 May 30 Changelog<a class="headerlink" href="#qmk-breaking-change-2020-may-30-changelog" title="Permanent link">&para;</a></h1>
<p>Four times a year QMK runs a process for merging Breaking Changes. A Breaking Change is any change which modifies how QMK behaves in a way that is incompatible or potentially dangerous. We limit these changes to 4 times per year so that users can have confidence that updating their QMK tree will not break their keymaps.</p>
<p>The list of changes follows.</p>
<h2 id="core-changes">Core Changes<a class="headerlink" href="#core-changes" title="Permanent link">&para;</a></h2>
<h3 id="converting-v-usb-usbdrv-to-a-submodule">Converting V-USB usbdrv to a submodule<a class="headerlink" href="#converting-v-usb-usbdrv-to-a-submodule" title="Permanent link">&para;</a></h3>
<p><a href="https://github.com/qmk/qmk_firmware/pull/8321">#8321</a> and <a href="https://github.com/qmk/qmk_compiler/pull/62">qmk_compiler#62</a>.</p>
<p>These PRs move the V-USB driver code out of the qmk_firmware repository and into a submodule pointed at https://github.com/obdev/v-usb. This will make it easier to update the codebase if needed, while applying any potential QMK-specific modifications by forking it to the QMK GitHub organization.</p>
<h3 id="unify-tap-hold-functions-and-documentation">Unify Tap Hold functions and documentation<a class="headerlink" href="#unify-tap-hold-functions-and-documentation" title="Permanent link">&para;</a></h3>
<p><a href="https://github.com/qmk/qmk_firmware/pull/8348">#8348</a></p>
<p>Updates all of the per key tap-hold functions to pass the <code>keyrecord_t</code> structure, and include documentation changes.</p>
<p>Any remaining versions or code outside of the main repo will need to be converted: 
| Old function                                         | New Function                                                              |
|------------------------------------------------------|---------------------------------------------------------------------------|
|<code>uint16_t get_tapping_term(uint16_t keycode)</code>         |<code>uint16_t get_tapping_term(uint16_t keycode, keyrecord_t *record)</code>         |
|<code>bool get_ignore_mod_tap_interrupt(uint16_t keycode)</code> |<code>bool get_ignore_mod_tap_interrupt(uint16_t keycode, keyrecord_t *record)</code> |</p>
<h3 id="python-required-in-the-build-process">Python Required In The Build Process<a class="headerlink" href="#python-required-in-the-build-process" title="Permanent link">&para;</a></h3>
<p><a href="https://github.com/qmk/qmk_firmware/pull/9000">#9000</a></p>
<p>This is the last release of QMK that will work without having Python 3.6 (or later) installed. If your environment is not fully setup you will get a warning instructing you to set it up.</p>
<p>After the next breaking change you will not be able to build if <code>bin/qmk hello</code> does not work.</p>
<h3 id="upgrade-from-tinyprintf-to-mpalandprintf">Upgrade from tinyprintf to mpaland/printf<a class="headerlink" href="#upgrade-from-tinyprintf-to-mpalandprintf" title="Permanent link">&para;</a></h3>
<p><a href="https://github.com/qmk/qmk_firmware/pull/8269">#8269</a></p>
<ul>
<li>Provides debug functionality on ChibiOS/ARM that is more compliant than previous integrations.</li>
<li>Less maintenence, fewer QMK customisations, and allows QMK to sidestep previous compile and runtime issues.</li>
<li>A <code>make git-submodule</code> may be required after pulling the latest QMK Firmware code to update to the new dependency.</li>
</ul>
<h3 id="fixed-rgb_disable_after_timeout-to-be-seconds-based-small-internals-cleanup">Fixed RGB_DISABLE_AFTER_TIMEOUT to be seconds based &amp; small internals cleanup<a class="headerlink" href="#fixed-rgb_disable_after_timeout-to-be-seconds-based-small-internals-cleanup" title="Permanent link">&para;</a></h3>
<p><a href="https://github.com/qmk/qmk_firmware/pull/6480">#6480</a></p>
<ul>
<li>Changes <code>RGB_DISABLE_AFTER_TIMEOUT</code> to be based on milliseconds instead of ticks.</li>
<li>Includes a code cleanup, resulting in a savings of 100 bytes, depending on features used.</li>
<li>Fixed issues with timeouts / suspending at the wrong time not turning off all LEDs in some cases.</li>
</ul>
<p>The <code>RGB_DISABLE_AFTER_TIMEOUT</code> definition is now deprecated, and has been superseded by <code>RGB_DISABLE_TIMEOUT</code>. To use the new definition, rename <code>RGB_DISABLE_AFTER_TIMEOUT</code> to <code>RGB_DISABLE_TIMEOUT</code> in your <code>config.h</code> file, and multiply the value set by 1200.</p>
<p>Before: <code>#define RGB_DISABLE_AFTER_TIMEOUT 100</code><br />
After: <code>#define RGB_DISABLE_TIMEOUT 120000</code></p>
<h3 id="switch-to-qmk-forks-for-everything">Switch to qmk forks for everything<a class="headerlink" href="#switch-to-qmk-forks-for-everything" title="Permanent link">&para;</a></h3>
<p><a href="https://github.com/qmk/qmk_firmware/pull/9019">#9019</a></p>
<p>Fork all QMK submodules to protect against upstream repositories disappearing.</p>
<h3 id="code-cleanup-regarding-deprecated-macro-play_note_array-by-replacing-it-with-play_song">code cleanup regarding deprecated macro PLAY_NOTE_ARRAY by replacing it with PLAY_SONG<a class="headerlink" href="#code-cleanup-regarding-deprecated-macro-play_note_array-by-replacing-it-with-play_song" title="Permanent link">&para;</a></h3>
<p><a href="https://github.com/qmk/qmk_firmware/pull/8484">#8484</a></p>
<p>Removes the deprecated <code>PLAY_NOTE_ARRAY</code> macro. References to it are replaced with <code>PLAY_SONG</code>, which references the same function.</p>
<h3 id="fixing-wrong-configuration-of-audio-feature">fixing wrong configuration of AUDIO feature<a class="headerlink" href="#fixing-wrong-configuration-of-audio-feature" title="Permanent link">&para;</a></h3>
<p><a href="https://github.com/qmk/qmk_firmware/pull/8903">#8903</a> and <a href="https://github.com/qmk/qmk_firmware/pull/8974">#8974</a></p>
<p><code>audio_avr.c</code> does not default to any pin; there has to be a #define XX_AUDIO in config.h at some level for Audio to actually work. Otherwise, the Audio code ends up cluttering the firmware, possibly breaking builds because the maximum allowed firmware size is exceeded.</p>
<p>These changes fix this by disabling Audio on keyboards that have the feature misconfigured, and therefore non-functional.</p>
<p>Also, add a compile-time error to alert the user to a missing pin-configuration (on AVR boards) when <code>AUDIO_ENABLE = yes</code> is set.</p>
<h2 id="keyboard-refactors">Keyboard Refactors<a class="headerlink" href="#keyboard-refactors" title="Permanent link">&para;</a></h2>
<h3 id="migrating-lily58-to-use-split_common">Migrating Lily58 to use split_common<a class="headerlink" href="#migrating-lily58-to-use-split_common" title="Permanent link">&para;</a></h3>
<p><a href="https://github.com/qmk/qmk_firmware/pull/6260">#6260</a></p>
<p>Modifies the default firmware for Lily58 to use the <code>split_common</code> library, instead of including and depending on its own set of libraries for the following functionality:</p>
<ul>
<li>SSD1306 display</li>
<li>i2c for OLED</li>
<li>Serial Communication</li>
</ul>
<p>This allows current lily58 firmware to advance with updates to the <code>split_common</code> library, which is shared with many other split keyboards.</p>
<h4 id="to-migrate-existing-lily58-firmware">To migrate existing Lily58 firmware:<a class="headerlink" href="#to-migrate-existing-lily58-firmware" title="Permanent link">&para;</a></h4>
<p><a href="https://github.com/qmk/qmk_firmware/pull/6260/files#diff-445ac369c8717dcd6fc6fc3630836fc1">Changes to <code>config.h</code></a>:
- Remove <code>#define SSD1306OLED</code> from config.h</p>
<p><a href="https://github.com/qmk/qmk_firmware/pull/6260/files#diff-20943ea59856e9bdf3d99ecb2eee40b7">Changes to <code>keymap.c</code></a>:
- Find/Replace each instance of <code>#ifdef SSD1306OLED</code> with <code>#ifdef OLED_DRIVER_ENABLE</code>
- The following changes are for compatibility with the OLED driver. If you don't use the OLED driver you may safely delete <a href="https://github.com/qmk/qmk_firmware/blob/e6b9980bd45c186f7360df68c24b6e05a80c10dc/keyboards/lily58/keymaps/default/keymap.c#L144-L190">this section</a>
- Alternatively, if you did not change the OLED code from that in <code>default</code>, you may find it easier to simply copy the <a href="https://github.com/qmk/qmk_firmware/blob/4ac310668501ae6786c711ecc8f01f62ddaa1c0b/keyboards/lily58/keymaps/default/keymap.c#L138-L172">relevant section</a>. Otherwise, the changes you need to make are as follows (sample change <a href="https://github.com/qmk/qmk_firmware/pull/6260/files#diff-20943ea59856e9bdf3d99ecb2eee40b7R138-R173">here</a>)
- <a href="https://github.com/qmk/qmk_firmware/pull/6260/files#diff-20943ea59856e9bdf3d99ecb2eee40b7L138-L141">Remove</a> the block</p>
<div class="codehilite"><pre><span></span><code><span class="cp">#ifdef SSD1306OLED  </span>
  <span class="n">iota_gfx_init</span><span class="p">(</span><span class="o">!</span><span class="n">has_usb</span><span class="p">());</span>   <span class="c1">// turns on the display  </span>
<span class="cp">#endif</span>
</code></pre></div>

<ul>
<li>Within the block bounded by <code>#ifdef OLED_DRIVER_ENABLE</code> and <code>#endif // OLED_DRIVER_ENABLE</code>, add the following block to ensure that your two OLEDs are rotated correctly across the left and right sides:</li>
</ul>
<div class="codehilite"><pre><span></span><code><span class="n">oled_rotation_t</span> <span class="nf">oled_init_user</span><span class="p">(</span><span class="n">oled_rotation_t</span> <span class="n">rotation</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">is_keyboard_master</span><span class="p">())</span>
    <span class="k">return</span> <span class="n">OLED_ROTATION_180</span><span class="p">;</span>  <span class="c1">// flips the display 180 degrees if offhand</span>
  <span class="k">return</span> <span class="n">rotation</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<ul>
<li>Remove the functions <code>matrix_scan_user</code>, <code>matrix_update</code> and <code>iota_gfx_task_user</code></li>
<li>Find/Replace <code>matrix_render_user(struct CharacterMatrix *matrix)</code> with <code>iota_gfx_task_user(void)</code></li>
<li>Find/Replace <code>is_master</code> with <code>is_keyboard_master()</code></li>
<li>For each instance of <code>matrix_write_ln(matrix, display_fn())</code>, rewrite it as <code>oled_write_ln(read_layer_state(), false);</code></li>
<li>For each instance of <code>matrix_write(matrix, read_logo());</code>, replace with <code>oled_write(read_logo(), false);</code></li>
</ul>
<h3 id="refactor-zinc-to-use-split_common">Refactor zinc to use split_common<a class="headerlink" href="#refactor-zinc-to-use-split_common" title="Permanent link">&para;</a></h3>
<p><a href="https://github.com/qmk/qmk_firmware/pull/7114">#7114</a> and <a href="https://github.com/qmk/qmk_firmware/pull/9171">#9171</a></p>
<ul>
<li>Refactor to use split_common and remove split codes under the zinc/revx/</li>
<li>Add - backlight RGB LED and/or underglow RGB LED option</li>
<li>Add - continuous RGB animations feature (between L and R halves) </li>
<li>Fix - keymap files to adapt to changes<ul>
<li>all authors of keymaps confirmed this PR</li>
</ul>
</li>
<li>Update - documents and rules.mk</li>
</ul>
<h3 id="refactor-of-tkc1800-to-use-common-oled-code">Refactor of TKC1800 to use common OLED code<a class="headerlink" href="#refactor-of-tkc1800-to-use-common-oled-code" title="Permanent link">&para;</a></h3>
<p><a href="https://github.com/qmk/qmk_firmware/pull/8472">#8472</a></p>
<p>Modifies the default firmware for TKC1800 to use the in-built I2C and OLED drivers, instead of including and depending on its own set of libraries for the following functionality:</p>
<ul>
<li>SSD1306 display</li>
<li>i2c for OLED</li>
</ul>
<p>This allows current TKC1800 firmware to advance with updates to those drivers, which are shared with other keyboards.</p>
<h4 id="to-migrate-existing-tkc1800-firmware">To migrate existing TKC1800 firmware:<a class="headerlink" href="#to-migrate-existing-tkc1800-firmware" title="Permanent link">&para;</a></h4>
<p><a href="https://github.com/qmk/qmk_firmware/pull/8472/files#diff-d10b26e676b4a55cbb00d71955116526">Changes to <code>config.h</code></a>:
- Remove <code>#define SSD1306OLED</code> from config.h</p>
<p><a href="https://github.com/qmk/qmk_firmware/pull/8472/files#diff-3b35bd30abe89c8110717c6972cd2cc5">Changes to <code>tkc1800.c</code></a>:
- Add the following to avoid debug errors on HID_listen if the screen is not present</p>
<div class="codehilite"><pre><span></span><code><span class="kt">void</span> <span class="nf">keyboard_pre_init_kb</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">setPinInputHigh</span><span class="p">(</span><span class="n">D0</span><span class="p">);</span>
  <span class="n">setPinInputHigh</span><span class="p">(</span><span class="n">D1</span><span class="p">);</span>

  <span class="n">keyboard_pre_init_user</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>

<p><a href="https://github.com/qmk/qmk_firmware/pull/8472/files#diff-05a2a344ce27e4d045fe68520ccd4771">Changes to <code>keymap.c</code></a>:
- Find/Replace each instance of <code>#ifdef SSD1306OLED</code> with <code>#ifdef OLED_DRIVER_ENABLE</code>
- The following changes are for compatibility with the OLED driver. If you don't use the OLED driver you may safely delete <a href="https://github.com/qmk/qmk_firmware/blob/e6b9980bd45c186f7360df68c24b6e05a80c10dc/keyboards/lily58/keymaps/default/keymap.c#L144-L190">this section</a>
- <a href="https://github.com/qmk/qmk_firmware/pull/6260/files#diff-20943ea59856e9bdf3d99ecb2eee40b7L91-L158">Remove</a> the block</p>
<div class="codehilite"><pre><span></span><code><span class="cp">#ifdef SSD1306OLED  </span>
  <span class="n">iota_gfx_init</span><span class="p">(</span><span class="o">!</span><span class="n">has_usb</span><span class="p">());</span>   <span class="c1">// turns on the display  </span>
<span class="cp">#endif</span>
</code></pre></div>

<ul>
<li>Within the block bounded by <code>#ifdef OLED_DRIVER_ENABLE</code> and <code>#endif // OLED_DRIVER_ENABLE</code>, add the following block to ensure that your two OLEDs are rotated correctly across the left and right sides:</li>
</ul>
<div class="codehilite"><pre><span></span><code><span class="n">oled_rotation_t</span> <span class="nf">oled_init_user</span><span class="p">(</span><span class="n">oled_rotation_t</span> <span class="n">rotation</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">is_keyboard_master</span><span class="p">())</span>
    <span class="k">return</span> <span class="n">OLED_ROTATION_180</span><span class="p">;</span>  <span class="c1">// flips the display 180 degrees if offhand</span>
  <span class="k">return</span> <span class="n">rotation</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<ul>
<li>Remove the function <code>iota_gfx_task_user</code></li>
</ul>
<h3 id="split-hhkb-to-ansi-and-jp-layouts-and-add-via-support-for-each">Split HHKB to ANSI and JP layouts and Add VIA support for each<a class="headerlink" href="#split-hhkb-to-ansi-and-jp-layouts-and-add-via-support-for-each" title="Permanent link">&para;</a></h3>
<p><a href="https://github.com/qmk/qmk_firmware/pull/8582">#8582</a></p>
<ul>
<li>Splits the HHKB codebase into two separate folders <code>keyboards/hhkb/ansi</code> and <code>keyboards/hhkb/jp</code>.</li>
<li>Adds VIA Configurator support for both versions.</li>
</ul>
<h4 id="migrating-existing-hhkb-keymaps">Migrating existing HHKB keymaps<a class="headerlink" href="#migrating-existing-hhkb-keymaps" title="Permanent link">&para;</a></h4>
<ul>
<li>Remove any checks for the <code>HHKB_JP</code> definition</li>
<li>All checks for this definition have been removed, and each version uses the source that is appropriate to that version.</li>
<li>Move the directory for your keymap into the appropriate <code>keymaps</code> directory</li>
<li><code>keyboards/hhkb/ansi/keymaps/</code> for ANSI HHKBs</li>
<li><code>keyboards/hhkb/jp/keymaps/</code> for HHKB JPs</li>
<li>Compile with the new keyboard names</li>
<li>This PR changes the compilation instructions for the HHKB Alternate Controller. To compile firmware for this controller moving forward, use:<ul>
<li><code>make hhkb/ansi</code> for ANSI-layout HHKBs</li>
<li><code>make hhkb/jp</code> for HHKB JP keyboards</li>
</ul>
</li>
</ul>
<h2 id="keyboard-moves">Keyboard Moves<a class="headerlink" href="#keyboard-moves" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="https://github.com/qmk/qmk_firmware/pull/8412" title="Changing board names to prevent confusion">#8412</a> by blindassassin111</li>
<li><a href="https://github.com/qmk/qmk_firmware/pull/8499" title="Move the Keyboardio Model01 to a keyboardio/ subdir">#8499</a> by algernon</li>
<li><a href="https://github.com/qmk/qmk_firmware/pull/8830" title="Move spaceman keyboards">#8830</a> by Spaceman (formerly known as Rionlion100)</li>
<li><a href="https://github.com/qmk/qmk_firmware/pull/8537" title="Organizing my keyboards (plaid, tartan, ergoinu)">#8537</a> by hsgw</li>
</ul>
<p>Keyboards by Keyboardio, Spaceman, and hsgw move to vendor folders, while PCBs designed by blindassassin111 are renamed.</p>
<table>
<thead>
<tr>
<th align="left">Old Name</th>
<th align="left">New Name</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">2_milk</td>
<td align="left">spaceman/2_milk</td>
</tr>
<tr>
<td align="left">at101_blackheart</td>
<td align="left">at101_bh</td>
</tr>
<tr>
<td align="left">ergoinu</td>
<td align="left">dm9records/ergoinu</td>
</tr>
<tr>
<td align="left">model01</td>
<td align="left">keyboardio/model01</td>
</tr>
<tr>
<td align="left">omnikey_blackheart</td>
<td align="left">omnikey_bh</td>
</tr>
<tr>
<td align="left">pancake</td>
<td align="left">spaceman/pancake</td>
</tr>
<tr>
<td align="left">plaid</td>
<td align="left">dm9records/plaid</td>
</tr>
<tr>
<td align="left">tartan</td>
<td align="left">dm9records/tartan</td>
</tr>
<tr>
<td align="left">z150_blackheart</td>
<td align="left">z150_bh</td>
</tr>
</tbody>
</table>
<p>If you own one of these PCBs, please use the new names to compile your firmware moving forward.</p>
<h2 id="keycode-migration-prs">Keycode Migration PRs<a class="headerlink" href="#keycode-migration-prs" title="Permanent link">&para;</a></h2>
<p><a href="https://github.com/qmk/qmk_firmware/pull/8954" title="Migrate ACTION_LAYER_TOGGLE to TG()">#8954</a>, <a href="https://github.com/qmk/qmk_firmware/pull/8957" title="Migrate ACTION_MODS_ONESHOT to OSM()">#8957</a>, <a href="https://github.com/qmk/qmk_firmware/pull/8958" title="Migrate ACTION_DEFAULT_LAYER_SET to DF()">#8958</a>, <a href="https://github.com/qmk/qmk_firmware/pull/8959" title="Migrate ACTION_LAYER_MODS to LM()">#8959</a>, <a href="https://github.com/qmk/qmk_firmware/pull/8968" title="Migrate ACTION_MODS_TAP_KEY to MT()">#8968</a>, <a href="https://github.com/qmk/qmk_firmware/pull/8977" title="Migrate miscellaneous fn_actions entries">#8977</a>, and <a href="https://github.com/qmk/qmk_firmware/pull/8979" title="Migrate ACTION_MODS_KEY to chained mod keycodes">#8979</a></p>
<p>Authored by fauxpark, these pull requests remove references to deprecated TMK macros that have been superseded by native QMK keycodes.</p>
<table>
<thead>
<tr>
<th align="left">Old <code>fn_actions</code> action</th>
<th align="left">New QMK keycode</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>ACTION_DEFAULT_LAYER_SET(layer)</code></td>
<td align="left"><code>DF(layer)</code></td>
</tr>
<tr>
<td align="left"><code>ACTION_LAYER_MODS(layer, mod)</code></td>
<td align="left"><code>LM(layer, mod)</code></td>
</tr>
<tr>
<td align="left"><code>ACTION_LAYER_ONESHOT(mod)</code></td>
<td align="left"><code>OSL(mod)</code></td>
</tr>
<tr>
<td align="left"><code>ACTION_LAYER_TOGGLE(layer)</code></td>
<td align="left"><code>TG(layer)</code></td>
</tr>
<tr>
<td align="left"><code>ACTION_MODS_ONESHOT(mod)</code></td>
<td align="left"><code>OSM(mod)</code></td>
</tr>
<tr>
<td align="left"><code>ACTION_MODS_TAP_KEY(mod, kc)</code></td>
<td align="left"><code>MT(mod, kc)</code></td>
</tr>
<tr>
<td align="left"><code>ACTION_MODS_KEY(mod, kc)</code><br>e.g. <code>ACTION_MODS_KEY(MOD_LCTL, KC_0)</code></td>
<td align="left"><code>MOD(kc)</code><br>e.g. <code>LCTL(KC_0)</code></td>
</tr>
</tbody>
</table>
                
              
              
                


              
            </article>
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" data-md-state="hidden">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg>
            Back to top
          </a>
        
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.expand", "navigation.instant", "navigation.sections", "navigation.tabs", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../assets/javascripts/workers/search.709b4209.min.js", "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.febc23d1.min.js"></script>
      
    
  </body>
</html>